(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["www/[username]/[slug]-authdesktop",7,30,46,58,66,94,98,113],{"+c4W":function(e,t,n){var i=n("711d"),o=n("4/ic"),r=n("9ggG"),a=n("9Nap");e.exports=function(e){return r(e)?i(a(e)):o(e)}},"+ip3":function(e,t,n){n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n("Ye/N"),o=n("qD10"),r=n("Sp3T"),a=n("v/Q4"),s=n("yjg8"),c=n("U4JR"),d=n("n6mq"),l=n("nKUr");const u="AddPinRep";function h({ctaText:e,handleClick:t,height:n,iconSize:u,textSize:h}){const b=Object(a.a)(),p=Object(r.a)();return Object(l.jsx)(d.f,{children:Object(l.jsx)(o.a,{onClick:()=>p(()=>{t&&t(),b.isPartner&&Object(c.b)(101,{component:0,element:10643})}),to:"/pin-builder/",children:Object(l.jsxs)(d.j,{children:[Object(l.jsx)(d.f,{alignItems:"center",color:"lightGray",display:"flex",fit:!0,height:n||s.e,justifyContent:"center",rounding:2,width:n||void 0,children:Object(l.jsx)(d.f,{color:"white",height:u||40,rounding:"circle",width:u||40,children:Object(l.jsx)(d.v,{accessibilityLabel:"",color:"red",icon:"add-circle",inline:!0,size:u||40})})}),Object(l.jsx)(d.f,{padding:2,children:Object(l.jsx)(d.ab,{color:"gray",size:h||"lg",weight:"bold",children:e||i.a._("Create Pin","label to open create pin modal","label to open create pin modal")})})]})})})}},"+jF9":function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n("pYMm"),r=n("fOPN"),a=n("LTlA"),s={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};t.default=function(e,t){void 0===e&&(e=s);var n=t.payload;switch(t.type){case o.BEGIN_DRAG:return i({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case o.PUBLISH_DRAG_SOURCE:return i({},e,{isSourcePublic:!0});case o.HOVER:return i({},e,{targetIds:n.targetIds});case r.REMOVE_TARGET:return-1===e.targetIds.indexOf(n.targetId)?e:i({},e,{targetIds:a.without(e.targetIds,n.targetId)});case o.DROP:return i({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case o.END_DRAG:return i({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}},"+k3R":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i]}},"+nTX":function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("bxss"),o=n("n6mq"),r=n("nKUr");function a({anchor:e,children:t,idealDirection:n,onDismiss:a,paddingX:s,paddingY:c,size:d="lg"}){return Object(r.jsx)(o.f,{dangerouslySetInlineStyle:{__style:{zIndex:1e3}},display:"flex",flex:"grow",children:Object(r.jsx)(i.a,{anchor:e,idealDirection:null!=n?n:"down",onDismiss:a,positionRelativeToAnchor:!0,size:d,children:Object(r.jsx)(o.f,{direction:"column",display:"flex",flex:"grow",paddingX:null!=s?s:2,paddingY:c,role:"list",children:t})})})}},"+qOO":function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("4dcN"),o=n("eOdZ");function r(e){return o.a.create("BoardFollowResource",{board_id:e})}function a(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function s(e){const t="board-follow";return n=>{r(e).callCreate().then(()=>{i.a.trackEvent(t,"success")}).catch(()=>{i.a.trackEvent(t,"error"),n(a(e,!1))}),n(a(e,!0))}}function c(e){const t="board-unfollow";return n=>{r(e).callDelete().then(()=>{i.a.trackEvent(t,"success")}).catch(()=>{i.a.trackEvent(t,"error"),n(a(e,!0))}),n(a(e,!1))}}},"+wdc":function(e,t,n){var i,o,r,a;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,h=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(n){throw setTimeout(h,0),n}};i=function(e){null!==l?setTimeout(i,0,e):(l=e,setTimeout(h,0))},o=function(e,t){u=setTimeout(e,t)},r=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var b=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,m=null,j=-1,v=5,O=0;t.unstable_shouldYield=function(){return t.unstable_now()>=O},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,y=x.port2;x.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();O=e+v;try{m(!0,e)?y.postMessage(null):(g=!1,m=null)}catch(n){throw y.postMessage(null),n}}else g=!1},i=function(e){m=e,g||(g=!0,y.postMessage(null))},o=function(e,n){j=b((function(){e(t.unstable_now())}),n)},r=function(){p(j),j=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,o=e[i];if(!(void 0!==o&&0<S(o,t)))break e;e[i]=t,e[n]=o,n=i}}function w(e){return void 0===(e=e[0])?null:e}function C(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length;i<o;){var r=2*(i+1)-1,a=e[r],s=r+1,c=e[s];if(void 0!==a&&0>S(a,n))void 0!==c&&0>S(c,a)?(e[i]=c,e[s]=n,i=s):(e[i]=a,e[r]=n,i=r);else{if(!(void 0!==c&&0>S(c,n)))break e;e[i]=c,e[s]=n,i=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],T=[],E=1,P=null,D=3,B=!1,k=!1,M=!1;function R(e){for(var t=w(T);null!==t;){if(null===t.callback)C(T);else{if(!(t.startTime<=e))break;C(T),t.sortIndex=t.expirationTime,_(I,t)}t=w(T)}}function A(e){if(M=!1,R(e),!k)if(null!==w(I))k=!0,i(L);else{var t=w(T);null!==t&&o(A,t.startTime-e)}}function L(e,n){k=!1,M&&(M=!1,r()),B=!0;var i=D;try{for(R(n),P=w(I);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=P.callback;if("function"==typeof a){P.callback=null,D=P.priorityLevel;var s=a(P.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?P.callback=s:P===w(I)&&C(I),R(n)}else C(I);P=w(I)}if(null!==P)var c=!0;else{var d=w(T);null!==d&&o(A,d.startTime-n),c=!1}return c}finally{P=null,D=i,B=!1}}var N=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){k||B||(k=!0,i(L))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return w(I)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=N,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:E++,callback:n,priorityLevel:e,startTime:a,expirationTime:c=a+c,sortIndex:-1},a>s?(e.sortIndex=a,_(T,e),null===w(I)&&e===w(T)&&(M?r():M=!0,o(A,a-s))):(e.sortIndex=c,_(I,e),k||B||(k=!0,i(L))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},"+wrf":function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("ViqK"),a=n("yaUg"),s=n("Ye/N"),c=n("v/Q4"),d=n("n6mq"),l=n("nKUr");function u({actionsDisabled:e,invite:t,isDim:n,onApprove:i,onDelete:o}){const u=Object(c.a)(),{access:h,status:b,invited_by_user:p,invited_user:f}=t,g=u.isAuth&&f.id===u.id,m=u.isAuth&&p.id===u.id,j=f.id===p.id,v="accepted"===b,O=h.includes("approve"),x=h.includes("delete"),y=s.a._("Approve","[button] approve another pinner's request to join the board as a collaborator","[button] approve another pinner's request to join the board as a collaborator"),_=((e,t,n)=>e?s.a._("Leave","[button] for a collaborator to leave a group board","[button] for a collaborator to leave a group board"):t&&!n?s.a._("Decline","[button] decline another pinner's request to join board as a collaborator","[button] decline another pinner's request to join board as a collaborator"):s.a._("Remove","[button] remove a collaborator from the board]","[button] remove a collaborator from the board]"))(g,j,v),w=x&&!O,C=x&&O,S=`/${f.username}/`;return Object(l.jsxs)(d.f,{children:[Object(l.jsx)(r.a,{imageUrl:f.image_medium_url||"",name:f.full_name,title:f.full_name,subtitle:((e,n,i)=>{const o=t.invited_by_user.full_name;return e?s.a._("That's you","subtext for current user who requested to join this board","subtext for current user who requested to join this board"):n?s.a._("Invited by you","subtext for a pending collaborator who was invited by the current viewer","subtext for a pending collaborator who was invited by the current viewer"):i?s.a._("Requested to join","The subtext that identifies a pending collaborator has personally requested to join the board","The subtext that identifies a pending collaborator has personally requested to join the board"):Object(a.a)(s.a._("Invited by {{ user_full_name }}","The subtext that identifies a pending collaborator who was invited to collaborate on the board","The subtext that identifies a pending collaborator who was invited to collaborate on the board"),{user_full_name:o})})(g,m,j),linkURL:S,isDim:void 0!==n?n:!v,accessory:w&&Object(l.jsx)(d.g,{inline:!0,disabled:e,onClick:o,text:_,size:"lg"})}),C&&Object(l.jsxs)(d.f,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end",children:[Object(l.jsx)(d.f,{paddingX:1,flex:"grow",width:"50%",children:Object(l.jsx)(d.g,{disabled:e,onClick:o,text:_,size:"lg"})}),Object(l.jsx)(d.f,{paddingX:1,flex:"grow",width:"50%",children:Object(l.jsx)(d.g,{color:"red",disabled:e,onClick:i,text:y,size:"lg"})})]})]})}var h=n("4dcN"),b=n("M1Uz"),p=n("L2iP"),f=n("ZE2w"),g=n("TgLd"),m=n("vvax");function j(e){const{onCancel:t,onRemove:n,useGestaltModal:i}=e,o=s.a._("Are you sure you want to leave this group board and remove it from your profile?"),r=i?d.G:g.b;return Object(l.jsx)(r,{accessibilityModalLabel:s.a._("Leave board?"),heading:s.a._("Leave board?"),onDismiss:t,size:"sm",footer:Object(l.jsxs)(d.f,{display:"flex",justifyContent:"end",children:[Object(l.jsx)(d.f,{paddingX:1,children:Object(l.jsx)(d.g,{inline:!0,onClick:t,text:s.a._("Cancel")})}),Object(l.jsx)(d.f,{paddingX:1,children:Object(l.jsx)(d.g,{color:"red",inline:!0,onClick:n,text:s.a._("Leave")})})]}),children:Object(l.jsx)(d.f,{padding:5,children:Object(l.jsx)(d.ab,{children:o})})})}class v extends i.Component{constructor(...e){var t,n,i;super(...e),i={shouldBlock:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}getBlockDescription(e,t){return"declineRequest"===e?t?Object(m.b)(s.a._("This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.","decline another pinner's request to join board as a collaborator and block them","decline another pinner's request to join board as a collaborator and block them"),{invited_user_first_name:t}):s.a._("This will decline this person from joining this board and block them from subsequent collaboration requests.","message that explains consequences of declining a request to join board as a collaborator","message that explains consequences of declining a request to join board as a collaborator"):t?Object(m.b)(s.a._("This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins."),{invited_user_first_name:t}):s.a._("This will remove this person, people they invited, and all their Pins.","message that explains consequences of removing a collaborator","message that explains consequences of removing a collaborator")}render(){const{removeType:e,firstName:t,fullName:n,onCancel:o,onRemove:r,onRemoveAndBlock:a,useGestaltModal:c}=this.props,u="declineRequest"===e?Object(m.b)(s.a._("Decline {{ invited_user_name }}?","[button] to decline a pinner's request to join a board as a collaborator","[button] to decline a pinner's request to join a board as a collaborator"),{invited_user_name:n}).join(""):Object(m.b)(s.a._("Remove {{ invited_user_name }}?","[button] to remove a pinner as a collaborator from a group board","[button] to remove a pinner as a collaborator from a group board"),{invited_user_name:n}).join(""),h=s.a._("This will keep them from saving Pins to this board. You can also:","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user."),b=this.getBlockDescription(e,t),p=this.state.shouldBlock?s.a._("Block","block another pinner after denying their request to collaborate on a board","block another pinner after denying their request to collaborate on a board"):s.a._("Remove","decline another pinner's request to collaborate on a board","decline another pinner's request to collaborate on a board"),f=Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)(d.f,{padding:5,children:Object(l.jsx)(d.ab,{children:h})}),Object(l.jsx)(d.p,{}),Object(l.jsxs)(d.f,{padding:5,display:"flex",children:[Object(l.jsx)(d.f,{paddingX:1,children:Object(l.jsx)(d.k,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState({shouldBlock:!this.state.shouldBlock})})}),Object(l.jsx)(d.f,{paddingX:1,children:Object(l.jsxs)(d.y,{htmlFor:"banUser",children:[Object(l.jsx)(d.ab,{weight:"bold",children:Object(m.b)(s.a._("Block {{ name }}"),{name:t||""})}),Object(l.jsx)(d.ab,{size:"md",children:b})]})})]})]}),j=c?d.G:g.b;return Object(l.jsx)(j,{accessibilityModalLabel:u,heading:u,onDismiss:o,size:"sm",footer:Object(l.jsxs)(d.f,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[Object(l.jsx)(d.f,{paddingX:1,children:Object(l.jsx)(d.g,{inline:!0,onClick:o,text:s.a._("Cancel")})}),Object(l.jsx)(d.f,{paddingX:1,children:Object(l.jsx)(d.g,{color:"red",inline:!0,onClick:this.state.shouldBlock?a:r,text:p})})]}),children:f})}}var O=n("nGHF");function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends i.Component{constructor(...e){super(...e),x(this,"state",{currentModal:null,loading:!1}),x(this,"showRemoveSuccessToast",()=>{const{toastManagerContext:e}=this.props,t=s.a._("Collaborator removed","BoardCollabInviteCellContainer.toast","Toast for removing a collaborator from a board");e.showOneToast(({onHide:e})=>Object(l.jsx)(b.a,{duration:3e3,onHide:e,text:t}))}),x(this,"onDelete",()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})}),x(this,"onApprove",()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:t}=this.props;this.setState({loading:!0}),e().then(t).finally(()=>{this.setState({loading:!1})})}),x(this,"deleteBoardInvite",(e=!1)=>{const{deleteBoardCollabInvite:t,onBoardLeave:n,onInviteDidUpdate:i}=this.props,o=this.isViewerInvitedUser,r=o?"collaborator_decline_invite":"collaborator_delete_invite";h.a.trackEvent(r,"click"),this.setState({currentModal:null,loading:!0}),t(o,e).then(()=>{h.a.trackEvent(r,"success"),i(),this.showRemoveSuccessToast(),o&&n()}).catch(()=>{h.a.trackEvent(r,"error")}).finally(()=>{this.setState({loading:!1})})}),x(this,"handleDeleteBoardInvite",()=>{this.deleteBoardInvite(!1)}),x(this,"handleDeleteBoardInviteAndBan",()=>{this.deleteBoardInvite(!0)}),x(this,"handleHideModal",()=>{this.setState({currentModal:null})})}get isViewerInvitedUser(){const{viewer:e,invite:{invited_user:t}}=this.props;return e.isAuth&&e.id===t.id}get isRequestToJoin(){const{invite:{invited_user:e,invited_by_user:t}}=this.props;return e.id===t.id}renderCurrentModal(){const{invite:{invited_user:e},useGestaltModal:t=!1}=this.props,{currentModal:n}=this.state;return"delete"===n?this.isViewerInvitedUser?Object(l.jsx)("div",{style:{position:"absolute",zIndex:p.h+1},children:Object(l.jsx)(j,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:t})}):Object(l.jsx)("div",{style:{position:"absolute",zIndex:p.h+1},children:Object(l.jsx)(v,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:t})}):null}render(){const{invite:e,isDim:t}=this.props,{loading:n}=this.state;return Object(l.jsxs)(d.f,{children:[Object(l.jsx)(u,{invite:e,isDim:t&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:n}),this.renderCurrentModal()]})}}t.a=Object(o.connect)(()=>({}),(e,t)=>{const{invite:n,invite:{invited_user:{id:i},board:{id:o}}}=t;return{approveBoardCollabInvite:()=>e(Object(f.a)(o,i)),deleteBoardCollabInvite:(t,i)=>e(Object(f.b)(n,t,i))}})((function(e){return Object(l.jsx)(y,{...e,toastManagerContext:Object(O.b)(),viewer:Object(c.a)()})}))},"/9aa":function(e,t,n){var i=n("NykK"),o=n("ExA7");e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==i(e)}},"/Ecc":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("bVT4");t.isFirefox=i.memoize((function(){return/firefox/i.test(navigator.userAgent)})),t.isSafari=i.memoize((function(){return Boolean(window.safari)}))},"/MAO":function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("FDmi"),a=n("TSYQ"),s=n.n(a),c=n("pSwN"),d=n("qD10"),l=n("n6mq"),u=n("ZVOf"),h=n("U4JR"),b=n("nKUr");t.a=Object(o.connect)(null,(function(e){return{follow:t=>e(Object(u.a)(t)),unfollow:t=>e(Object(u.c)(t))}}))((function({className:e,follow:t,isSelf:n,logData:o,showName:a=!1,showFollow:u=!1,size:p="small",subtitle:f="",title:g,unfollow:m,user:j={}}){const[v,O]=Object(i.useState)(j.explicitly_followed_by_me||!1),{full_name:x,username:y}=j,_=j.image_key||j.image_medium_url||j.image_small_url;return Object(b.jsx)("div",{className:s()("Module","User","hasText","thumb",p,e),children:Object(b.jsxs)(l.f,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,paddingY:1,children:[Object(b.jsx)(l.f,{flex:"grow",paddingX:1,children:Object(b.jsx)(d.a,{className:"profileSource",to:`/${y}/`,children:Object(b.jsxs)(l.f,{display:"flex",children:[Object(b.jsx)("div",{className:"thumbImageWrapper",children:Object(b.jsx)(r.a,{name:x,src:_,size:"fit"})}),g&&Object(b.jsx)("h3",{className:"title",children:g}),a&&Object(b.jsx)("h4",{className:"fullname",children:x}),f&&Object(b.jsx)("div",{className:"subtitle",children:f})]})})}),u&&Object(b.jsx)(l.f,{paddingX:1,children:Object(b.jsx)(c.a,{handleFollowClick:()=>{v?(m(j.id),O(!1)):(t(j.id),O(!0)),o&&Object(h.b)(101,o)},isFollowing:v,isSelf:Boolean(n)})})]})})}))},"/WHw":function(e,t,n){n.d(t,"a",(function(){return j}));var i=n("q1tI"),o=n("/MKj"),r=n("JW66"),a=n("Ye/N"),s=n("5FNA"),c=n("Wer7"),d=n("vvax"),l=n("ANjH"),u=n("oN2T"),h=n("c50B"),b=n("nKUr");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t,n;return n=t=class extends i.Component{constructor(...e){super(...e),p(this,"state",{createBoardError:null,inputName:this.props.prefilledName||"",nameValidators:[Object(h.o)({message:a.a._("Don't forget to name your board!")}),Object(h.j)({max:r.a.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:Object(d.b)(a.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a user input is too long","Validation error when a user input is too long"),{maxLength:r.a.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],nameValidatorErrors:[],privacy:this.props.isAdAccountOwner?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.PROTECTED,saving:!1}),p(this,"invalidateResource",e=>{const{dispatch:t,viewer:n}=this.props;t(Object(c.f)("BoardsResource",Object(s.a)(n.isAuth?n.username:"",e===r.a.BoardPrivacy.SECRET)))}),p(this,"createBoard",e=>{const{dispatch:t,viewer:n}=this.props;return t(Object(u.g)(e,{isFBC:n.isAuth&&0===n.boardCount}))}),p(this,"handleChangeName",(e,t)=>{const n=Object(h.r)(this.state.nameValidators,e);this.setState({inputName:e,nameValidatorErrors:n,createBoardError:null},()=>{t&&this.handleCreate()})}),p(this,"handleChangePrivacy",()=>{const e=this.state.privacy===r.a.BoardPrivacy.SECRET?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.SECRET;this.setState({privacy:e})}),p(this,"handleCreate",()=>{const{inputName:e,privacy:t}=this.state,{isAdAccountOwner:n,onCreate:i,advertiser_id:o}=this.props,r={privacy:t,name:e,...!n&&o?{advertiser_id:o}:{}};this.setState({saving:!0,createBoardError:null}),this.createBoard(r).then(e=>{this.setState({saving:!1}),i(e)}).catch(e=>{let t=a.a._("Uh oh! Something went wrong.");if("string"==typeof e)t=e;else if(e.message){const{message:n,message_detail:i}=e;t=i?`${n} ${i}`:n}this.setState({saving:!1,createBoardError:t})}),this.invalidateResource(t)})}render(){return Object(b.jsx)(e,{onBoardCreate:this.handleCreate,onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,...this.props,...this.state})}},p(t,"displayName",`WithBoardCreatePane(${e.displayName||e.name})`),n}function g({advertiser:e,viewer:t}){const n=!e||t.isAuth&&e.owner_user_id===t.id,i=e&&e.id;return{isAdAccountOwner:n,...i?{advertiser_id:i}:{},viewer:t}}function m(e){return{dispatch:e}}function j(e){return Object(l.compose)(Object(o.connect)(g,m),f)(e)}},"/X16":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));const i={USER_FOLLOW:"USER_FOLLOW"},o={USER_BLOCK:"USER_BLOCK"}},"/ZYE":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("q1tI"),o=n("493B");t.useMonitorOutput=function(e,t,n){var r=o.useCollector(e,t,n),a=r[0],s=r[1];return i.useEffect((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(s,{handlerIds:[t]})}),[e,s]),a}},"/acK":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("q1tI"),o=n("SFi7"),r=n("2S0S");t.useDragDropManager=function(){var e=i.useContext(o.context).dragDropManager;return r(null!=e,"Expected drag drop context"),e}},"/mzO":function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("Ye/N"),o=n("n6mq"),r=n("nKUr");function a({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:a,isManagedView:s,isNoTitle:c}){const d=s?6:c?0:3;return Object(r.jsxs)(o.f,{children:[!c&&Object(r.jsx)(o.p,{}),Object(r.jsxs)(o.f,{mdDisplay:"flex",justifyContent:"between",paddingX:s?0:4,paddingY:d,children:[!s&&!c&&Object(r.jsx)(o.f,{column:12,mdColumn:3,paddingY:2,children:Object(r.jsx)(o.ab,{size:"md",children:i.a._("Comment and Photo Permissions")})}),Object(r.jsxs)(o.f,{column:12,mdColumn:s?12:8,children:[Object(r.jsxs)(o.f,{paddingY:1,display:"flex",alignItems:"center",children:[Object(r.jsx)(o.V,{onChange:t,id:"CommentSwitch",switched:!e}),Object(r.jsx)(o.f,{paddingX:2,children:Object(r.jsx)(o.y,{htmlFor:"CommentSwitch",children:Object(r.jsx)(o.ab,{size:"md",children:i.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form")})})})]}),n&&Object(r.jsxs)(o.f,{paddingY:1,alignItems:"center",display:"flex",children:[Object(r.jsx)(o.V,{onChange:n,id:"PhotoSwitch",switched:!a}),Object(r.jsx)(o.f,{paddingX:2,children:Object(r.jsx)(o.y,{htmlFor:"PhotoSwitch",children:Object(r.jsx)(o.ab,{size:"md",children:i.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form")})})})]})]})]})]})}},"/ySb":function(e,t,n){n.r(t),n.d(t,"default",(function(){return m}));var i=n("/MKj"),o=n("Q59z"),r=n("Ye/N"),a=n("ypm9"),s=n("ZdPf"),c=n("juW8"),d=n("RNo4"),l=n("n6mq"),u=n("EC67"),h=n("nKUr");function b({boardResource:{data:e,refreshData:t}}){const n=null==e?void 0:e.id,b=Object(i.useSelector)(e=>n&&(e.boards.content||{})[n])||null,{search:p,state:f}=Object(u.i)();if(Object(a.a)(),!b)return Object(h.jsx)(l.T,{accessibilityLabel:r.a._("Loading Board page","ExperimentalBoardPageContainer.Spinner","Accessibility label on loading spinner"),show:!0});const g=null==f?void 0:f.newBoard,m=Object(s.d)(null==e?void 0:e.sensitivity),j=g&&!m&&null!=e&&e.should_show_more_ideas?c.a.jumpstartBoard:null,v=Object(d.k)(p);return Object(h.jsx)(o.a,{board:b,initialModalType:j,refreshBoardData:t,showPulsar:Boolean(v.showPulsar)})}var p=n("EyTA"),f=n("v/Q4"),g=n("75Er");function m(){const e=Object(f.a)(),{username:t}=Object(u.j)(),n=e.isAuth&&e.username===t;Object(g.b)({view_type:5,view_parameter:n?3069:3070});const i=Object(p.a)({name:"BoardResource",getOptions:({routeData:{params:{slug:e,username:t}}})=>({username:t,slug:unescape(e||""),field_set_key:"detailed"})});return Object(h.jsx)(b,{boardResource:i})}},"0/lc":function(e,t,n){n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n("eOdZ"),o=n("62cf");function r(e){const{updateUserData:t}=e,n={};let r=null;if(t.gender&&[o.d,o.e].includes(t.gender)?n.gender=t.gender:t.custom_gender&&(n.customGender=t.custom_gender,n.gender=o.i),t.age?n.age=t.age:t.birthdate&&(n.birthdate=t.birthdate),t.locale&&(n.locale=t.locale),t.country&&(n.country=t.country),t.business_vertical&&(n.businessVertical=t.business_vertical),t.business_vertical_other&&(n.businessVerticalOther=t.business_vertical_other),t.number_employees&&(n.numberEmployees=t.number_employees),t.first_name&&(n.firstName=t.first_name),t.last_name&&(n.lastName=t.last_name),t.full_name&&(n.fullName=t.full_name),t.parent_email&&(n.parentEmail=t.parent_email),t.website_url&&(n.websiteUrl=t.website_url),void 0!==t.allow_analytic_cookies&&(n.allow_analytic_cookies=t.allow_analytic_cookies),void 0!==t.allow_analytic_cookies&&(n.allow_marketing_cookies=t.allow_marketing_cookies),void 0!==t.allow_analytic_cookies&&(n.allow_personalization_cookies=t.allow_personalization_cookies),t.advertising_intent||t.business_name||t.account_type||t.business_goals||t.selected_ecommerce_platforms||t.enable_profile_message||t.enable_profile_address){const{account_type:e,advertising_intent:n,business_name:i,business_goals:o,enable_profile_message:a,enable_profile_address:s,selected_ecommerce_platforms:c}=t;r={...n?{advertising_intent:n}:{},...e?{account_type:e}:{},...i?{business_name:i}:{},...o?{business_goals:o}:{},...a?{enable_profile_message:a}:{},...s?{enable_profile_address:s}:{},...c?{selected_ecommerce_platforms:c}:{}}}r&&(n.partner=r,r.business_name&&(n.firstName=r.business_name));const a=i.a.create("UserSettingsResource",t).callUpdate();return function(e,t){return a.then(t=>(e({type:"UPDATE_USER_SET",payload:n}),t))}}function a(e){return{type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:{firstHomeFeedRequestAfterNux:e}}}function s(e,t){return n=>{i.a.create("UserStateResource",{state:e,value:t}).callCreate()}}function c(e,t=""){return n=>i.a.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate()}function d(e){return t=>i.a.create("OrientationContextResource",e).callCreate()}},"078/":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a}));const i=["AuthHomefeed","CloseupRelatedProducts","FollowingFeedGrid","RelatedPinGrid","RelatedProductsFeed","SearchItem"],o=["ArticleProductsStory","CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","STLProductsFeed","RelatedProductsFeed","ShoppingSquareGridRelatedProducts","UserProfilePinGrid"],r=[...o,"ShoppingSquareGridRelatedProductsBoth","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingSquareGridRelatedProductsMetadata","ProductPinsFeed","ShoppingSquareGridCrop","ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid"],a=["BaseBoardPinGrid"]},"0BOE":function(e,t,n){n.d(t,"a",(function(){return r}));const i={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=i[e.charAt(n)]||e.charAt(n);return t},r=(e,t,n="name")=>{const i=t.toLowerCase();return e.filter(e=>((e,t)=>{const n=t.split(" "),i=e.split(" ");let r=0;for(let a=0;a<i.length;a+=1)(o(i[a]).includes(n[r])||i[a].includes(n[r]))&&(r+=1);return r===n.length})(e[n].toLowerCase(),i))}},"0C0f":function(e,t,n){n.r(t),n.d(t,"BoardCollabFlyout",(function(){return w})),n.d(t,"default",(function(){return C}));var i=n("q1tI"),o=n("+wrf"),r=n("ViqK"),a=n("Ye/N"),s=n("3j7w"),c=n("w70y"),d=n("n6mq"),l=n("nKUr");function u({board:e,scrollInfo:t}){const n=Object(c.a)({name:"BoardCollaboratorsResource",options:{board_id:e.id},allowStale:!1});if(n.isLoaded){const{owner:o}=e,{data:a,isAtEnd:c,isFetching:d,fetchMore:u}=n,h=[o,...a||[]];return Object(l.jsxs)(i.Fragment,{children:[t?Object(l.jsx)(s.a,{scrollBuffer:3*t.container.clientHeight,scrollHeight:t.container.scrollHeight,scrollTop:t.top,isAtEnd:c,isFetching:d,fetchMore:u}):null,h.map(e=>{const{full_name:t,id:n,image_medium_url:i,username:o}=e;return Object(l.jsx)(r.a,{imageUrl:i,linkURL:`/${o}/`,name:t,subtitle:o,title:t},n)})]})}return Object(l.jsx)(d.T,{accessibilityLabel:a.a._("Loading","Loading spinner when rendering users","Loading spinner when rendering users"),show:!0})}var h=n("/MKj");var b=({heading:e,description:t,disabled:n=!1,id:i,onChange:o,switched:r})=>Object(l.jsxs)(d.f,{display:"flex",direction:"column",width:"100%",paddingX:6,paddingY:4,children:[Object(l.jsx)(d.ab,{weight:"bold",children:e}),Object(l.jsxs)(d.f,{display:"flex",direction:"row",alignItems:"center",marginTop:3,children:[Object(l.jsx)(d.f,{flex:"grow",marginEnd:2,children:Object(l.jsx)(d.ab,{children:t})}),Object(l.jsx)(d.V,{id:i,onChange:o,disabled:n,switched:r})]})]}),p=n("JW66"),f=n("TgLd"),g=n("oN2T");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j extends i.Component{constructor(...e){super(...e),m(this,"state",{invitesEnabled:Boolean(this.props.board.collaborator_invites_enabled),requestsEnabled:Boolean(this.props.board.collaborator_requests_enabled),emailEnabled:Boolean(this.props.board.collab_board_email)}),m(this,"handleInvitesToggle",()=>this.setState(e=>({invitesEnabled:!e.invitesEnabled}))),m(this,"handleRequestsToggle",()=>this.setState(e=>({requestsEnabled:!e.requestsEnabled}))),m(this,"handleEmailToggle",()=>this.setState(e=>({emailEnabled:!e.emailEnabled}))),m(this,"handleSubmit",()=>{const{onDismiss:e,board:t,updateBoard:n}=this.props,{invitesEnabled:i,requestsEnabled:o,emailEnabled:r}=this.state;n({...t,collaborator_invites_enabled:i,collaborator_requests_enabled:o,collab_board_email:r}).then(()=>e())})}render(){const{board:{privacy:e},onDismiss:t,isViewerOwner:n}=this.props,{invitesEnabled:i,requestsEnabled:o,emailEnabled:r}=this.state,s=[{heading:a.a._("Email notifications","Sub-heading for email notifications group board setting","Sub-heading for email notifications group board setting"),description:a.a._("Receive emails when Pins are added to this board","Description of email notifications setting","Description of email notifications setting"),disabled:!1,onChange:this.handleEmailToggle,id:"email",switched:r}],c=[...s,{heading:a.a._("Group requests","Sub-heading for group requests group board setting","Sub-heading for group requests group board setting"),description:a.a._("People can request to join this board","Description of group requests setting","Description of group requests setting"),disabled:e===p.a.BoardPrivacy.SECRET,onChange:this.handleRequestsToggle,id:"requests",switched:o},{heading:a.a._("Group members","Sub-heading for group members group board setting","Sub-heading for group members group board setting"),description:a.a._("Group members can invite others","Description of group members setting","Description of group members setting"),disabled:!1,onChange:this.handleInvitesToggle,id:"invites",switched:i}],u=n?c:s;return Object(l.jsx)(f.b,{accessibilityModalLabel:a.a._("Edit group settings","Label for editing group settings","Label for editing group settings"),heading:a.a._("Group board settings","Modal header for editing settings for a group board","Modal header for editing settings for a group board"),footer:Object(l.jsx)(d.f,{display:"flex",marginStart:-1,marginEnd:-1,justifyContent:"end",children:Object(l.jsx)(d.f,{paddingX:1,children:Object(l.jsx)(d.g,{inline:!0,color:"red",onClick:this.handleSubmit,text:a.a._("Done","Button text for being finished with editing group board settings","Button text for being finished with editing group board settings")})})}),onDismiss:t,size:"md",children:u.map(e=>{const{description:t,disabled:n,heading:i,id:o,onChange:r,switched:a}=e;return Object(l.jsx)(b,{description:t,disabled:n,heading:i,id:o,onChange:r,switched:a},o)})})}}var v=Object(h.connect)((e,t)=>({board:e.boards&&e.boards.content[t.boardId]}),e=>({updateBoard:t=>e(Object(g.n)(t))}))(j),O=n("EwHv"),x=n("v/Q4"),y=n("EC67");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class w extends i.Component{constructor(...e){super(...e),_(this,"state",{contentRef:null,currentModal:null,scrollContainer:null,scrollTop:null}),_(this,"handleBoardLeave",()=>{const{history:e,viewer:t}=this.props,n=t.isAuth?"/"+t.username:"/";e.replace(n)}),_(this,"handleContentRef",e=>{const{contentRef:t}=this.state;!t&&e&&(this.setState({contentRef:e}),e.focus())}),_(this,"handleScrollContainer",e=>{const{scrollContainer:t}=this.state;!t&&e&&this.setState({scrollContainer:e})}),_(this,"handleScroll",()=>{const{scrollContainer:e}=this.state;e&&this.setState({scrollTop:e.scrollTop})}),_(this,"handleConfirmationModalOpen",()=>this.setState({currentModal:"confirmation"})),_(this,"handleSettingsModalOpen",()=>this.setState({currentModal:"settings"})),_(this,"handleCloseModal",()=>this.setState({currentModal:null})),_(this,"renderCurrentModal",()=>{const{board:{id:e,owner:t},viewer:n}=this.props,{currentModal:i}=this.state,o=n.isAuth&&n.username===t.username;switch(i){case"settings":return Object(l.jsx)(v,{boardId:e,isViewerOwner:o,onDismiss:this.handleCloseModal});default:return null}})}renderInvite(e,t,n){const i={invite:e,onBoardLeave:t,onInviteDidUpdate:n,useGestaltModal:!0,isDim:!1};return Object(l.jsx)(o.a,{...i})}render(){const{anchor:e,board:t,onDismiss:n}=this.props,{currentModal:o,scrollContainer:r,scrollTop:s}=this.state,c=r?{container:r,top:s||0}:null,h=(t.access||[]).includes("write");return Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)(d.z,{children:Object(l.jsx)(d.f,{dangerouslySetInlineStyle:{__style:{zIndex:1}},position:"absolute",top:!0,children:Object(l.jsx)(d.J,{anchor:e,onDismiss:o?()=>{}:n,idealDirection:"down",size:"xl",positionRelativeToAnchor:!1,children:Object(l.jsxs)(d.f,{width:"100%",maxHeight:500,minWidth:360,display:"flex",direction:"column",children:[Object(l.jsx)(d.U,{top:0,children:Object(l.jsxs)(d.f,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",height:64,paddingX:4,paddingY:4,children:[Object(l.jsx)("div",{ref:this.handleContentRef,tabIndex:"0",children:Object(l.jsx)(d.ab,{size:"lg",weight:"bold",children:a.a._("Group members","boardCollabFlyout.header","Heading for the group members flyout")})}),h&&Object(l.jsx)(d.f,{right:!0,top:!0,position:"absolute",marginTop:2,marginEnd:2,children:Object(l.jsx)(d.w,{accessibilityLabel:a.a._("Group board settings","boardCollabFlyout.settings.button","Icon for accessing settings on a group board"),icon:"cog",size:"lg",iconColor:"darkGray",onClick:this.handleSettingsModalOpen})})]})}),Object(l.jsx)(d.f,{overflow:"scrollY",children:Object(l.jsx)("div",{onScroll:this.handleScroll,ref:this.handleScrollContainer,children:h?Object(l.jsx)(O.a,{board:t,scrollInfo:c,onBoardLeave:this.handleBoardLeave,renderInvite:this.renderInvite,onModalOpen:this.handleConfirmationModalOpen}):Object(l.jsx)(u,{board:t,scrollInfo:c})})})]})})})}),this.renderCurrentModal()]})}}function C(e){const t=Object(x.a)(),n=Object(y.h)();return Object(l.jsx)(w,{...e,history:n,viewer:t})}},"0G5S":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));const i=(e,t=null)=>{try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||t}catch(n){return console.error("Cannot access localStorage."),t}},o=e=>{try{if("undefined"==typeof window)return;window.localStorage.removeItem(e)}catch(t){console.error("Cannot access localStorage.")}},r=(e,t)=>{try{if("undefined"==typeof window)return;window.localStorage.setItem(e,t)}catch(n){console.error("Cannot access localStorage.")}}},"0NP8":function(e,t,n){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n("Ye/N"),o=n("oRao"),r=n("n6mq"),a=n("nKUr");const s=({bold:e=!1,count:t,shortform:n=!1,size:i="md",text:s})=>Object(a.jsx)(r.f,{children:Object(a.jsxs)(r.ab,{align:"center",size:i,color:"darkGray",weight:e?"bold":"normal",children:[Object(a.jsx)(o.a,{value:t,shortform:n})," ",s]})}),c=({bold:e,count:t,onClick:n,shortform:o,size:c})=>Object(a.jsx)(r.f,{children:Object(a.jsx)(r.Z,{onTap:n,children:Object(a.jsx)(s,{bold:e,count:t,shortform:o,size:c,text:i.a.ngettext("follower","followers",t,"label for n follower(s)","label for n follower(s)")})})}),d=({count:e,size:t})=>{const n=i.a.ngettext("Pin","Pins",e,"label for n board section(s)","label for n board section(s)");return Object(a.jsx)(r.f,{children:Object(a.jsxs)(r.ab,{inline:!0,size:t,color:"darkGray",children:[!!e&&Object(a.jsx)(o.a,{value:e})||"0"," ",n]})})}},"0ZL5":function(e,t,n){var i=n("c4Fo"),o=n("6CFY"),r=n("nKUr");t.a=({anchors:e,idealDirection:t,onCompleteByAnchor:n,placementId:a,positionRelativeToAnchor:s,touchToDismiss:c,useMasonryFlyout:d})=>Object(r.jsx)(i.a,{placementId:a,predicate:t=>{const{display_data:n}=t;if(2===(null==n?void 0:n.component_type)){const{anchors_by_platform:t}=n;if(null!=t&&t.web){const{anchor:n,placement:i}=t.web;return i===a&&n in e}}return!1},children:({complete:i,dismiss:a,display_data:l})=>Object(r.jsx)(o.a,{anchors:e,complete:i,dismiss:a,displayData:l,idealDirection:t,onCompleteByAnchor:n,platform:"web",positionRelativeToAnchor:s,touchToDismiss:c,useMasonryFlyout:d})})},"0rqB":function(e,t,n){n.d(t,"a",(function(){return l}));var i=n("q1tI"),o=n("clxp"),r=n("n6mq"),a=n("nKUr");function s({children:e,group:t,isEligible:n,name:i,performsActivate:o}){let s=o?"#0f0":"#00f";return n||(s="#999"),Object(a.jsxs)(r.f,{position:"relative",children:[e,Object(a.jsx)(r.f,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 2px 2px "+s,borderRadius:5}}}),Object(a.jsxs)(r.f,{position:"absolute",top:!0,left:!0,color:"lightGray",children:[i,": ",t]})]})}var c=n("NVsV");const d=Object(i.memo)(({activate:e=!0,activateExperiment:t,isEligible:n=!0,name:r,group:c,overrideGroup:d=null,highlighted:l=!1,children:u})=>{Object(i.useEffect)(()=>{e&&n&&t&&t(r)},[]);const h=()=>"string"==typeof d?d:c,b=h(),p=`Experiment(${r}:${b})`,f=n&&b&&(b.startsWith("enabled")||b.startsWith("employee"))||!1,g={group:n?b:"",anyEnabled:f,customActivate:n&&!e?()=>n?t(r):"":null};return(t=>{const i=h();return l?Object(a.jsx)(s,{group:i,isEligible:n,name:r,performsActivate:e,children:t}):t})(Object(a.jsx)(o.a,{name:p,children:u(g)}))});function l(e){const{name:t}=e,{debuggingEnabled:n,overriddenExperiments:o,highlightedExperiment:r,setExperimentVisible:s}=Object(i.useContext)(c.c),l=n&&o&&"string"==typeof o[t]?o[t]:null,u=n&&(r===t||r===c.a);return Object(i.useEffect)(()=>{if(n)return s(t,!0),()=>s(t,!1)},[t,n]),Object(a.jsx)(d,{...e,overrideGroup:l,highlighted:u})}},"0rqM":function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("Ye/N"),o=n("TgLd"),r=n("n6mq"),a=n("nKUr");function s({cancelButtonLabel:e,confirmButtonLabel:t,heading:n,message:s,onCancel:c,onConfirm:d}){const l=n||i.a._("Are you sure?"),u=e||i.a._("Cancel");return Object(a.jsx)(o.b,{accessibilityModalLabel:l,footer:Object(a.jsxs)(r.f,{marginEnd:-1,marginStart:-1,children:[Object(a.jsx)(r.f,{"data-test-id":"cancel-button",padding:1,children:Object(a.jsx)(r.g,{onClick:c,size:"lg",text:u})}),Object(a.jsx)(r.f,{"data-test-id":"confirm-button",padding:1,children:Object(a.jsx)(r.g,{color:"red",onClick:d,size:"lg",text:t})})]}),heading:l,onDismiss:c,role:"alertdialog",children:Object(a.jsx)(r.f,{padding:4,children:Object(a.jsx)(r.ab,{children:s})})})}},"0yL5":function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("+nTX"),r=n("n6mq"),a=n("E2hd"),s=n("nKUr");function c({bgColor:e,children:t,icon:n,label:c,size:d}){const l=Object(i.useRef)(null),[u,h]=Object(i.useState)(!1),b=()=>h(!1);return Object(s.jsxs)(i.Fragment,{children:[Object(s.jsx)(r.f,{ref:l,children:Object(s.jsx)(a.a,{accessibilityLabel:c,bgColor:e,icon:n,onClick:()=>h(!u),selected:u,size:d})}),u&&Object(s.jsx)(o.a,{anchor:l.current,onDismiss:b,children:t({handleClose:b})})]})}},"1+5i":function(e,t,n){var i=n("w/wX"),o=n("sEf8"),r=n("mdPL"),a=r&&r.isSet,s=a?o(a):i;e.exports=s},"1IOU":function(e,t,n){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e})},"1LK5":function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},"1RGD":function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("Ye/N"),r=n("vvax"),a=n("n6mq"),s=n("nKUr");function c({header:e,onUpdate:t,value:n}){const[c,d]=Object(i.useState)(n?String(Math.floor(Number.parseInt(n,10)/60)):"0"),[l,u]=Object(i.useState)(n?String(Number.parseInt(n,10)%60):"0"),h=(e,n)=>{t(String(Number.parseInt(n,10)+60*Number.parseInt(e,10)))},b=[];for(let i=0;i<=9;i+=1)b.push({value:String(i),label:Object(r.b)(o.a.ngettext("{{ hours }} hour","{{ hours }} hours",i,"storyboard.detailsList.recipe","Option for number of hours a story pin recipe will take"),{hours:i}).join("")});const p=[];for(let i=0;i<60;i+=1)p.push({value:String(i),label:Object(r.b)(o.a.ngettext("{{ minutes }} minute","{{ minutes }} minutes",i,"storyboard.detailsList.recipe","Option for number of minutes a story pin recipe will take"),{minutes:i}).join("")});return Object(s.jsxs)(a.f,{width:"100%",display:"flex",alignItems:"end",children:[Object(s.jsx)(a.f,{width:"50%",marginEnd:2,children:Object(s.jsx)(a.R,{size:"lg",id:"hours",name:"hours",label:e,placeholder:o.a._("Hours","storyboard.detailsList.recipe","Placeholder caption for hours input in story pin recipe cooktime"),value:c,options:b,onChange:({value:e})=>{Number.isNaN(e)||(d(e),h(e,l))}})}),Object(s.jsx)(a.f,{width:"50%",marginStart:2,children:Object(s.jsx)(a.R,{size:"lg",id:"minutes",name:"minutes",placeholder:o.a._("Minutes","storyboard.detailsList.recipe","Placeholder caption for minutes input in story pin recipe cooktime"),value:l,options:p,onChange:({value:e})=>{Number.isNaN(e)||(u(e),h(c,e))}})})]})}},"1YNZ":function(e,t,n){var i=n("q1tI"),o=n("c4Fo"),r=n("M1Uz"),a=n("U4JR"),s=n("nKUr");var c=e=>Object(s.jsx)(o.a,{experienceIds:e.experienceIds,placementId:e.placementId,type:10,children:({complete:t,dismiss:n,display_data:i})=>{const o=i.link||e.linkUrl;return Object(s.jsx)(r.a,{duration:i.duration,href:o,text:i.text,onClick:()=>{t(),e.onClick&&e.onClick(),e.shouldLogClicks&&e.shouldLogClicks&&Object(a.b)(101,{objectId:e.objectId,component:e.thriftComponentType,element:e.thriftElementType})},onHide:()=>{e.onHide(),e.completionOnDismissal?t():n()}})}}),d=n("nGHF");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=2e3;class h extends i.Component{constructor(...e){super(...e),l(this,"componentDidMount",()=>{const{delay:e=u}=this.props;this.experienceToastsTimeout=window.setTimeout(()=>this.triggerEducationToasts(),e)})}componentWillUnmount(){window.clearTimeout(this.experienceToastsTimeout)}triggerEducationToasts(){const{toastManagerContext:e,completionOnDismissal:t,placementId:n,experienceIds:i}=this.props;e.showOneToast(({onHide:e})=>Object(s.jsx)(c,{experienceIds:i,completionOnDismissal:t,onHide:e,placementId:n,shouldLogClicks:!1}))}render(){return null}}l(h,"defaultProps",{completionOnDismissal:!1});t.a=Object(d.c)(h)},"1tpI":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.isDisposed=!1}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e,n&&n.dispose()}t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}},e}();t.SerialDisposable=i},"2K7C":function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("yweb"),o=n("n6mq"),r=n("nKUr");function a(){const e=Object(i.c)();return Object(r.jsx)(o.f,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(r.jsx)(o.T,{accessibilityLabel:e._("Loading editor","EditorWithMentionsFallback.loading","Message shown while waiting for the editor to load"),show:!0})})}},"2S0S":function(e,t,n){e.exports=function(e,t,n,i,o,r,a,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,i,o,r,a,s],l=0;(c=new Error(t.replace(/%s/g,(function(){return d[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},"2WXK":function(e,t,n){var i=n("q1tI");let o=null,r=!1,a=0;const s=()=>{o&&clearTimeout(o),r=!0,o=setTimeout(()=>{r=!1},100)};t.a=()=>{const[e,t]=Object(i.useState)(!1),n=Object(i.useRef)(null);Object(i.useEffect)(()=>(0===a&&window.addEventListener("scroll",s),a+=1,()=>{n.current&&clearTimeout(n.current),a-=1,a||window.removeEventListener("scroll",s)}),[]);const o=e=>{n.current&&clearTimeout(n.current),n.current=e&&r?setTimeout(()=>o(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:Object(i.useRef)({onMouseOver:()=>o(!0),onMouseLeave:()=>o(!1)}).current}}},"2qKt":function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("Y+p1"),a=n.n(r),s=n("Vzit"),c=n("vh5K"),d=n("pLLR"),l=n("ANjH"),u=n("nKUr");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1};t.a=(e,t={},n)=>r=>{const p=function(e){return t=>({experience:t.experiences.eligibleExperiences[e],experiencesMulti:t.experiences.experiencesMulti?t.experiences.experiencesMulti[e]:void 0})}(e);n={...b,...n};const f=function(e,t,n=!0,o=!0,r=!1,d){var l,b;return b=l=class extends i.Component{constructor(e){super(e),h(this,"state",{extraContext:void 0}),h(this,"setExtraContextState",e=>{a()(this.state.extraContext,e)||this.setState({extraContext:e})})}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(n,i){const{dispatch:o,experience:r}=this.props;let c=i.extraContext,d=this.state.extraContext||t||{};"function"==typeof t&&(c=t(n,i.extraContext||{}),d=t(this.props,this.state.extraContext||{})),d&&Object.keys(d).length>0&&!a()(c,d)&&o(Object(s.c)(e,d)),!r||n.experience&&r.id===n.experience.id||o(Object(s.k)(e,d))}componentWillUnmount(){const{dispatch:t}=this.props;t(Object(s.m)(e))}dispatchPlacementMount(){const{dispatch:n}=this.props,i="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},o=r&&null!=i&&i.advertiser_id?{advertiserId:i.advertiser_id}:void 0;n(Object(s.l)(e,i,o))}render(){const{experience:e,experiencesMulti:t}=this.props,n={[r?"advertiserExperience":"experience"]:Object(c.e)(e)?e:null};return Object(u.jsx)(d,{...this.props,setPlacementExtraContext:this.setExtraContextState,...n,experiencesMulti:t})}},h(l,"displayName",`withPlacement(${d.displayName||d.name||"Component"})`),b}(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,n.isAdvertiserPlacement,r);return Object(l.compose)(d.e,Object(o.connect)(p))(f)}},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"3h4M":function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const i=[];function o(e){let t;try{t=JSON.stringify({errorObj:e})}catch(a){t=JSON.stringify({errorObj:{message:e.message,name:"logToServer stringify exception"}})}const n=(o={report_context:JSON.stringify({current_url:window.location.href,client_version:"c6244d7"}),report_data:t},Object.keys(o).map(e=>e+"="+encodeURIComponent(o[e])).join("&"));var o;const r=window.btoa(n);if(-1===i.indexOf(r)){const e=new XMLHttpRequest;e.open("post","/_/_/report/error/",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.setRequestHeader("X-CSRFToken",function(e){const t=("; "+document.cookie).split("; "+e+"=");return 2===t.length?t.pop().split(";").shift():""}("csrftoken")),e.send(n),i.push(r)}i.length>100&&i.shift()}function r(){window.addEventListener("error",e=>{const t=e.error||{};o({name:t.name,message:t.message||e.message,stack:t.stack,filename:e.filename,line:e.lineno,column:e.colno})}),window.addEventListener("unhandledrejection",e=>{var t,n,i,r,a;if(!((null==e?void 0:e.reason)instanceof Error))return;const{reason:s}=e,c="string"==typeof(null==s?void 0:s.message)?s.message:String(s);o({name:null!==(t=null==s?void 0:s.name)&&void 0!==t?t:"unhandledrejection",message:c,message_detail:null==s?void 0:s.message_detail,original_message:null==s?void 0:s.original_message,stack:null==s?void 0:s.stack,filename:null==s?void 0:s.fileName,line:null!==(n=null!==(i=null==s?void 0:s.lineno)&&void 0!==i?i:null==s?void 0:s.line)&&void 0!==n?n:null==s?void 0:s.lineNumber,column:null!==(r=null!==(a=null==s?void 0:s.column)&&void 0!==a?a:null==s?void 0:s.colno)&&void 0!==r?r:null==s?void 0:s.columnNumber})})}},"3j7w":function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("q1tI");class o extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i=()=>{const{isAtEnd:e,isFetching:t,fetchMore:n,scrollBuffer:i,scrollHeight:o,scrollTop:r}=this.props;e||t||r+i>o&&n()},(n="check")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},"3oMh":function(e,t,n){n.d(t,"a",(function(){return l}));var i=n("q1tI"),o=n("Ye/N"),r=n("fevN"),a=n("oVol"),s=n("n6mq"),c=n("nKUr");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(...e){super(...e),d(this,"state",{flyoutOpen:!1}),d(this,"toggleFlyout",()=>{this.state.flyoutOpen||this.props.onOpen(),this.setState(e=>({flyoutOpen:!e.flyoutOpen}))})}render(){const{board:e,bgColor:t="white",children:n,iconColor:d="gray",onCreatePincode:l}=this.props,{flyoutOpen:u}=this.state,h={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:a.a.BOARD,url:e.url},b=n&&n({active:u,onClick:this.toggleFlyout})||Object(c.jsx)(s.w,{accessibilityLabel:o.a._("Send Board","Accessible label for button to send board","Accessible label for button to send board"),onClick:this.toggleFlyout,icon:"share",size:"lg",bgColor:t,iconColor:d});return Object(c.jsxs)(i.Fragment,{children:[Object(c.jsx)(s.f,{ref:e=>{this.anchor=e},children:b}),this.state.flyoutOpen&&Object(c.jsx)(s.z,{children:Object(c.jsx)(s.J,{anchor:this.anchor,idealDirection:"down",onDismiss:this.toggleFlyout,size:"xl",positionRelativeToAnchor:!1,children:Object(c.jsx)(r.a,{classNames:"SendBoard",isFlyout:!0,onCreatePincodeClick:l?()=>{this.toggleFlyout(),l()}:void 0,onHide:this.toggleFlyout,sendType:a.a.BOARD,sharedObject:h})})})]})}}},"3qQZ":function(e,t,n){},"3z7j":function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("Wer7");function o(e,t){return n=>n(Object(i.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}},"4/ic":function(e,t,n){var i=n("ZWtO");e.exports=function(e){return function(t){return i(t,e)}}},"44Ds":function(e,t,n){var i=n("e4Nc");function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var a=e.apply(this,i);return n.cache=r.set(o,a)||r,a};return n.cache=new(o.Cache||i),n}o.Cache=i,e.exports=o},"493B":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("Gytx"),o=n("q1tI");t.useCollector=function(e,t,n){var r=o.useState((function(){return t(e)})),a=r[0],s=r[1],c=o.useCallback((function(){var o=t(e);i(a,o)||(s(o),n&&n())}),[a,e,n]);return[a,c]}},"4TDQ":function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("3z7j"),o=n("Pqnw"),r=n("eOdZ"),a=n("KFEb"),s=n("Wer7"),c=n("Pv/+");function d(e,t,n){return d=>r.a.create("BoardSectionsMergeResource",{source_section_id:t,target_section_id:n}).callUpdate({showError:!1}).then(r=>Promise.all([d(Object(c.b)(e,t)),d(Object(s.f)("BoardSectionsRepinResource",{board_id:e})),d(Object(i.a)(n)),d(Object(o.a)(a.a.SECTION_PINS,n))]).then(()=>r))}},"4jWr":function(e,t,n){n.d(t,"a",(function(){return i}));const i=200;t.b=(e,t)=>({marginTop:10,opacity:0,position:"relative",transform:"translateY(200px)",transition:"opacity 0.1s ease-in-out",visibility:"hidden",...e?{opacity:1,transform:"translateY(0)",transition:"all 0.7s cubic-bezier(.19, 1.15, .48, 1)",visibility:"visible"}:{},...e&&t?{opacity:0,transform:"scale(1.1)",transition:"opacity transform 0.2s"}:{}})},"4uTw":function(e,t,n){var i=n("Z0cm"),o=n("9ggG"),r=n("GNiM"),a=n("dt0z");e.exports=function(e,t){return i(e)?e:o(e,t)?[e]:r(a(e))}},"4vzw":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=n.getRegistry(),o=i.addSource(e,t);return[o,function(){return i.removeSource(o)}]}},"54t5":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("fOPN"),o=n("HNpt"),r=n("U4W0"),a=n("uCRx"),s=n("QLaP"),c=n("IEa/");function d(e){switch(e[0]){case"S":return r.HandlerRole.SOURCE;case"T":return r.HandlerRole.TARGET;default:s(!1,"Cannot parse handler ID: "+e)}}function l(e,t){var n=e.entries(),i=!1;do{var o=n.next(),r=o.done;if(o.value[1]===t)return!0;i=r}while(!i);return!1}var u=function(){function e(e){this.store=e,this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null}return e.prototype.addSource=function(e,t){a.validateType(e),a.validateSourceContract(t);var n=this.addHandler(r.HandlerRole.SOURCE,e,t);return this.store.dispatch(i.addSource(n)),n},e.prototype.addTarget=function(e,t){a.validateType(e,!0),a.validateTargetContract(t);var n=this.addHandler(r.HandlerRole.TARGET,e,t);return this.store.dispatch(i.addTarget(n)),n},e.prototype.containsHandler=function(e){return l(this.dragSources,e)||l(this.dropTargets,e)},e.prototype.getSource=function(e,t){return void 0===t&&(t=!1),s(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)},e.prototype.getTarget=function(e){return s(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)},e.prototype.getSourceType=function(e){return s(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)},e.prototype.getTargetType=function(e){return s(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)},e.prototype.isSourceId=function(e){return d(e)===r.HandlerRole.SOURCE},e.prototype.isTargetId=function(e){return d(e)===r.HandlerRole.TARGET},e.prototype.removeSource=function(e){var t=this;s(this.getSource(e),"Expected an existing source."),this.store.dispatch(i.removeSource(e)),c((function(){t.dragSources.delete(e),t.types.delete(e)}))},e.prototype.removeTarget=function(e){s(this.getTarget(e),"Expected an existing target."),this.store.dispatch(i.removeTarget(e)),this.dropTargets.delete(e),this.types.delete(e)},e.prototype.pinSource=function(e){var t=this.getSource(e);s(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t},e.prototype.unpinSource=function(){s(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null},e.prototype.addHandler=function(e,t,n){var i=function(e){var t=o.default().toString();switch(e){case r.HandlerRole.SOURCE:return"S"+t;case r.HandlerRole.TARGET:return"T"+t;default:throw new Error("Unknown Handler Role: "+e)}}(e);return this.types.set(i,t),e===r.HandlerRole.SOURCE?this.dragSources.set(i,n):e===r.HandlerRole.TARGET&&this.dropTargets.set(i,n),i},e}();t.default=u},"5ARb":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("MCs0"),o=(n("QWfI"),n("2S0S")),r=["canDrag","beginDrag","isDragging","endDrag"],a=["beginDrag"],s=function(){function e(e,t,n){var i=this;this.spec=e,this.monitor=t,this.ref=n,this.props=null,this.beginDrag=function(){if(i.props)return i.spec.beginDrag(i.props,i.monitor,i.ref.current)}}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.canDrag=function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))},e.prototype.isDragging=function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())},e.prototype.endDrag=function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,i.getDecoratedComponent(this.ref))},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(r.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',r.join(", "),t),o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),a.forEach((function(t){o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),function(t,n){return new s(e,t,n)}}},"5Ai/":function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("1inl"),a=n("ajUs"),s=n("Ye/N"),c=n("uVIr"),d=n("qnp8"),l=n("eOdZ"),u=n("M1Uz"),h=n("Sbkd"),b=n("Wrea"),p=n("KFEb"),f=n("x12c"),g=n("vvax"),m=n("6G9P"),j=n("NjDU"),v=n("QAzJ"),O=n("nGHF"),x=n("oN2T"),y=n("e0nq"),_=n("EC67"),w=n("nKUr");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends i.PureComponent{constructor(...e){super(...e),C(this,"state",{step:"unsaved"}),C(this,"deletePin",e=>l.a.create("PinResource",{id:e}).callDelete()),C(this,"repin",()=>{const{location:e,pin:t,target:{board:n,boardSection:i},eventContext:o,previousHistory:r}=this.props,s=Object(a.a)(t,e,r)||(t.tracking_params||"")+"-0",c=!t.id&&t.image_url?Object(m.b)(t.image_url,t.link):"",d=i&&i.id,u={board_id:n.id||"",clientTrackingParams:s,description:t.description||"",image_base64:t.image_base64,link:t.link,image_url:c,is_buyable_pin:!1,is_removable:t.promoted_is_removable,media_upload_id:t.media_upload_id,pin_id:t.id||"",section:d,title:t.title||"",eventContext:o};return l.a.create("RepinResource",u).callCreate({showError:!1})}),C(this,"handleSave",()=>{const{onSave:e,makeCancelablePromise:t}=this.props,{step:n}=this.state;if("unsaving"===n)return void this.setState({step:"saving"});this.setState({step:"saving"});t(this.repin().then(({resource_response:{data:e}})=>this.shouldCompleteSave(e))).then(e).catch(({isCanceled:e})=>{if(!e){const{target:{board:e,boardSection:t}}=this.props;r.a.showError(t?Object(g.b)(s.a._("Failed to save the Pin to {{sectionName}}","Error message when failed to save to a section within a board","Error message when failed to save to a section within a board"),{sectionName:t.title}).join(""):Object(g.b)(s.a._("Failed to save the Pin to {{boardName}}","Error message when failed to save to a board","Error message when failed to save to a board"),{boardName:e.name}).join(""))}})}),C(this,"shouldCompleteSave",e=>{const{pin:t,dispatch:n,shouldUseLegoStyles:i,showToast:o,target:{board:r,boardSection:a}}=this.props,{step:s}=this.state,l=a&&a.id,u={pinId:t.id,boardId:r.id,sectionId:l,title:t.title||""};if("saving"===s){f.b.publish("currentUser","pinCreated",e),f.b.publish(e.board.id,"pinCreated",{pin:e}),n(Object(x.d)(r)),n(Object(c.a)({feedId:l||r.id,feedType:l?p.a.SECTION_PINS:p.a.BOARD_PINS,itemIds:[t.id],itemType:"pin"}));const{image_url:s,images:h}=t,g=s||(null==h?void 0:h["236x"])&&h["236x"].url||"";return!a&&r.image_cover_url||(r.image_cover_url=g,n(Object(x.e)({},r))),n(Object(y.a)({...u,localPinId:e.id})),n(Object(b.d)({boardId:r.id,sectionId:a?a.id:void 0,increment:1})),n(Object(j.c)({userId:e.pinner.id,increment:1})),this.setState({step:"saved"}),i&&o(({onHide:e})=>Object(w.jsx)(d.a,{pinImageUrl:g,boardName:r.name,boardUrl:r.url,onHide:e,onUndo:this.handleUnsave})),e}"unsaving"===s&&this.handleUnsave(e.id)}),C(this,"handleUnsave",e=>{const{step:t}=this.state,{savedInfo:n}=this.props;if("unsaved"===t)return;if("saving"===t)return void this.setState({step:"unsaving"});const i=n&&n.localPinId||e;i&&(this.setState({step:"unsaving"}),this.deletePin(i).then(()=>this.shouldCompleteUnsave(i)))}),C(this,"shouldCompleteUnsave",e=>{const{pin:t,savedInfo:n,shouldUseLegoStyles:i,showToast:o,target:{board:r,boardSection:a},dispatch:c,onDelete:d,viewerId:l}=this.props,{step:h}=this.state;"unsaving"===h&&(n&&(c(Object(y.d)({pinId:t.id})),c(Object(b.d)({boardId:r.id,sectionId:a?a.id:void 0,increment:-1})),c(Object(j.c)({userId:l,increment:-1})),f.b.publish(r.id,"pinDeleted",e),f.b.publish(e,"pinDeleted"),d&&d()),i&&o(({onHide:e})=>Object(w.jsx)(u.a,{onHide:e,text:s.a._("Pin deleted","OneTapSavePinWrapper.Unsave","Pin delete completion confirmation")})),this.setState({step:"unsaved"})),"saving"===h&&this.handleSave()})}render(){const{children:e,savedInfo:t}=this.props,{step:n}=this.state;return e({save:this.handleSave,saved:"saved"===n||"saving"===n||!(!t||!t.localPinId),savedInfo:t,unsave:this.handleUnsave})}}t.a=Object(o.connect)((e,{pin:{id:t}})=>({previousHistory:e.history.previous,savedInfo:e.pins[t]&&e.pins[t].savedInfo,viewerId:e.viewer.id}))((function(e){const t=Object(v.b)("web_lego_save_flow")().anyEnabled,{showToast:n}=Object(O.b)(),i=Object(h.a)(),o=Object(_.i)();return Object(w.jsx)(S,{...e,location:o,makeCancelablePromise:i,shouldUseLegoStyles:t,showToast:n})}))},"5MXd":function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return h}));var i=n("q1tI"),o=n("1dBE"),r=n("nKUr");const a=660,s={educationId:null,paddingRight:0,zIndex:a};function c(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":const{educationId:n}=t.payload;return{...e,educationId:n};case"FOOTER_SET_PADDING_RIGHT":const{paddingRight:i}=t.payload;return{...e,paddingRight:i};case"FOOTER_SET_Z_INDEX":const{zIndex:o}=t.payload;return{...e,zIndex:o};default:return e}}const{Provider:d,Consumer:l,useHook:u,HOC:h}=Object(o.a)("footerContext");function b({children:e}){const[t,n]=Object(i.useReducer)(c,s);return Object(r.jsx)(d,{value:{...t,setEducationId:e=>n({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}}),setPaddingRight:e=>n({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}}),setZIndex:e=>n({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}})},children:e})}},"5S2N":function(e,t,n){n.d(t,"c",(function(){return Se})),n.d(t,"b",(function(){return Te}));var i=n("q1tI"),o=n("/MKj"),r=n("9WJf"),a=n("BkRI"),s=n.n(a),c=n("/mzO"),d=n("JW66"),l=n("eOdZ"),u=n("5FNA"),h=n("Wer7");var b=n("Sihc"),p=n("Y+p1"),f=n.n(p),g=n("Ye/N"),m=n("TgLd"),j=n("GBVV"),v=n("4cpq"),O=n("M1Uz"),x=n("nGHF"),y=n("n6mq"),_=n("nKUr");function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C extends i.PureComponent{constructor(...e){super(...e),w(this,"state",{deleting:!1}),w(this,"unmounted",!1),w(this,"handleConfirm",()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then(()=>this.handleDeleteDidComplete()).catch(e=>this.handleDeleteDidComplete(e))}),w(this,"handleDeleteDidComplete",e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast(({onHide:e})=>Object(_.jsx)(O.a,{onHide:e,text:g.a._("Pin deleted!","User deleted their pin","User deleted their pin")}))})}componentWillUnmount(){this.unmounted=!0}render(){const{onDismiss:e}=this.props,{deleting:t}=this.state;return Object(_.jsx)(m.b,{heading:g.a._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:g.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:Object(_.jsxs)(y.f,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[Object(_.jsx)(y.f,{paddingX:1,children:Object(_.jsx)(y.g,{onClick:e,text:g.a._("Cancel")})}),Object(_.jsx)(y.f,{paddingX:1,children:Object(_.jsx)(v.a,{id:"confirm-delete-pin",children:Object(_.jsx)(j.b,{color:"red",onClick:this.handleConfirm,text:g.a._("Delete Pin"),submitting:t})})})]}),children:Object(_.jsx)(y.f,{padding:4,children:Object(_.jsx)(y.ab,{children:g.a._("Once you delete a Pin, you can't undo it!")})})})}}const S=Object(x.c)(C);S.displayName="DeletePinConfirmation";var I=S;function T({canEdit:e,onAltTextChange:t,altText:n}){return Object(_.jsxs)(i.Fragment,{children:[Object(_.jsx)(y.p,{}),Object(_.jsxs)(y.f,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(_.jsx)(y.f,{column:12,mdColumn:3,paddingY:2,children:Object(_.jsx)(y.y,{htmlFor:"AltTextField",children:Object(_.jsx)(y.ab,{size:"md",children:g.a._("Alt text","EditPinModal.EditAltText","Label for editing alt text of pin")})})}),Object(_.jsx)(y.f,{column:12,mdColumn:8,children:e?Object(_.jsxs)(i.Fragment,{children:[Object(_.jsx)(y.f,{children:Object(_.jsx)(y.cb,{id:"AltTextField",onChange:({value:e})=>t({value:e.slice(0,500)}),size:"lg",value:n||""})}),Object(_.jsx)(y.f,{justifyContent:"center",children:Object(_.jsx)(y.y,{htmlFor:"AltTextField",children:Object(_.jsx)(y.f,{marginTop:1,children:Object(_.jsx)(y.ab,{size:"md",color:"gray",children:g.a._("This helps people using screen readers understand what your Pin is about.","EditPinModal.EditAltText","Label for editing alt text of pin")})})})})]}):Object(_.jsx)(y.f,{column:12,mdColumn:8,paddingY:2,children:Object(_.jsx)(y.ab,{size:"md",weight:"bold",children:n})})})]})]})}var E=n("V711"),P=n("wm0H"),D=n("QAzJ");function B({board:e={},canEdit:t,onBoardChange:n,onBoardCreate:i}){const{anyEnabled:o}=Object(D.d)("web_boardless_pins"),{showEnabledSaveBehavior:r}=Object(P.a)(),a="quick_saves"===e.layout&&(o||r);return Object(_.jsxs)(y.f,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(_.jsx)(y.f,{column:12,mdColumn:3,paddingY:2,children:Object(_.jsx)(y.y,{htmlFor:"BoardPicker",children:Object(_.jsx)(y.ab,{size:"md",children:g.a._("Board")})})}),t?Object(_.jsx)(y.f,{column:12,mdColumn:8,children:Object(_.jsx)(E.a,{board:e,id:"BoardPicker",isBoardlessPinsBoard:a,onBoardChosen:n,onBoardCreate:i})}):e.name&&Object(_.jsx)(y.f,{column:12,mdColumn:8,paddingY:2,children:Object(_.jsx)(y.ab,{size:"md",weight:"bold",children:e.name})})]})}var k=n("TSYQ"),M=n.n(k),R=n("JKZO"),A=n("Q7uW"),L=n("U4JR");function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class F extends i.Component{constructor(...e){super(...e),N(this,"state",{focused:!1}),N(this,"suggestionAnchorRef",Object(i.createRef)()),N(this,"setRef",e=>this.textAreaRef=e),N(this,"handleBlur",e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)}),N(this,"handleFocus",e=>{this.setState({focused:!0});const{onFocus:t}=this.props;t&&t(e)}),N(this,"handleChange",({text:e,mentions:t})=>{this.props.onDescriptionChange({value:e,userMentionTags:t})})}render(){const{canAddUserMentionTags:e,canEdit:t,description:n,errorMessage:o,initialMentions:r,label:a,placeholder:s,onDescriptionChange:c}=this.props,{focused:d}=this.state;return Object(_.jsxs)(i.Fragment,{children:[Object(_.jsx)(y.p,{}),Object(_.jsxs)(y.f,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(_.jsx)(y.f,{column:12,mdColumn:3,paddingY:2,children:Object(_.jsx)(y.y,{htmlFor:"DescriptionField",children:Object(_.jsx)(y.ab,{size:"md",children:a})})}),t?Object(_.jsxs)(y.f,{column:12,mdColumn:8,children:[Object(_.jsx)(y.f,{children:e?Object(_.jsx)("div",{className:M()("DescriptionField",{DescriptionField__error:!!o,DescriptionField__focus:d}),id:"DescriptionField",ref:this.suggestionAnchorRef,role:"textbox",children:Object(_.jsx)(R.a,{initialMentions:r,initialText:n,onAddMention:()=>{Object(L.b)(8905,{element:116,tag_type:1})},onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{Object(L.b)(8908,{element:116,tag_type:1})},onSuggestionsPopoverOpen:()=>{Object(L.b)(8907,{element:116,tag_type:1})},maxSuggestions:4,placeholder:s})}):Object(_.jsx)(y.bb,{id:"DescriptionField",placeholder:s,value:n,onChange:({value:e})=>{c({value:e,userMentionTags:[]})},hasError:(o||"").length>0})}),!!o&&Object(_.jsx)(y.f,{justifyContent:"center",children:Object(_.jsx)(A.a,{errorMessage:o,htmlFor:"pin-edit-description"})})]}):Object(_.jsx)(y.f,{column:12,mdColumn:8,paddingY:2,children:Object(_.jsx)(y.ab,{size:"md",weight:"bold",children:n})})]})]})}}var U=F,H=n("VJm5"),z=n("rSLd"),q=n("xOLo");function G({isCarousel:e,onMouseEnter:t,onMouseLeave:n,shouldShowCarouselSliders:i,onCarouselSlide:o,currentIndex:r,carouselData:a,pinId:s,description:c,image:d={}}){return Object(_.jsxs)(y.f,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column",children:[e&&(()=>{const e=a&&a.carousel_slots&&a.carousel_slots.length||1;return e>=2&&Object(_.jsx)(y.f,{direction:"row",padding:2,children:Object(_.jsx)(y.y,{htmlFor:"CardsIndex",children:Object(_.jsxs)(y.ab,{size:"md",children:[r+1,"/",e]})})})})(),Object(_.jsx)(y.C,{width:236,children:Object(_.jsxs)(y.f,{onMouseEnter:t,onMouseLeave:n,children:[Object(_.jsxs)(y.C,{rounding:2,wash:!0,children:[e&&i&&Object(_.jsx)(y.f,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}},children:Object(_.jsx)(q.default,{handleCarouselSwipe:o,carouselIndex:r,carouselData:a,pinId:s,isEditMode:!0})}),e?Object(_.jsx)(H.a,{carouselIndex:r,isCloseup:!1,carouselData:a,pinId:s,isEditMode:!0}):Object(_.jsx)(y.x,{alt:c,color:"#efefef",naturalHeight:d.height,src:d.url,naturalWidth:d.width})]}),e&&Object(_.jsx)(z.default,{carouselIndex:r,carouselData:a,pinId:s,handleCarouselSwipe:o,isEditMode:!0,variant:"legacy"})]})})]})}function W({apiErrorMessage:e,shouldShowGenericUpdateError:t,onClickDeleteButton:n,disableDelete:i,onHide:o,shouldDisableSave:r,triggerBoardAndSectionCreate:a}){return Object(_.jsxs)(y.f,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1,children:[Object(_.jsx)(v.a,{id:"delete-pin-button",children:Object(_.jsx)(y.g,{text:g.a._("Delete","EditPinModal.EditPinFooter.Delete","delete pin"),onClick:n,disabled:i})}),t&&Object(_.jsx)(y.f,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center",children:Object(_.jsx)(A.a,{errorMessage:e||g.a._("Sorry! There was an error editing your Pin.","EditPinModal.EditPinFooter.ErrorMessageToast","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})}),Object(_.jsxs)(y.f,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2,children:[Object(_.jsx)(y.f,{paddingX:2,children:Object(_.jsx)(y.g,{text:g.a._("Cancel","EditPinModal.EditPinFooter.Cancel","cancel changes"),onClick:o})}),Object(_.jsx)(y.f,{paddingX:2,"data-test-id":"edit-pin-save",children:Object(_.jsx)(y.g,{text:g.a._("Save","EditPinModal.EditPinFooter.Save","save changes"),color:"red",onClick:a,disabled:r})})]})]})}function Y({pinNoteText:e,isCollaborative:t,onPinNoteChange:n}){return Object(_.jsxs)(i.Fragment,{children:[Object(_.jsx)(y.p,{}),Object(_.jsxs)(y.f,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(_.jsx)(y.f,{column:12,mdColumn:3,paddingY:2,children:Object(_.jsx)(y.y,{htmlFor:"PinNoteField",children:Object(_.jsx)(y.ab,{size:"md",children:t?g.a._("Note to group","editPinModal.editPinNote.groupTitle","Label for editing private note on group Pin"):g.a._("Note to self","editPinModal.editPinNote.title","Label for editing private note on Pin")})})}),Object(_.jsx)(y.f,{column:12,mdColumn:8,paddingY:2,children:Object(_.jsx)(y.bb,{errorMessage:e.length>=500?g.a._("Character limit reached","editPinModal.editPinNote.warningText","Text to inform user they have reached the length limit on Pin note"):void 0,id:"PinNoteField",onChange:n,placeholder:g.a._("Add a private note to remember your ideas about this Pin","editPinModal.editPinNote.placeholderText","Placeholder for editing private note"),value:e})})]})]})}var K=n("NXrh");function V({board:e,canEdit:t,currentSection:n,onSectionChange:i,onSectionCreate:o,sectionId:r,sectionName:a}){const s=null!=e&&e.id?K.b:K.a;return Object(_.jsxs)(y.f,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(_.jsx)(y.f,{column:12,mdColumn:3,paddingY:3,children:Object(_.jsx)(y.y,{htmlFor:"SectionPicker",children:Object(_.jsx)(y.ab,{size:"md",children:g.a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")})})}),t&&e?Object(_.jsx)(y.f,{column:12,mdColumn:8,children:Object(_.jsx)(s,{board:e,onSectionChange:i,selectedSectionId:r,selectedSectionName:a,onSectionCreate:o})}):Object(_.jsx)(y.f,{column:12,mdColumn:8,paddingY:2,children:Object(_.jsx)(y.ab,{size:"md",weight:"bold",children:n&&!(e||{}).is_collaborative?n.title:g.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")})})]})}var X=n("VBRM"),Z=n("8Enz"),Q=n("kT2/"),J=n("6HHy"),$=n("1RGD");function ee({keyValueBlocks:e,listBlocks:t,onUpdateKeyValueBlock:n,onUpdateListBlocks:o,templateType:r}){return Object(_.jsxs)(y.f,{children:[1===r&&Object(_.jsxs)(i.Fragment,{children:[Object(_.jsxs)(y.f,{paddingY:2,children:[Object(_.jsx)(y.ab,{size:"md",children:g.a._("Cook time","editModal.editStoryPinModal.details.cookTime","Label for cook time detail")}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)($.a,{onUpdate:e=>n(0,e),value:e[0]||null})})]},"cooktime"),Object(_.jsxs)(y.f,{paddingY:2,children:[Object(_.jsx)(y.ab,{size:"md",children:g.a._("Servings","editModal.editStoryPinModal.details.servings","Label for serving size detail")}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)(J.a,{showLabel:!1,onUpdate:e=>n(1,e),value:e[1]||null})})]},"servingSize")]}),2===r&&Object(_.jsxs)(y.f,{paddingY:2,children:[Object(_.jsx)(y.ab,{size:"md",children:g.a._("Difficulty","editModal.editStoryPinModal.details.difficulty","Label for difficulty level detail")}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)(Z.a,{showLabel:!1,onUpdate:e=>n(2,e),value:e[2]||null})})]},"difficulty"),Object(_.jsxs)(y.f,{paddingY:2,children:[Object(_.jsx)(y.ab,{size:"md",children:(()=>{switch(r){case 1:return g.a._("Ingredients","editModal.editStoryPinModal.listHeading","Heading for an ingredients list");case 2:return g.a._("Supplies","editModal.editStoryPinModal.listHeading","Heading for a supplies list");default:return g.a._("What they'll need","editModal.editStoryPinModal.listHeading","Heading for a generic list")}})()}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)(Q.a,{listBlocks:t,onUpdate:o})})]})]})}var te=n("ESls"),ne=n("Joxa");var ie=n("vvax"),oe=n("MNxV");var re=Object(o.connect)(()=>({}),e=>({completeResourceFetch:t=>e(Object(h.b)("PinResource",{field_set_key:"detailed",id:t.id},t)),invalidatePin:t=>e(Object(h.f)("PinResource",{field_set_key:"detailed",id:t}))}))((function({apiErrorMessage:e,board:t,completeResourceFetch:n,commentsDisabled:o,description:r,disableDelete:a,invalidatePin:s,isLoadingPin:d,isProcessing:u,onChangeBoard:h,onChangeComment:b,onChangeSection:p,onClickBoardCreate:f,onClickDeleteButton:j,onClickEditPages:v,onClickSectionCreate:O,onHide:x,pinResource:w,sectionId:C,sectionName:S,title:I,triggerBoardAndSectionCreate:T}){var P,B;const k=null!==(P=w.data)&&void 0!==P?P:{},M=k.story_pin_data,R=null!==(B=k.images&&k.images["474x"])&&void 0!==B?B:{},[L,N]=Object(i.useState)(!1),[F,U]=Object(i.useState)(null),[H,z]=Object(i.useState)(!1),[q,G]=Object(i.useState)({}),[W,Y]=Object(i.useState)([]);Object(i.useEffect)(()=>{const e=(null==M?void 0:M.metadata.basics)||null;if(e){const t=Object(ne.b)(e);G(t.keyValueBlocks||{}),Y(t.listBlocks||[])}},[M]),Object(i.useEffect)(()=>{e&&U(e)},[e]);const V=(e,t)=>{G({...q,[e]:t}),N(!0)},Z=e=>{Y(e),N(!0)},{anyEnabled:Q}=Object(D.a)("web_story_pin_edit_deprecation"),{anyEnabled:J}=Object(D.a)("web_sp2s"),$=k.created_at?new Date(k.created_at):null,re=$&&Object(X.a)($,14),ae=!Q&&!!re&&new Date<re,se=W.length>0||Object.keys(q).length>0,ce=J?Object(ie.b)(g.a._("Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Idea Pin is published. Edit the board and engagement settings any time.","editModal.editStoryPinModal.editTimeInformation","Let the user know how the edit settings are limited"),{numDays:14}):Object(ie.b)(g.a._("Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Story Pin is published. Edit the board and engagement settings any time.","editModal.editStoryPinModal.editTimeInformation","Let the user know how the edit settings are limited"),{numDays:14});return Object(_.jsx)(m.b,{accessibilityModalLabel:g.a._("Edit your previously saved pin","editModal.editStoryPinModal.accessibilityLabel","Accessible label for edit previously saved story pin modal"),footer:Object(_.jsxs)(y.f,{display:"flex",justifyContent:"between",children:[Object(_.jsx)(y.f,{"data-test-id":"delete-pin-button",children:Object(_.jsx)(y.g,{color:"white",disabled:a,onClick:j,size:"lg",text:g.a._("Delete","editModal.editStoryPinModal.deleteButton","Delete button for previously saved story pin")})}),!!F&&Object(_.jsx)(y.f,{display:"flex",justifyContent:"center",children:Object(_.jsx)(A.a,{errorMessage:F,htmlFor:"pin-edit-generic-error"})}),Object(_.jsxs)(y.f,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[Object(_.jsx)(y.f,{paddingX:1,children:Object(_.jsx)(y.g,{onClick:x,size:"lg",text:g.a._("Cancel","editModal.editStoryPinModal.cancelButton","Cancel button to not save edits to previously saved story pin")})}),Object(_.jsx)(y.f,{"data-test-id":"edit-pin-save",paddingX:1,children:Object(_.jsx)(y.g,{color:"red",onClick:()=>{if(L&&M){z(!0);const e=Object(ne.c)({keyValueBlocks:q,listBlocks:W}),t=function(e){return{metadata:{basics:e.metadata.basics?Object(ne.a)(e.metadata.basics):void 0,diy_data:e.metadata.diy_data,pin_image_signature:e.metadata.pin_image_signature,pin_title:e.metadata.pin_title,recipe_data:e.metadata.recipe_data,template_type:e.metadata.template_type},pages:(t=e.pages,t.map(e=>{var t;const n=e.blocks.map(e=>{switch(e.type){case"story_pin_paragraph_block":return{block_style:e.block_style,style:e.style,text:e.text,type:0};case"story_pin_heading_block":return{block_style:e.block_style,level:e.level,style:e.style,text:e.text,type:1};case"story_pin_image_block":return{block_style:e.block_style,image_signature:e.image_signature,tracking_id:e.tracking_id,type:2};case"story_pin_video_block":return{block_style:e.block_style,tracking_id:e.tracking_id,type:3,video_signature:e.video_signature};default:return null}}).filter(Boolean);return n.length>0?{blocks:n,layout:e.layout,style:null!==(t=e.style)&&void 0!==t&&t.background_color?{background_color:e.style.background_color}:void 0}:null}).filter(Boolean))};var t}(M),i={...t,metadata:{...t.metadata,basics:e}},o={pin_id:k.id,story_pin:JSON.stringify(i)};l.a.create("StoryPinEditResource",o).callUpdate().then(e=>{const{resource_response:t}=e;s(k.id),n(t.data),T()}).catch(e=>{U(e.message),z(!1)})}else T()},size:"lg",text:g.a._("Done","editModal.editStoryPinModal.doneButton","Done button to save edits to previously saved story pin")})})]})]}),heading:g.a._("Edit Pin","editModal.editStoryPinModal.heading","Edit a previously saved story pin"),onDismiss:x,size:"md",children:d||!w.isLoaded||H||u?Object(_.jsx)(y.f,{paddingX:12,paddingY:9,children:Object(_.jsx)(y.T,{accessibilityLabel:g.a._("Loading edit information","editPinModal.editStoryPinModal.spinner","Accessible label for the edit pin loading icon"),show:!0})}):Object(_.jsx)(y.f,{overflow:"hidden",children:Object(_.jsx)(y.f,{marginEnd:-4,marginStart:-4,children:Object(_.jsx)(te.a,{name:"web_story_pin_limit_edits",children:({anyEnabled:e})=>{var n,a;return Object(_.jsxs)(y.f,{display:"flex",minHeight:300,overflow:"hidden",paddingX:8,children:[Object(_.jsxs)(y.f,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",paddingX:4,children:[Object(_.jsxs)(y.C,{wash:!0,rounding:4,width:120,children:[Object(_.jsx)(y.x,{alt:r,color:"#efefef",naturalHeight:R.height,naturalWidth:R.width,src:R.url}),Object(_.jsx)(y.f,{position:"absolute",left:!0,top:!0,padding:2,children:Object(_.jsxs)(y.f,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"center",opacity:.8,padding:2,rounding:"pill",children:[Object(_.jsx)(y.v,{accessibilityLabel:J?g.a._("Idea Pin icon","editModal.editStoryPinModal.storyPinIndicator","Idea Pin icon indicator"):g.a._("Story Pin icon","editModal.editStoryPinModal.storyPinIndicator","Story Pin icon indicator"),color:"darkGray",icon:"story-pin",size:12}),Object(_.jsx)(y.f,{marginStart:1,children:Object(_.jsx)(y.ab,{size:"md",weight:"bold",children:null===(n=k.story_pin_data)||void 0===n?void 0:n.page_count})})]})})]}),ae||!e?Object(_.jsx)(y.f,{"data-test-id":"edit-pages-button",paddingY:2,children:Object(_.jsx)(y.g,{inline:!0,onClick:v,text:g.a._("Edit pages","editModal.editStoryPinModal.editPagesButton","Edit pages label for story pin creation entry point")})}):null]}),Object(_.jsx)(y.f,{direction:"column",display:"flex",flex:"grow",paddingX:4,children:Object(_.jsx)(y.f,{marginBottom:-2,marginTop:-2,children:Object(_.jsx)(y.f,{maxHeight:500,overflow:"auto",paddingX:1,children:Object(_.jsxs)(y.f,{maxWidth:504,children:[e&&re&&Object(_.jsx)(y.f,{paddingY:2,children:ae?Object(_.jsxs)(i.Fragment,{children:[Object(_.jsx)(y.ab,{size:"md",children:Object(ie.b)(g.a._("Edit until {{ editDate }}","editModal.editStoryPinModal.lastEditableDate","Let user know the last date this Pin can be edited on"),{editDate:Object(_.jsx)(oe.b,{dateFormatType:oe.a.NUMERIC,useUTC:!1,value:re},"noEditsTwoWeeksAfter-"+(null!==(a=k.created_at)&&void 0!==a?a:""))})}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)(y.ab,{color:"gray",size:"md",children:ce})})]}):Object(_.jsxs)(y.f,{children:[Object(_.jsx)(y.ab,{size:"md",children:g.a._("Editing","editModal.editStoryPinModal.editLabel","Label header for informing users story pin is only editable for board selection")}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)(y.ab,{size:"md",color:"gray",children:g.a._("Only board selection and engagement settings can be changed!","editModal.editStoryPinModal.editLabel","Label header for informing users story pin is only editable for board selection")})})]})}),Object(_.jsxs)(y.f,{paddingY:2,children:[Object(_.jsx)(y.ab,{size:"md",children:g.a._("Title","editModal.editStoryPinModal.titleLabel","Label for form input where users will input the title of their pin")}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsxs)(y.f,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"between",padding:4,rounding:4,children:[Object(_.jsx)(y.ab,{color:"gray",truncate:!0,children:I||""}),Object(_.jsx)(y.v,{accessibilityLabel:g.a._("Lock","editModal.editStoryPinModal.lockIcon.accessibilityLabel","Label for the lock icon to show that editing a story pin title is locked"),color:"darkGray",icon:"lock"})]})})]}),Object(_.jsxs)(y.f,{paddingY:2,children:[Object(_.jsx)(y.ab,{size:"md",children:g.a._("Board","editModal.editStoryPinModal.boardLabel","Label for dropdown where users will choose their board")}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)(E.a,{board:t,id:"BoardPicker",isStoryPin:!0,onBoardChosen:h,onBoardCreate:f})})]}),Object(_.jsxs)(y.f,{paddingY:2,children:[Object(_.jsx)(y.ab,{size:"md",children:g.a._("Section","editModal.editStoryPinModal.sectionLabel","Label for dropdown where users will choose their section")}),Object(_.jsx)(y.f,{paddingY:2,children:(null==t?void 0:t.id)&&Object(_.jsx)(K.b,{isStoryPin:!0,board:t,onSectionChange:p,onSectionCreate:O,selectedSectionId:C,selectedSectionName:S})})]}),e&&se&&ae&&Object(_.jsx)(ee,{keyValueBlocks:q,listBlocks:W,onUpdateKeyValueBlock:V,onUpdateListBlocks:Z,templateType:null==M?void 0:M.metadata.template_type}),k.can_delete_did_it_and_comments&&Object(_.jsxs)(y.f,{paddingY:2,children:[Object(_.jsx)(y.ab,{size:"md",children:g.a._("Comments and photos permissions","editModal.editStoryPinModal.commentsAndPhotosPermissionsLabel","Label for dropdown where users can toggle off permissions for comments and photos")}),Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)(c.a,{isNoTitle:!0,commentsDisabled:o,onCommentChange:b})})]})]})})})})]})}})})})})}));function ae({canEdit:e,onTitleChange:t,title:n,errorMessage:o}){return Object(_.jsxs)(i.Fragment,{children:[Object(_.jsx)(y.p,{}),Object(_.jsxs)(y.f,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(_.jsx)(y.f,{column:12,mdColumn:3,paddingY:2,children:Object(_.jsx)(y.y,{htmlFor:"TitleField",children:Object(_.jsx)(y.ab,{size:"md",children:g.a._("Title","Label for editing title of pin","Label for editing title of pin")})})}),Object(_.jsx)(y.f,{column:12,mdColumn:8,children:e?Object(_.jsxs)(i.Fragment,{children:[Object(_.jsx)(y.f,{children:Object(_.jsx)(y.cb,{hasError:(o||"").length>0,id:"TitleField",onChange:t,size:"lg",value:n})}),!!o&&Object(_.jsx)(y.f,{justifyContent:"center",children:Object(_.jsx)(A.a,{errorMessage:o,htmlFor:"pin-edit-title"})})]}):Object(_.jsx)(y.f,{column:12,mdColumn:8,paddingY:2,children:Object(_.jsx)(y.ab,{size:"md",weight:"bold",children:n})})})]})]})}function se({onChangeWebsite:e,link:t,errorMessage:n}){return Object(_.jsxs)(i.Fragment,{children:[Object(_.jsx)(y.p,{}),Object(_.jsxs)(y.f,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(_.jsx)(y.f,{column:12,mdColumn:3,paddingY:2,children:Object(_.jsx)(y.y,{htmlFor:"WebsiteField",children:Object(_.jsx)(y.ab,{size:"md",children:g.a._("Website")})})}),Object(_.jsxs)(y.f,{column:12,mdColumn:8,children:[Object(_.jsx)(y.f,{children:Object(_.jsx)(y.cb,{hasError:(n||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})}),!!n&&Object(_.jsx)(y.f,{justifyContent:"center",children:Object(_.jsx)(A.a,{errorMessage:n,htmlFor:"pin-edit-website"})})]})]})]})}var ce=n("MhBu"),de=n("x12c"),le=n("Wrea"),ue=n("sH+O"),he=n("OSge"),be=n("KFEb"),pe=n("r8eU"),fe=n("qVfT"),ge=n("NjDU"),me=n("w70y"),je=n("eIuQ"),ve=n("pLLR"),Oe=n("ANjH"),xe=n("c50B"),ye=n("VqlB"),_e=n("EC67");function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){return Boolean(e&&e.trim().length)}function Se(e,t){const n=Ce(e),i=Ce(t);return(n||i)&&e!==t}class Ie extends i.Component{constructor(...e){var t,n,i,o,r,a,c,u,h,b,p,m,j,v,O,x,y,_;super(...e),we(this,"state",{altText:(null===(t=this.props.pinResource.data)||void 0===t?void 0:t.alt_text)||"",board:(null===(n=this.props.pinResource.data)||void 0===n?void 0:n.board)||null,commentsDisabled:(null===(i=this.props.pinResource.data)||void 0===i?void 0:i.comments_disabled)||(null===(o=this.props.pinResource.data)||void 0===o?void 0:o.did_it_disabled)||!1,description:(null===(r=this.props.pinResource.data)||void 0===r||null===(a=r.description)||void 0===a?void 0:a.trim())||"",apiErrorMessage:null,link:(null===(c=this.props.pinResource.data)||void 0===c?void 0:c.link)||"",pinNoteText:(null===(u=this.props.pinResource.data)||void 0===u||null===(h=u.pin_note)||void 0===h?void 0:h.text)||"",sectionId:(null===(b=this.props.pinResource.data)||void 0===b||null===(p=b.section)||void 0===p?void 0:p.id)||null,sectionName:(null===(m=this.props.pinResource.data)||void 0===m||null===(j=m.section)||void 0===j?void 0:j.title)||null,showDeleteConfirmation:!1,carousel_data:(null===(v=this.props.pinResource.data)||void 0===v?void 0:v.carousel_data)||null,title:(null===(O=this.props.pinResource.data)||void 0===O?void 0:O.title)||"",isLoadingPin:!Boolean(this.props.pinResource.isLoaded),isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:(null===(x=this.props.pinResource.data)||void 0===x||null===(y=x.carousel_data)||void 0===y?void 0:y.index)||0,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1,shouldShowValidationUserMentionTagsError:!1,userMentionTags:(null===(_=this.props.pinResource.data)||void 0===_?void 0:_.user_mention_tags)||[]}),we(this,"onClickDeleteButton",()=>this.setState({showDeleteConfirmation:!0})),we(this,"onHideConfirmation",()=>this.setState({showDeleteConfirmation:!1})),we(this,"updateCarouselSlotIndex",()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})}),we(this,"handleBoardChange",e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})}),we(this,"createBoard",e=>{const{createBoard:t}=this.props,{board:n}=this.state;!n.id&&n.name&&e&&t(n.name,e).then(e=>{if(this._isMounted){const{sectionId:t,sectionName:n}=this.state;!t&&n?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}})}),we(this,"handleBoardCreateClick",e=>{if(!e)return;const t={name:e,privacy:d.a.BoardPrivacy.PUBLIC,access:"write"};this.setState({board:t,sectionId:null,sectionName:null})}),we(this,"createSection",()=>{const{board:e,sectionName:t}=this.state;if(!t)return;if(!e.id)return void this.createBoard();const n={boardId:e.id,name:t},{createSection:i}=this.props;i(n).then(e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())}).catch(()=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:null})})}),we(this,"handleSectionCreateClick",e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})}),we(this,"handleSectionChange",e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1})),we(this,"handleDeletePin",()=>{const{advertiser_id:e,changeBoardPinCount:t,changeUserPinCount:n,onDelete:i,onHide:o,pinId:r,pinResource:{data:a},removeBoardlessPin:s,viewer:c}=this.props,d={...e?{advertiser_id:e}:{},id:r};return l.a.create("PinResource",d).callDelete().then(()=>{if(this._isMounted){if(!a)return;const{board:{id:e}={},pinner:{id:s}={},section:c}=a;t({boardId:e,sectionId:c&&c.id||void 0,increment:-1}),n({userId:s,increment:-1}),de.a.instance.publish(e,"pinDeleted",r),de.a.instance.publish(s,"pinDeleted"),de.a.instance.publish(r,"pinDeleted"),o(),i&&i()}c.id&&s(c.id,r)})}),we(this,"sanitizeCarouselData",e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach(e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)}),t}}return null}),we(this,"triggerBoardAndSectionCreate",e=>()=>{const{board:t,sectionId:n,sectionName:i}=this.state;t&&!t.id&&t.name?this.createBoard(e):!n&&i?this.createSection():this.handleSave()}),we(this,"logPinEditEvent",(e,t,n,i,o)=>{const r={},{pinId:a,view:s,viewParameter:c}=this.props,{userMentionTags:d}=this.state;if(r.objectId=a,r.num_user_mention_tags=d.length,e&&(r.board_was_modified=!0),!e&&t&&(r.board_section_was_modified=!0),n){const{description:e}=this.state,{description:t}=o;r.original_pin_description=t,r.edited_pin_description=e}if(i){const{carousel_data:e}=this.state,{carousel_data:t}=o;r.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(t)),r.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(e))}Object(L.b)(2,{component:208,view:s,viewParameter:c,...r})}),we(this,"handleSave",()=>{this.setState({apiErrorMessage:null,isProcessing:!0});const{advertiser_id:e,completeResourceFetch:t,invalidatePinResource:n,pinId:i,pinResource:{data:o},onHide:r,removeBoardlessPin:a,updatePinNote:s,viewer:c}=this.props;if(!o)return;const{alt_text:d,board:u,comments_disabled:h,did_it_disabled:b,title:p,description:g,link:m,pin_note:j,section:v,carousel_data:O}=o,x=null==j?void 0:j.text,{carousel_data:y,shouldShowValidationLinkFormatError:_}=this.state;let w;if(y){const e=this.sanitizeCarouselData();e&&(w=JSON.stringify(e))}const{altText:C,board:S,commentsDisabled:I,currentIndex:T,title:E,description:P,pinNoteText:D,sectionId:B,carousel_data:k,userMentionTags:M}=this.state,R=S||u,A=_?m:this.state.link,L={alt_text:C,board_id:null==R?void 0:R.id,board_section_id:B,carousel_data_json:w,description:P,disable_comments:I,disable_did_it:I,id:i,link:A,title:E,user_mention_tags:JSON.stringify(M),...e?{advertiser_id:e}:{}},N=v&&v.id||null,F=null==R?void 0:R.id,U=null==u?void 0:u.id,H=Se(d,C),z=U!==F,q=(Boolean(N)||Boolean(B))&&N!==B,G=Se(p,E),W=Se(g,P),Y=Se(m,A),K=Boolean(k)&&Boolean(O)&&!f()(k,O),V=h!==I||b!==I,X=Se(x,D);H||z||q||G||W||X||Y||K||V?(X&&s(i,x,D),l.a.create("PinResource",L).callUpdate().then(({resource_response:e})=>{if(this._isMounted){const{changeBoardPinCount:d,onSubmit:l,pinId:u,pinMoved:h}=this.props;var i,s;if((z||q)&&F&&U)h({selectedPinIds:[u],source:{boardId:U,sectionId:N},target:{boardId:F,sectionId:B}}),d({boardId:F,sectionId:B||void 0,increment:1}),d({boardId:U,sectionId:N||void 0,increment:-1}),c.id&&"quick_saves"===(null===(i=o.board)||void 0===i?void 0:i.layout)&&a(c.id,u);if(l&&F&&null!=R&&R.url)l({boardId:F,title:null!==(s=R.name)&&void 0!==s?s:"",sectionId:B,url:R.url});r(),n(u);const{data:b}=e;b.carousel_data&&(b.carousel_data.index=T),t(b),this.logPinEditEvent(z,q,W,K,o)}}).catch(()=>{const{shouldShowValidationTitleError:e,shouldShowValidationDescriptionError:t,shouldShowValidationLinkFormatError:n}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!e&&!t&&!n})})):(r(),n(i)),this.setState({isProcessing:!1})}),we(this,"handleTextChanges",(e,t)=>{const{carousel_data:n}=this.state;if(!n)return;const i=s()(n),{carousel_slots:o=[]}=i,{currentIndex:r,shouldApplyTextToAll:a,description:c,link:d,title:l}=this.state,u=this.valueIsValidForType(e,t);switch(a?o.forEach(n=>n[t]=e):o[r]&&(o[r][t]=e),t){case"details":const t=0===r?e:c;this.setState({description:t,carousel_data:i||null,shouldShowValidationDescriptionError:!u,shouldShowGenericUpdateError:!1});break;case"link":const n=0===r?e:d;this.setState({link:n,carousel_data:i||null,shouldShowValidationLinkFormatError:!u,shouldShowGenericUpdateError:!1});break;case"title":const o=0===r?e:l;this.setState({title:o,carousel_data:i||null,shouldShowValidationTitleError:!u,shouldShowGenericUpdateError:!1})}}),we(this,"handleDescriptionChange",({value:e,userMentionTags:t})=>{const n=this.valueIsValidForType(e,"description"),i=this.valueIsValidForType(t,"userMentionTags");t.length<this.state.userMentionTags.length&&Object(L.b)(8906,{element:116,tag_type:1}),this.setState({description:e,userMentionTags:t,shouldShowValidationDescriptionError:!n,shouldShowValidationUserMentionTagsError:!i,shouldShowGenericUpdateError:!1})}),we(this,"handleCarouselDetailsChange",({value:e})=>{this.handleTextChanges(e,"details")}),we(this,"handleTitleChange",({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})}),we(this,"handleCarouselTitleChange",({value:e})=>{this.handleTextChanges(e,"title")}),we(this,"handleAltTextChange",({value:e})=>{this.setState({altText:e})}),we(this,"valueIsValidForType",(e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===Object(xe.r)([Object(xe.q)({message:g.a._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;case"userMentionTags":return e.length<=5;default:return!0}}),we(this,"handleWebsiteChange",({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})}),we(this,"handleCarouselWebsiteChange",({value:e})=>{this.handleTextChanges(e,"link")}),we(this,"handleCommentChange",e=>this.setState({commentsDisabled:!e.value})),we(this,"handleShouldApplyToAll",e=>{if(e){const{currentIndex:t=0,carousel_data:n}=this.state;if(!n)return;const i=s()(n),{carousel_slots:o=[]}=i,{details:r,link:a,title:c}=o[t];o.forEach(e=>{e.details=r,e.title=c,e.link=a}),this.setState({carousel_data:i,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})}),we(this,"handleCarouselSlider",e=>{const{carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})}),we(this,"handleClickStoryPinPages",()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/story-pin-builder/${e.id}/edit`)}),we(this,"handleMouseEnter",()=>{this.setState({shouldShowCarouselSliders:!0})}),we(this,"handleMouseLeave",()=>{this.setState({shouldShowCarouselSliders:!1})})}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}componentDidUpdate(e){const{pinResource:{data:t,isLoaded:n},carouselSlotCurrentIndex:i}=this.props;var o;t&&n!==e.pinResource.isLoaded&&this.setState({altText:t.alt_text,board:t.board,commentsDisabled:t.comments_disabled||t.did_it_disabled,description:t.description&&t.description.trim(),isLoadingPin:!1,link:t.link,pinNoteText:(null===(o=t.pin_note)||void 0===o?void 0:o.text)||"",sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,carousel_data:t.carousel_data,currentIndex:void 0!==i?i:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1,userMentionTags:t.user_mention_tags||[]})}componentWillUnmount(){this._isMounted=!1}showErrorToast(e){this.props.toastManagerContext.showOneToast(({onHide:t})=>Object(_.jsx)(O.a,{color:"red",duration:5e3,onHide:t,text:e})),this.props.onHide()}getCurrentUserId(e){return e.isAuth?e.id:""}render(){const{disableDelete:e,onHide:t,pinResource:n,pinId:i,requestContext:o,viewer:a}=this.props,{altText:s,apiErrorMessage:d,board:l,commentsDisabled:u,description:h,link:b,pinNoteText:p,sectionId:f,sectionName:j,showDeleteConfirmation:v,title:O,isLoadingPin:x,isProcessing:w,carousel_data:C,shouldApplyTextToAll:S,currentIndex:E,shouldDisableSave:P,shouldShowCarouselSliders:D,shouldShowValidationTitleError:k,shouldShowValidationDescriptionError:M,shouldShowValidationLinkFormatError:R,shouldShowGenericUpdateError:A,shouldShowValidationUserMentionTagsError:L,userMentionTags:N}=this.state;if(v)return Object(_.jsx)(I,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const F=new pe.b(o,"web_pin_edit_note_option").enabled(),H=n.data||{},z=!!(C&&C.carousel_slots&&C.carousel_slots.length>1),q=C&&C.carousel_slots&&C.carousel_slots.length>0&&C.carousel_slots[E]||{},{details:K="",link:X="",title:Z=""}=q,Q=!!(H&&H.story_pin_data_id&&H.story_pin_data),J=H&&(H.access||[]).includes("write")||this.props.canEdit||!!l&&Object(r.a)({action:4,board:l}),$=e=>{const t=this.getCurrentUserId(e),n=this.props.canEdit&&this.props.advertiserOwnerUserId?this.props.advertiserOwnerUserId:t;return J&&!H.is_repin&&!Q&&(z||!C)&&(H.native_creator&&H.native_creator.id===n||z&&H.pinner&&H.pinner.id===n||H.link_domain&&H.link_domain.official_user&&H.link_domain.official_user.id===n||!!H.domain&&H.pinner&&H.pinner.id===n&&H.pinner.domain_url&&H.pinner.domain_url.includes(H.domain))},ee=H&&H.images&&H.images["474x"]||{},te=new pe.b(o,"web_story_pin_creator").enabledWithNoActivation(),ne=new pe.b(o,"web_alt_text").enabledWithNoActivation(),ie=H.story_pin_data&&H.story_pin_data.metadata&&H.story_pin_data.metadata.version?Object(ue.b)(H.story_pin_data.metadata.version,he.c):null,oe=null!=ie&&ie>=0,ce=!!H.story_pin_data&&!!H.story_pin_data.metadata&&!!H.story_pin_data.metadata.is_editable&&H.native_creator&&H.native_creator.id===this.getCurrentUserId(a);if(Q&&te&&oe&&ce)return Object(_.jsx)(re,{apiErrorMessage:d,board:l,commentsDisabled:u,description:h,disableDelete:e,isLoadingPin:x,isProcessing:w,onChangeBoard:this.handleBoardChange,onChangeComment:this.handleCommentChange,onChangeSection:this.handleSectionChange,onClickBoardCreate:this.handleBoardCreateClick,onClickDeleteButton:this.onClickDeleteButton,onClickEditPages:this.handleClickStoryPinPages,onClickSectionCreate:this.handleSectionCreateClick,onHide:t,pinResource:n,sectionId:f,sectionName:j,title:O,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(a)});const de=$(a)?Object(_.jsx)(ae,{canEdit:J,onTitleChange:z?this.handleCarouselTitleChange:this.handleTitleChange,title:z&&Z?Z:O,errorMessage:k?Object(je.b)(z):""}):null,le=(J||a.isAuth&&(H.pinner||{}).id===a.id)&&$(a)?Object(_.jsx)(U,{canAddUserMentionTags:!z,canEdit:J,description:(z?K:h)||"",errorMessage:M?Object(je.a)(z):L?Object(je.d)(z):"",initialMentions:N,label:g.a._("Description","Label for editing description","Label for editing description"),placeholder:g.a._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:z?this.handleCarouselDetailsChange:this.handleDescriptionChange}):null,be=F?Object(_.jsx)(Y,{isCollaborative:!(null==l||!l.is_collaborative),onPinNoteChange:({value:e})=>{this.setState({pinNoteText:e})},pinNoteText:p}):null,fe=(e=>$(e)&&!(H.aggregated_pin_data&&H.aggregated_pin_data.is_shop_the_look))(a)?Object(_.jsx)(se,{link:z&&X?X:b,onChangeWebsite:z?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:R?Object(je.c)(z):""}):null,ge=z?Object(_.jsxs)(y.f,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end",children:[Object(_.jsx)(y.f,{paddingY:2,children:Object(_.jsx)(y.y,{htmlFor:"applyTextToAll",children:Object(_.jsx)(y.ab,{children:g.a._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")})})}),Object(_.jsx)(y.f,{paddingX:2,paddingY:2,children:Object(_.jsx)(y.V,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:S})})]}):null,me=$(a)&&ne?Object(_.jsx)(T,{canEdit:J,onAltTextChange:this.handleAltTextChange,altText:s}):null,ve=H.can_delete_did_it_and_comments?Object(_.jsx)(c.a,{commentsDisabled:u,onCommentChange:this.handleCommentChange}):null,Oe=!!a.has_quicksave_board&&!!a.boardCount&&a.boardCount<2;return Object(_.jsx)(m.b,{heading:g.a._("Edit this Pin","EditPinModal.ModalHeading.EditThisPin","Edit a previously saved pin"),accessibilityModalLabel:g.a._("Edit your previously saved pin","EditPinModal.ModalHeading.AccessibleLabel","Accessible label for edit previously saved pin modal"),size:Oe?"sm":"lg",onDismiss:t,footer:Object(_.jsx)(W,{apiErrorMessage:d,shouldShowGenericUpdateError:A,onClickDeleteButton:this.onClickDeleteButton,disableDelete:e,onHide:t,shouldDisableSave:P,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(a)}),children:x||!n.isLoaded||w?Object(_.jsx)(y.f,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(_.jsx)(y.T,{accessibilityLabel:g.a._("loading","EditPinModal.LoadingPin.Spinner","Accessible label for the edit pin loading icon"),show:!0})}):Object(_.jsxs)(y.f,{display:"flex",justifyContent:Oe?"center":"between",minHeight:350,paddingX:4,children:[Oe?null:Object(_.jsxs)(y.f,{column:12,mdColumn:9,children:[Object(_.jsx)(B,{board:l||H.board,canEdit:J,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick}),Object(_.jsx)(V,{board:l||H.board,canEdit:J,onSectionCreate:this.handleSectionCreateClick,onSectionChange:this.handleSectionChange,sectionId:f,sectionName:j,currentSection:H.section}),de,le,fe,ge,me,be,ve]}),Object(_.jsx)(G,{isCarousel:z,shouldShowCarouselSliders:D,onCarouselSlide:this.handleCarouselSlider,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,currentIndex:this.state.currentIndex,carouselData:this.state.carousel_data,pinId:i,description:h,image:ee})]})})}}const Te=(e,t)=>({field_set_key:"detailed",id:e,preserve_component_state:t});t.a=Object(Oe.compose)(x.c,Object(o.connect)((function(e){const{advertiser:t,viewer:n}=e;return n.isAuth&&t?{advertiser_id:t.id,...t.owner_user_id!==n.id?{advertiserOwnerUserId:t.owner_user_id}:{},viewer:n}:{viewer:n}}),e=>({changeBoardPinCount:t=>e(Object(le.d)(t)),changeUserPinCount:t=>e(Object(ge.c)(t)),completeResourceFetch:t=>e(Object(h.b)("PinResource",Te(t.id,!1),t)),createBoard:(t,n)=>e(function(e,t){const n={name:e,privacy:d.a.BoardPrivacy.PUBLIC};return e=>l.a.create("BoardResource",n).callCreate().then(n=>{const i=n.resource_response.data;return e(t.username&&Object(h.f)("BoardsResource",Object(u.a)(t.username,!1))),i})}(t,n)),createSection:t=>e(Object(b.a)(t)),invalidatePinResource:t=>e(Object(h.f)("PinResource",Te(t,!0))),removeBoardlessPin:(t,n)=>e(Object(ce.a)({feedId:t,feedType:be.a.BOARDLESS_PINS,itemIds:[n],itemType:"pin"})),pinMoved:Object(Oe.bindActionCreators)(ye.b,e),updatePinNote:(t,n,i)=>e(Object(fe.a)(t,n,i))})))((function(e){const t=Object(me.a)({name:"PinResource",options:Te(e.pinId,!0)});return Object(_.jsx)(Ie,{...e,history:Object(_e.h)(),pinResource:t,requestContext:Object(ve.d)()})}))},"62cf":function(e,t,n){n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return u}));const i=1,o=2,r="female",a="male",s="unspecified",c="en-US",d="US",l=520,u={is_renux:!0,is_simple_renux:!0,steps:[{moduleName:"NuxPicker"},{moduleName:"NuxEducationLoader"}],can_exit:!0,relaunchPlacement:!1,sub_type:"modal"}},"6A0I":function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("JW66"),a=n("Sihc"),s=n("Ye/N"),c=n("GBVV"),d=n("n6mq"),l=n("nKUr");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(e){super(e),u(this,"onCreateSection",()=>{const{board:e,dispatch:t,completeCreateSectionAction:n,pinImport:i}=this.props;return this.setState({isSaving:!0}),t(Object(a.a)({boardId:e.id,name:this.state.inputName.trim(),pinImport:i})).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),u(this,"handleKeyDown",({event:e,value:t})=>{const{createError:n,inputName:i}=this.state;[r.a.KeyCode.ENTER,r.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!n&&i.trim()&&this.onCreateSection()}),u(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),u(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:n,inputRef:i}=this.state;!i||t.inputRef&&!n||i.focus()}render(){const{showTitle:e,positionRelative:t}=this.props,{createError:n,inputName:i,isSaving:o}=this.state,r=!!i.trim()&&!n;return Object(l.jsxs)(d.f,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:t?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[e&&Object(l.jsx)(d.f,{marginTop:3,paddingX:6,paddingY:3,children:Object(l.jsx)(d.u,{size:"sm",children:s.a._("Add section","Title in the add section modal","Title in the add section modal")})}),Object(l.jsxs)(d.f,{padding:4,children:[Object(l.jsx)(d.f,{marginBottom:2,children:Object(l.jsx)(d.y,{htmlFor:"sectionEditName",children:Object(l.jsx)(d.ab,{size:"md",color:n?"red":"gray",children:s.a._("Name","Board section name","Board section name")})})}),Object(l.jsx)(d.f,{children:Object(l.jsx)(d.f,{ref:this.handleInputRef,children:Object(l.jsx)(d.cb,{errorMessage:n||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:s.a._('Like "Lighting"',"Placeholder for board section name","Placeholder for board section name"),size:"lg",type:"text",value:i})})})]}),Object(l.jsx)(d.f,{display:"flex",flex:"grow"}),Object(l.jsx)(d.f,{padding:4,children:Object(l.jsx)(d.f,{display:"flex",justifyContent:"end",children:Object(l.jsx)(c.b,{disabled:!r||o,onClick:this.onCreateSection,submitting:o,text:s.a._("Add","add a new section","add a new section")})})})]})}}t.a=Object(o.connect)()(h)},"6CFY":function(e,t,n){var i=n("q1tI"),o=n("BcvT"),r=n("n6mq"),a=n("nKUr");const s=new r.r(669),c={1:"up",2:"right",3:"down",4:"left"};t.a=({anchors:e={},complete:t,dismiss:n,displayData:d,idealDirection:l,onCompleteByAnchor:u={},platform:h,positionRelativeToAnchor:b=!0,touchToDismiss:p=!0,useMasonryFlyout:f=!1})=>{var g;const{anchors_by_platform:m={},button_text:j,button_uri:v,display_type:O,flyout_direction:x,scroll_to_dismiss:y,scroll_to_dismiss_delay_in_seconds:_=0,text:w}=d||{},C=null===(g=m[h])||void 0===g?void 0:g.anchor,S=e[C],I=Object(i.useCallback)(()=>{y&&(window.removeEventListener("scroll",I),window.removeEventListener("touchmove",I)),p&&S&&S.removeEventListener("click",I),setTimeout(()=>n(),1e3*_)},[S]);if(Object(i.useEffect)(()=>{S&&(y&&(window.addEventListener("scroll",I),window.addEventListener("touchmove",I)),p&&S.addEventListener("click",I))},[S]),!S)return null;const{FLYOUT:T,PULSAR:E}={FLYOUT:1,PULSAR:2},P=({children:e})=>{if(f)return Object(a.jsx)(r.z,{zIndex:s,children:e});if(O===E){const t={};if(b)t.top=S.offsetTop,t.left=S.offsetLeft,t.width=S.offsetWidth,t.height=S.offsetHeight;else{const e=S.getBoundingClientRect();t.top=e.top+window.pageYOffset,t.left=e.left+window.pageXOffset,t.width=e.width,t.height=e.height}return Object(a.jsx)(r.f,{position:"absolute",top:!0,left:!0,zIndex:s,dangerouslySetInlineStyle:{__style:t},children:e})}return Object(a.jsx)(r.f,{zIndex:s,children:e})},D=c[x],B=v&&(v.startsWith("https://")||v.startsWith("http://")),k=(u||{})[C],M=()=>{y&&(window.removeEventListener("scroll",I),window.removeEventListener("touchmove",I)),p&&S.removeEventListener("click",I),t()};return Object(a.jsxs)(i.Fragment,{children:[O===E&&Object(a.jsx)(P,{children:Object(a.jsx)(o.a,{anchor:S,onTouch:()=>{M(),k?k():S instanceof HTMLElement&&S.click()},zIndex:670})}),O===T&&Object(a.jsx)(P,{children:Object(a.jsx)(r.J,{anchor:S,color:"blue",idealDirection:D||l||"down",onDismiss:I,positionRelativeToAnchor:!f&&b,shouldFocus:!1,showCaret:!0,size:"md",children:Object(a.jsxs)(r.f,{padding:4,width:"220px",children:[Object(a.jsx)(r.ab,{align:"center",color:"white",weight:"bold",children:w}),j?Object(a.jsx)(r.f,{display:"flex",justifyContent:"center",marginTop:4,children:Object(a.jsx)(r.f,{column:8,children:v?Object(a.jsx)(r.g,{color:"white",href:v,onClick:M,role:"link",size:"md",target:B?"blank":null,text:j}):Object(a.jsx)(r.g,{color:"white",onClick:M,size:"md",text:j})})}):null]})})})]})}},"6G9P":function(e,t,n){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var i=n("q1tI"),o=(n("JW66"),n("yaUg")),r=n("Ye/N"),a=n("n6mq"),s=n("nKUr");const c=(e,t)=>{if(!t)return e;const n=new RegExp(/http(s?):/);if(!n.test(e)){const i=n.exec(t);if(i&&i.length){e=i[0]+e}}return e},d=(e,t)=>t?Object(o.a)(r.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board","Toast for successfully saving to a section within a board"),{sectionName:t.title,boardName:null!=e?e:""}):Object(s.jsxs)(i.Fragment,{children:[Object(s.jsx)(a.ab,{children:r.a._("Saved to")}),Object(s.jsx)(a.ab,{weight:"bold",children:e})]})},"6HHy":function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("Ye/N"),o=n("vvax"),r=n("n6mq"),a=n("nKUr");function s({onUpdate:e,showLabel:t=!0,value:n}){const s=[];for(let r=1;r<=50;r+=1)s.push({value:String(r),label:Object(o.b)(i.a.ngettext("{{ servings }} serving","{{ servings }} servings",r,"storyboard.detailsList.field.servings","Option for number of servings a story pin recipe will provide"),{servings:r}).join("")});return Object(a.jsx)(r.f,{width:"100%",display:"flex",children:Object(a.jsx)(r.f,{width:"100%",position:"relative",children:Object(a.jsx)(r.R,{size:"lg",id:"servings",name:"servings",label:t?i.a._("Servings","storyboard.detailsList.field.servings","Header title for serving count entry for story pin recipe"):void 0,placeholder:i.a._("Pick a serving size","storyboard.detailsList.recipe","Placeholder caption for servings count input in story pin recipe"),value:n,options:s,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},"6SCp":function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("HJ6M");function o(e){return"most_reactions"===e?"most_reactions":"default"}function r(e,t,n,r){var a,s;const{owner:c,should_show_board_activity:d}=e,l=(null==c?void 0:c.id)===t.id;let u="react_grid_pin";return t.isPartner&&l&&d?u="partner_react_grid_pin_with_board_activity":t.isPartner&&l?u="partner_react_grid_pin":d&&(u="react_grid_pin_with_board_activity"),{board_id:e.id,board_url:null!==(a=e.url)&&void 0!==a?a:"",currentFilter:r,field_set_key:u,filter_section_pins:!r||r===i.a,sort:o(n),layout:null!==(s=e.layout)&&void 0!==s?s:"",page_size:25,redux_normalize_feed:!0}}},"6b3J":function(e,t,n){n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return T}));var i=n("q1tI"),o=n("/MKj"),r=n("Ye/N"),a=n("ihsa"),s=n("r9FX"),c=n("n6mq"),d=n("nKUr");const l={__style:{animationName:"SelectInterest_AnimateIn, SelectInterest_CircleAnimateOut",animationDuration:"0.3s, 0.3s",animationDelay:"0.3s, 1s",animationFillMode:"forwards",animatitionTimingFunction:"ease-out",backgroundColor:"rgba(196, 196, 196, 0.1)"}},u={__style:{animationName:"SelectInterest_AnimateIn, SelectInterest_AnimateOut",animationDuration:"0.3s, 0.5s",animationDelay:"0.3s, 1.1s",animationFillMode:"forwards",animatitionTimingFunction:"ease-out"}};var h=function({anchor:e,endAnimation:t,interest:n}){const[o,r]=Object(i.useState)(!1),{width:s,height:h,url:b}=n.images["400x"];let p;const f=()=>{t(n.id)},g=()=>{r(!0),p=setTimeout(f,2e3)};Object(i.useEffect)(()=>((()=>{const e=new Image;e.src=b,e.onload=g})(),()=>{p&&clearTimeout(p)}),[]);const{top:m,left:j,bottom:v,right:O}=(e||{}).getBoundingClientRect(),x=(m+v)/2+100,y=(j+O)/2-75;return!!e&&o&&Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(a.a,{unsafeCSS:"\n@keyframes SelectInterest_AnimateIn {\n  from {\n    transform: scale(0.0);\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n    transform: scale(1.0);\n  }\n}\n@keyframes SelectInterest_CircleAnimateOut {\n  from {\n    transform: scale(1.0);\n    opacity: 1;\n  }\n  to {\n    transform: scale(0.8);\n    opacity: 0;\n  }\n}\n@keyframes SelectInterest_AnimateOut {\n  from {\n    transform: translateX(0) translateY(0) scale(1.0);\n    opacity: 1;\n  }\n  to {\n    transform: translateX(-25px) translateY(-200px) scale(0.1);\n    opacity: 0;\n  }\n}\n"}),Object(d.jsxs)(c.f,{dangerouslySetInlineStyle:{__style:{top:x,left:y}},display:"flex",justifyContent:"center",position:"fixed",width:200,height:200,children:[Object(d.jsx)(c.f,{alignItems:"center",dangerouslySetInlineStyle:l,display:"flex",height:"100%",justifyContent:"center",opacity:0,rounding:"circle",width:"100%"}),Object(d.jsx)(c.f,{bottom:!0,dangerouslySetInlineStyle:u,height:100,left:!0,margin:"auto",opacity:0,position:"absolute",rounding:3,right:!0,top:!0,width:100,children:Object(d.jsx)(c.C,{height:"100%",rounding:4,width:"100%",wash:!0,children:Object(d.jsx)(c.x,{alt:"pin-image",fit:"cover",naturalHeight:s,naturalWidth:h,src:b})})})]})]})},b=n("w70y"),p=n("5MXd"),f=n("vtuW"),g=n("U4JR"),m=n("ySR+"),j=n("EC67"),v=n("0G5S"),O=n("0/lc"),x=n("QAzJ");const y="cubic-bezier(0.66, 0.025, 0.33, 0.975)",_="RelatedInterestsBanner_SlideIn 250ms forwards "+y,w=e=>({view:e,viewParameter:136,component:13489});function C({onDismiss:e,relatedInterests:t,viewType:n}){const[l,u]=Object(i.useState)(!0),[b,x]=Object(i.useState)(!1),[C,S]=Object(i.useState)([]),[I,T]=Object(i.useState)(C.reduce((e,t)=>(e[t.id]=!1,e),{})),[E,P]=Object(i.useState)(),[D,B]=Object(i.useState)(),[k,M]=Object(i.useState)(),{viewportSize:R}=Object(o.useSelector)(({ui:e})=>e.app);let A;const L=Object(j.h)(),N=Object(o.useDispatch)();Object(i.useEffect)(()=>{t&&t.length>=5&&(S(t.slice(0,6)),u(!1),Object(g.b)(9025,{view:n}),x((()=>{const e=Object(v.a)("lastViewedMiniRenux");return!!(e&&Date.now()-Number(e)<2592e5)})()),Object(f.c)("viewedMiniRenux",!0),Object(v.c)("lastViewedMiniRenux",Date.now()))},[t]),Object(i.useEffect)(()=>()=>{clearTimeout(E),clearTimeout(D),clearTimeout(A)},[]);const{isTooltipOnLogoButtonShown:F,logoButtonRef:U,toggleTooltipOnLogoButton:H}=Object(m.b)(),z=()=>H(!1),q=()=>H(!0),G=e=>{u(!l);const t=e?{}:{element:179};let i=101;e&&(i=l?107:106),M(!0),A=setTimeout(()=>M(!1),125),Object(g.b)(i,{...w(n),...t})},W=e=>{const t=C.findIndex(t=>t.id===e.id),i=!e.is_followed,o=C.slice();o[t]={...e,is_followed:i},S(o),i&&T({...I,[e.id]:!0}),Promise.resolve(N(Object(O.d)({[e.id]:i},"mini_renux"))).then(()=>{i&&(F?(E&&clearTimeout(E),P(setTimeout(z,7e3))):(D&&clearTimeout(D),E&&clearTimeout(E),B(setTimeout(q,3e3)),P(setTimeout(z,1e4)))),N(Object(O.c)(!0))}),Object(g.b)(101,{...w(n),element:i?1030:1151}),Object(f.c)("completedMiniRenux",!0)},Y=e=>T({...I,[e]:!1}),K=r.a._("Welcome back!","relatedInterestsBanner.header","Welcome header on related interests banner"),V=r.a._("Tell us what else you're interested in","relatedInterestsBanner.subheader","Subheader on realted interests banner instructing users to select interests"),X=Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(c.f,{display:"flex",marginStart:-2,children:C.slice(0,3).map(e=>{const t=e.images["400x"];return t?Object(d.jsx)(c.f,{marginStart:2,rounding:2,children:Object(d.jsx)(c.C,{height:64,rounding:4,width:64,children:Object(d.jsx)(c.x,{alt:r.a._("Related interest image thumbnail","relatedInterestsBanner.image.thumbnail","Label for related interests image preview thumbnail"),color:e.background_color,fit:"cover",naturalHeight:t.height,naturalWidth:t.width,src:t.url})})},t.url):null})}),Object(d.jsxs)(c.f,{direction:"column",display:"flex",marginEnd:6,paddingX:6,children:[Object(d.jsx)(c.ab,{children:K}),Object(d.jsx)(c.u,{size:"sm",children:V})]}),Object(d.jsx)(c.g,{inline:!0,onClick:()=>G(!1),text:r.a._("Choose topics","relatedInterestsBanner.button.chooseTopics","Choose topics button, expands banner to show topics")})]}),Z=Object(d.jsxs)(c.f,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",children:[Object(d.jsx)(c.ab,{align:"center",children:K}),Object(d.jsx)(c.u,{align:"center",size:"sm",children:V}),Object(d.jsx)(c.f,{display:"flex",marginStart:-2,paddingY:4,children:C.map(e=>Object(d.jsx)(c.f,{marginStart:2,display:"flex",direction:"column",justifyContent:"start",children:Object(d.jsx)(s.a,{clickHandler:()=>W(e),interest:e,isSelected:e.is_followed,size:"md_120"})},e.id))}),Object(d.jsx)(c.g,{color:"red",disabled:0===C.filter(e=>e.is_followed).length,inline:!0,onClick:()=>{L.push("/"),Object(g.b)(101,{...w(n),element:76})},text:r.a._("See your new home feed","relatedInterestsBanner.button.seeHomefeed","Submit selected topics and go to updated homefeed button")})]}),Q=new c.n([new c.r(p.a)]);return C.length>=5&&!b?Object(d.jsxs)(c.z,{children:[Object(d.jsx)(a.a,{unsafeCSS:(J=128,`\n@keyframes RelatedInterestsBanner_SlideIn {\n  from { transform: translateY(${J}px); }\n  to { transform: translateY(0); }\n}\n`)}),Object(d.jsx)(c.Z,{onTap:l?()=>{}:()=>G(!1),children:Object(d.jsxs)(c.f,{alignItems:"center",bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{animation:_,WebkitAnimation:_,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",cursor:l?"default":"pointer",transition:"min-height 250ms "+y}},display:"flex",minHeight:l?328:128,justifyContent:"center",left:!0,padding:8,position:"fixed",right:!0,zIndex:Q,children:[!k&&(l?Z:X),Object(d.jsx)(c.f,{padding:"lg"===R||l?8:4,position:"lg"===R||l?"absolute":"static",right:!0,top:l,children:Object(d.jsx)(c.w,{accessibilityLabel:r.a._("Dismiss icon button","relatedInterestsBanner.button.dismiss","Icon button to close banner"),icon:"cancel",iconColor:"darkGray",onClick:e})})]})}),C.map(e=>I[e.id]?Object(d.jsx)(h,{anchor:U,interest:e,endAnimation:Y},e.id):null)]}):null;var J}function S({onDismiss:e,pinId:t}){const{data:n}=Object(b.a)({name:"PinInterestsResource",options:{hideFollowed:!0,limit:6,pinId:t}});return Object(d.jsx)(C,{onDismiss:e,relatedInterests:n,viewType:3})}function I({boardId:e,onDismiss:t}){const n=Object(x.b)("web_board_related_interests_banner"),{data:i}=Object(b.a)({name:"ApiResource",options:{url:`/v3/boards/${e}/interests/`,data:{deduping_enabled:!0,hide_followed:!0,limit:6},field_sets:["interest.background_color","interest.follower_count","interest.id","interest.images[400x]","interest.is_followed","interest.name","interest.type","interest.url_name"]}});return i&&i.length>5&&n().anyEnabled?Object(d.jsx)(C,{onDismiss:t,relatedInterests:i,viewType:3}):null}function T({query:e}){const{anyEnabled:t}=Object(x.a)("web_search_related_interests_banner");return t?Object(d.jsx)(C,{onDismiss:()=>{},relatedInterests:[],viewType:2}):null}},"6j0b":function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("8A+h");function o({board:e,viewer:t}){return Object(i.a)(t,e)?3069:3070}},"6uti":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,r=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,d=i?Symbol.for("react.provider"):60109,l=i?Symbol.for("react.context"):60110,u=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,b=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case u:case h:case a:case c:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case b:case d:return e;default:return t}}case g:case f:case r:return t}}}function j(e){return m(e)===h}t.typeOf=m,t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=d,t.Element=o,t.ForwardRef=b,t.Fragment=a,t.Lazy=g,t.Memo=f,t.Portal=r,t.Profiler=c,t.StrictMode=s,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===h||e===c||e===s||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===d||e.$$typeof===l||e.$$typeof===b)},t.isAsyncMode=function(e){return j(e)||m(e)===u},t.isConcurrentMode=j,t.isContextConsumer=function(e){return m(e)===l},t.isContextProvider=function(e){return m(e)===d},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return m(e)===b},t.isFragment=function(e){return m(e)===a},t.isLazy=function(e){return m(e)===g},t.isMemo=function(e){return m(e)===f},t.isPortal=function(e){return m(e)===r},t.isProfiler=function(e){return m(e)===c},t.isStrictMode=function(e){return m(e)===s},t.isSuspense=function(e){return m(e)===p}},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"75Er":function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("+NLT"),r=n("m2Wt"),a=n("h4v/");function s(e,t){Object(i.useEffect)(()=>{if(e){const t=r.a.fromPlainObject(e);t.setEventType(13),t.setRequestIdentifier(o.a.initialPageContext.PAGE_LOAD_REQUEST_IDENTIFIER),a.a.getInstance().addEvent(t)}},[t])}function c(e){const{children:t,log:n}=e;return s(n),t||null}},"79tv":function(e,t,n){function i(e=""){return e+"_tools/more-ideas/"}n.d(t,"a",(function(){return i}))},"7nh8":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_COORDS="dnd-core/INIT_COORDS",t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",t.HOVER="dnd-core/HOVER",t.DROP="dnd-core/DROP",t.END_DRAG="dnd-core/END_DRAG"},"7pfs":function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("q1tI");function o({children:e}){const[t,n]=Object(i.useState)(!1),[o,r]=Object(i.useState)(!1),[a,s]=Object(i.useState)(!1);return e({active:t,focused:o,hovered:a,onBlur:()=>{r(!1),n(!1)},onFocus:()=>r(!0),onMouseDown:()=>n(!0),onMouseEnter:()=>s(!0),onMouseLeave:()=>{s(!1),n(!1)},onMouseUp:()=>n(!1)})}},"8BbR":function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("Ye/N"),o=n("eBDd"),r=n("n6mq"),a=n("nKUr");function s({pinCount:e,height:t,size:n}){const s=Object(o.a)(i.a._("+{{ pinCount }}","+N count overlay on pin selections","+N count overlay on pin selections"),{pinCount:e});return Object(a.jsx)(r.f,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,.2)"}},display:"flex",justifyContent:"center",height:t,children:"sm"===n?Object(a.jsx)(r.ab,{color:"white",size:"md",weight:"bold",children:s}):Object(a.jsx)(r.u,{color:"white",size:"md",children:s})})}function c({additionalPinCount:e,additionalPinCountSize:t="lg",pin:n,width:i,height:o,rounded:c}){return Object(a.jsx)(r.C,{height:o,width:i,rounding:c?4:0,wash:!0,children:n&&Object(a.jsx)(r.x,{alt:n.description,color:n.dominantColor,fit:"cover",naturalHeight:o,naturalWidth:i,src:n.imageUrl,children:!!e&&Object(a.jsx)(s,{pinCount:e,height:o,size:t})})})}},"8Enz":function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("Ye/N"),o=n("n6mq"),r=n("nKUr");function a({onUpdate:e,showLabel:t=!0,value:n}){const a=[{label:i.a._("Easy","storyboard.detailsList.field.difficulty","Easy difficulty rating for story pin"),value:String(1)},{label:i.a._("Intermediate","storyboard.detailsList.field.difficulty","Medium difficulty rating for story pin"),value:String(2)},{label:i.a._("Expert","storyboard.detailsList.field.difficulty","Hard difficulty rating for story pin"),value:String(3)},{label:i.a._("Not applicable","storyboard.detailsList.field.difficulty","Difficulty rating does not apply for story pin"),value:String(0)}];return Object(r.jsx)(o.f,{width:"100%",display:"flex",children:Object(r.jsx)(o.f,{width:"100%",children:Object(r.jsx)(o.R,{size:"lg",id:"servings",name:"servings",label:t?i.a._("Difficulty","storyboard.detailsList.field.difficulty","Header title for difficulty rating entry for story pin"):void 0,placeholder:i.a._("Pick a difficulty rating","storyboard.detailsList.field","Placeholder caption for difficulty rating input in story pin"),value:n,options:a,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},"8cMa":function(e,t,n){var i=n("Ye/N"),o=n("n6mq"),r=n("nKUr");t.a=function({type:e}){const t={group:{accessibilityLabel:i.a._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:i.a._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:i.a._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:i.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:i.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return Object(r.jsx)(o.f,{marginStart:1,children:Object(r.jsx)(o.f,{marginStart:2,children:"sections"===e||"sectionsInline"===e?Object(r.jsx)(o.v,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):Object(r.jsx)(o.v,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})})})}},"9EBm":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("+k3R"),o=n("slCJ"),r=n("4vzw"),a=n("5ARb"),s=n("nrB0"),c=n("nwWm"),d=n("E3gc"),l=n("QWfI"),u=n("2S0S");t.default=function(e,t,n,h){void 0===h&&(h={}),i.default("DragSource","type, spec, collect[, options]",e,t,n,h);var b=e;"function"!=typeof e&&(u(d.default(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),b=function(){return e}),u(l.isPlainObject(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var p=a.default(t);return u("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),u(l.isPlainObject(h),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),function(e){return o.default({containerDisplayName:"DragSource",createHandler:p,registerHandler:r.default,createConnector:function(e){return new c.default(e)},createMonitor:function(e){return new s.default(e)},DecoratedComponent:e,getType:b,collect:n,options:h})}}},"9Nap":function(e,t,n){var i=n("/9aa");e.exports=function(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},"9QW3":function(e,t,n){n.d(t,"a",(function(){return a}));const i={row:0,section:0},o={row:-1,section:-1},r=()=>{};class a{constructor(e){this.index=Object.assign({},i),this.sections=e,this.updateCallback=r,this.selectItem=r}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===o.row&&t===o.section?this.index=Object.assign({},i):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===o.row&&t===o.section)this.index=Object.assign({},i);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},o),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},"9X5u":function(e,t,n){var i=n("P9b8"),o=(n("rg+c"),n("aUfZ")),r=n("ANjH");t.a=e=>t=>Object(r.compose)(o.a,Object(i.DropTarget)(e,{},(e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()})))(t)},"9b+k":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFromDataTransfer=function(e,t,n){var i=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=i?i:n}},"9ggG":function(e,t,n){var i=n("Z0cm"),o=n("/9aa"),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(a.test(e)||!r.test(e)||null!=t&&e in Object(t))}},"9ip6":function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));function i(e,t){return e.itemIndex===t.itemIndex&&e.regionWithinItem===t.regionWithinItem}function o({hoverRelativePosition:{positionRelativeToCenter:{x:e},boundingBox:{width:t}},centerEnabled:n}){const i=n?.5*t:0;return Math.abs(e)<i/2?"center":e<0?"left":"right"}function r({hoverLocation:{itemIndex:e,regionWithinItem:t},sourceIndex:n}){if("center"===t||e===n)return e;const i="left"===t;return e<n===i?e:i?e-1:e+1}},A6Hx:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("q1tI"),o=n("Ye/N"),r=n("TgLd"),a=n("n6mq"),s=n("U4JR"),c=n("nKUr");function d({children:e,objectId:t,onHide:n}){const d={component:13141,objectId:t};return Object(i.useEffect)(()=>{Object(s.b)(6359,d)},[t]),Object(c.jsx)(r.b,{accessibilityModalLabel:o.a._("Pincode","pincode.pincodemodal.label","Accessible label for a modal showing the pincode modal"),heading:o.a._("Pincode","pincode.pincodemodal.heading","Heading for a modal showing the pincode."),onDismiss:()=>{n(),Object(s.b)(6358,d)},size:"sm",children:Object(c.jsx)(a.f,{display:"flex",justifyContent:"center",children:e})})}},AAEI:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("/MKj"),o=n("ANjH"),r=n("vh5K"),a=n("Vzit");function s(e){const t=Object(i.useDispatch)(),n=Object(i.useSelector)(e=>e.experiences.eligibleExperiences),s=Object(i.useSelector)(e=>e.experiences.mountedPlacements);return{experienceForPlacement:e?Object(r.c)(n,s,e):null,...Object(o.bindActionCreators)({completeExperience:a.a,dismissExperience:a.b,fetchAllExperiences:a.d,fetchExperienceForPlacement:a.c,triggerExperimentsForPlacement:a.k,viewExperience:a.j},t)}}},AP2z:function(e,t,n){var i=n("nmnc"),o=Object.prototype,r=o.hasOwnProperty,a=o.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var t=r.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(c){}var o=a.call(e);return i&&(t?e[s]=n:delete e[s]),o}},"B/xd":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("q1tI"),o=n("2S0S");function r(e,t){"function"==typeof e?e(t):e.current=t}t.default=function(e,t){var n=e.ref;return o("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?i.cloneElement(e,{ref:function(e){r(t,e),n&&r(n,e)}}):i.cloneElement(e,{ref:t})}},B6Tf:function(e,t,n){n.d(t,"a",(function(){return fe})),n.d(t,"b",(function(){return ge}));var i=n("q1tI"),o=n("b/K5"),r=n("/MKj"),a=n("JW66"),s=n("Ye/N"),c=n("GBVV"),d=n("/WHw"),l=n("pLLR"),u=n("fZbY"),h=n("oRM1"),b=n("FDmi"),p=n("yaUg"),f=n("n6mq"),g=n("nKUr");function m(e){const{body:t,img:n,onClick:i,selected:o,title:r,username:a,valid:c}=e,d=a||t;return Object(g.jsx)(f.f,{marginBottom:4,children:Object(g.jsx)(f.Z,{onTap:i,children:Object(g.jsxs)(f.f,{alignItems:"center",direction:"row",display:"flex",width:"100%",children:[n,Object(g.jsxs)(f.f,{flex:"grow",marginEnd:2,marginStart:3,children:[Object(g.jsx)(f.f,{marginBottom:1,children:Object(g.jsx)(f.ab,{truncate:!0,weight:"bold",children:r})}),Object(g.jsx)(f.ab,{size:"sm",truncate:!0,children:d})]}),Object(g.jsx)(f.f,{marginStart:2,children:(l=o,u=c,a?l?Object(g.jsx)(f.v,{accessibilityLabel:s.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites","Alt tags on a check box on the board create flow for board invites"),color:"red",icon:"check-circle",size:32}):Object(g.jsx)(f.f,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):Object(g.jsx)(f.g,{color:"gray",disabled:!!l||Boolean(!u),inline:!0,size:"sm",text:l?s.a._("Sent","Sent a board collaborator invite","Sent a board collaborator invite"):s.a._("Invite","Add board collaborator invite","Add board collaborator invite")}))})]})})});var l,u}var j=n("ZE2w"),v=n("w70y");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t,n){const{id:i}=e;return t===n.findIndex(e=>e.id===i)}class y extends i.Component{constructor(...e){super(...e),O(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),O(this,"isIdSelected",{}),O(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),O(this,"handleCollaboratorClick",e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const{selectedCollaborators:i}=this.state,o=i.concat([e]),r="email"===n?j.c:j.d;this.props.onSelectedCollaboratorsChange({id:t,resource:r}),this.setState({selectedCollaborators:o})}),O(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})})}componentDidMount(){this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const i="email"===n?j.c:j.d;return this.props.onSelectedCollaboratorsChange({id:t,resource:i}),null})}render(){const{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,n=t||[],i=(""===e?this.state.selectedCollaborators.concat(n).filter(x):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:Object(u.a)(e)}).concat(n).filter(x)).map(e=>function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){const i=Object(g.jsx)(b.a,{name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return Object(g.jsx)(m,{img:i,onClick:()=>n(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const{id:i,valid:o}=e,r=Object(g.jsx)(f.f,{alignItems:"center",color:"lightGray",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:Object(g.jsx)(f.v,{accessibilityLabel:s.a._("Email icon","Email icon on board create modal","Email icon on board create modal"),color:"darkGray",icon:"envelope",size:20})}),a=Object(p.a)(s.a._("Email {{ email }}"),{email:i});let c,d;return t?(c=s.a._("Done!","Text that lets the user know we sent the board invite email","Text that lets the user know we sent the board invite email"),d=()=>{}):(c=o?s.a._("Click to send!","Text that lets the user know they can successfully send a board invite email","Text that lets the user know they can successfully send a board invite email"):s.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet","Text that lets a user know the email they are typing is not valid yet"),d=()=>o?n(e):void 0),Object(g.jsx)(m,{body:c,img:r,onClick:d,selected:t,title:a,valid:o})}}(e,this.isIdSelected[e.id],this.handleCollaboratorClick)).map((e,t)=>Object(g.jsx)("li",{children:e},t));return Object(g.jsxs)(f.f,{direction:"column",display:"flex",height:"100%",children:[Object(g.jsx)(f.f,{paddingX:3,paddingY:2,children:Object(g.jsx)(f.ab,{size:"sm",children:s.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create","Optional field to add collaborators to a board on board create")})}),Object(g.jsx)(f.f,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:Object(g.jsx)(f.f,{flex:"grow",children:Object(g.jsx)(h.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:Object(g.jsx)(f.P,{accessibilityLabel:s.a._("Search for collaborators by name or email"),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:s.a._("Search by name or email"),size:"lg",value:e})})})}),Object(g.jsx)(f.f,{overflow:"scrollY",paddingX:3,children:Object(g.jsx)("ul",{children:i})})]})}}var _=Object(v.b)({name:"ShareSuggestionsResource",key:"shareSuggestionsResource",allowStale:!1})(y);var w=Object(d.a)((function({createBoardError:e,inputName:t,nameValidatorErrors:n,onBoardCreate:o,onCancel:r,onChangeBoardName:d,onChangeBoardPrivacy:u,onInvite:h,privacy:b,preselectedCollaborators:p,saving:m,showTitle:j,isAdAccountOwner:v}){const{isRTL:O}=Object(l.d)(),x=0===n.length,y=b===a.a.BoardPrivacy.SECRET;return Object(g.jsx)(f.f,{color:"white",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:Object(g.jsx)("form",{onSubmit:e=>{e.preventDefault(),o()},style:{height:"100%"},children:Object(g.jsxs)(f.f,{direction:"column",display:"flex",height:"100%",children:[j&&Object(g.jsx)(f.f,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:Object(g.jsx)(f.u,{size:"sm",children:s.a._("Create board")})}),Object(g.jsxs)(f.f,{padding:3,children:[Object(g.jsx)(f.f,{marginBottom:2,children:Object(g.jsx)(f.y,{htmlFor:"boardEditName",children:Object(g.jsx)(f.ab,{size:"sm",children:s.a._("Name")})})}),Object(g.jsx)(f.f,{children:Object(g.jsx)(f.cb,{errorMessage:n.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>d(e),placeholder:s.a._('Like "Places to Go" or "Recipes to Make"'),size:"lg",value:t})})]}),v&&Object(g.jsxs)(i.Fragment,{children:[Object(g.jsxs)(f.f,{padding:3,children:[Object(g.jsx)(f.f,{marginBottom:2,children:Object(g.jsx)(f.y,{htmlFor:"secret",children:Object(g.jsx)(f.ab,{size:"sm",children:s.a._("Secret","secret board","secret board")})})}),Object(g.jsx)(f.f,{children:Object(g.jsx)(f.V,{id:"secret",onChange:u,switched:y})})]}),Object(g.jsx)(f.f,{display:"flex",flex:"grow",overflow:"hidden",children:Object(g.jsx)(f.f,{width:"100%",children:Object(g.jsx)(_,{onSelectedCollaboratorsChange:h,preselectedCollaborators:p})})})]}),!v&&Object(g.jsx)(i.Fragment,{children:Object(g.jsxs)(f.f,{padding:3,children:[Object(g.jsx)(f.f,{marginBottom:2,children:Object(g.jsx)(f.y,{htmlFor:"protected",children:Object(g.jsx)(f.ab,{size:"sm",children:s.a._("Protected board (not listed on user's profile)","protected board","protected board")})})}),Object(g.jsx)(f.f,{children:Object(g.jsx)(f.V,{disabled:!0,id:"protected",onChange:()=>{},switched:!0})})]})}),Object(g.jsxs)(f.f,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},display:"flex",justifyContent:"between",left:O,paddingX:4,paddingY:2,position:"absolute",right:!O,width:720,children:[Object(g.jsx)(f.g,{inline:!0,onClick:r,text:s.a._("Cancel","cancel board create","cancel board create")}),Object(g.jsxs)(f.f,{display:"flex",justifyContent:"end",children:[!!e&&Object(g.jsx)(f.f,{paddingX:2,children:Object(g.jsx)(f.ab,{align:"center",color:"red",size:"md",weight:"bold",children:e})}),Object(g.jsx)(c.b,{disabled:!t.trim()||!x||!!e||m,submitting:m,text:s.a._("Create","create a new board","create a new board")})]})]})]})})})})),C=n("6A0I"),S=n("qyR9"),I=n("0BOE");class T extends i.Component{constructor(...e){var t,n,i;super(...e),i=e=>{const{board:t,sectionsResource:{data:n}}=this.props;return e.length>=2?[{items:Object(I.a)([t],e),customProps:{inSectionSelection:!0}},{items:Object(I.a)(n,e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0}},{items:n}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const{sectionsResource:{error:e,isLoaded:t},boardSavedTo:n,isSelectMode:i,onSectionCreate:o,onSectionSelected:r,pinId:a}=this.props;return Object(g.jsx)(S.a,{isSelectMode:i,boardSavedTo:n,createButtonLabel:s.a._("Add section","Button for creating a board section","Button for creating a board section"),hasLoadError:!!e,isLoaded:t,getSections:this.getSections,onCreate:o,onSelected:r,pinId:a})}}var E=Object(v.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})})(T),P=n("Wer7"),D=n("U4JR"),B=n("ANjH");function k(e,t,n){return{...e?{pin_id:e}:{},...t?{username:t}:{},...n?{advertiser_id:n,filter:"protected"}:{},field_set_key:"board_picker",limit:undefined,shortlist_suggestions:2}}class M extends i.Component{constructor(...e){var t,n,i;super(...e),i=e=>{const{boardResource:{data:t}}=this.props;if(!t)return[];const{all_boards:n,boards_shortlist:i}=t,o=(e=>{const t=[],n=[];return e.forEach(e=>{var i;null!==(i=e.name)&&void 0!==i&&i.match(/^\d/)?n.push(e):t.push(e)}),[...t,...n]})(n);return o.length<=3?[{items:o}]:e.length>=2?[{items:Object(I.a)(o,e)}]:[i.length?{items:i,title:s.a._("Top choices")}:{items:[]},{items:o,title:s.a._("All boards","title for board picker all boards section","title for board picker all boards section")}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const{boardResource:{data:e,error:t,isLoaded:n},boardSavedTo:i,isSelectMode:o,onBoardCreate:r,onBoardSelected:a,pinId:s}=this.props,c=n&&!!e&&e.all_boards.length<=3;return Object(g.jsx)(S.a,{isSelectMode:o,boardSavedTo:i,hasLoadError:!!t,hasLowBoardCount:c,isLoaded:n,getSections:this.getSections,onCreate:r,onSelected:a,pinId:s})}}var R=Object(B.compose)(Object(r.connect)((function(e){const{advertiser:t,viewer:n}=e;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}})),Object(v.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>k(e.pinId,e.username,e.advertiser_id)}))(M);function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class L extends i.Component{constructor(...e){super(...e),A(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),A(this,"close",()=>{const{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:n}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):n()}),A(this,"sendInvites",e=>{const{inviteQueue:t}=this.state;Object.keys(t).forEach(n=>{t[n].resource(e.id,[n])})}),A(this,"handleInvite",e=>{const{inviteQueue:t}=this.state;if(t[e.id]){const n={...t};delete n[e.id],this.setState({inviteQueue:n})}else{const n=Object.assign({},t,{[e.id]:e});this.setState({inviteQueue:n})}}),A(this,"handleBoardCreate",e=>{const{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),A(this,"handleBoardSave",(e,t)=>{const{selectedSectionBoard:n}=this.state,{onBoardSave:i,invalidatePinBetterSaveResource:o,invalidateResource:r}=this.props;if(r(),o(),n&&"board_section"===e.type){return i(n,e,t)}const a=e,{section_count:s=0}=a;!n&&"number"==typeof s&&s>0?this.setState({selectedSectionBoard:a},this.manageModalTitle):(this.sendInvites(e),i(a,void 0,t))}),A(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle);const n=e?13105:13025,i=e?10306:249;Object(D.b)(101,{component:n,element:i})}),A(this,"manageModalTitle",()=>{const{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:n}=this.state;e&&e(n&&t?s.a._("Add section","Repin title for making a board section","Repin title for making a board section"):n&&!t?s.a._("Create board","Repin title for making a new board","Repin title for making a new board"):t&&!n?s.a._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section"):s.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board"))})}render(){const{boardSavedTo:e,isRepin:t,isSelectMode:n,onToggleFlyout:i,pinId:o,preselectedCollaborators:r,setModalTitle:a,suggestedBoardTitle:s}=this.props,{newName:c,selectedSectionBoard:d,showCreate:l}=this.state,u=!!d,h=!a;return Object(g.jsxs)(f.f,{display:"flex",position:"relative",width:"100%",children:[!l&&Object(g.jsx)(f.f,{direction:"column",display:"flex",marginTop:4,width:"100%",children:d?Object(g.jsx)(E,{board:d,boardSavedTo:e,isSelectMode:n,onSectionCreate:this.handleCreate(u),onSectionSelected:this.handleBoardSave}):Object(g.jsx)(R,{boardSavedTo:e,isSelectMode:n,onBoardCreate:this.handleCreate(u),onBoardSelected:this.handleBoardSave,pinId:o})}),l&&!d&&Object(g.jsx)(w,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,onToggleFlyout:i,pinId:o,prefilledName:c||s,preselectedCollaborators:r,showTitle:h}),l&&d&&Object(g.jsx)(C.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:c,isRepin:t,onClearModal:this.close,showTitle:h})]})}}var N=Object(r.connect)(null,(function(e,t){return{invalidateResource:()=>{e(Object(P.f)("BoardPickerBoardsResource",k(t.pinId)))},invalidatePinBetterSaveResource:()=>{e(Object(P.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))(L),F=n("TgLd"),U=n("v+PR"),H=n("1inl"),z=n("K316"),q=n("TvzZ");const G="publish_actions",W={checkFbTimelinePermission:function(e){Object(q.default)((function(t){t.api("/me/permissions",t=>{const n=t.data;let i=!1;if(n){i=!!n.find(e=>e.permission===G&&"granted"===e.status)}i?e.success&&e.success():e.error&&e.error()})}),z.a)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t){Object(q.default)(n=>{if(!W.fbConnectedAccountMatchesLoggedInAccount(n,t))return H.a.showError(s.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());W.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){W.fbLogin(e)}})},z.a)},fbLogin:function(e){Object(q.default)(t=>{t.login(t=>{t.authResponse?W.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:G})},z.a)}};var Y=W,K=n("G35+"),V=n("mBfy"),X=n("v/Q4");function Z({onSocialConnect:e}){const t=Object(X.a)(),{data:n,isLoaded:o}=Object(v.a)({name:"UserResource",options:{user_id:t&&t.isAuth?t.id:"",field_set_key:"social_connect"}}),[r,a]=Object(i.useState)(!!(o&&n&&n.facebook_publish_stream_enabled)),[c,d]=Object(i.useState)(!!(o&&n&&n.twitter_publish_enabled));if(Object(i.useEffect)(()=>{o&&n&&(a(!!n.facebook_publish_stream_enabled),d(!!n.twitter_publish_enabled))},[n,o]),!n)return null;const{connected_to_facebook:l,twitter_url:u}=n,h=t=>{a(t),V.default.set("facebook_publish_stream_enabled",t),e(K.a.FACEBOOK,t)};return!(!l&&!u)&&Object(g.jsxs)(f.f,{display:"flex",padding:2,children:[l&&Object(g.jsxs)(f.f,{display:"flex",alignItems:"center",marginStart:2,children:[Object(g.jsx)(f.k,{checked:r,id:"share_facebook",onChange:()=>{r?h(!1):Y.maybeRequestFbTimelinePermission({success:()=>h(!0),error:()=>h(!1)})},size:"sm"}),Object(g.jsx)(f.y,{htmlFor:"share_facebook",children:Object(g.jsx)(f.f,{marginStart:2,children:Object(g.jsx)(f.ab,{children:s.a._("Post to Facebook")})})})]}),u&&Object(g.jsxs)(f.f,{display:"flex",alignItems:"center",marginStart:5,children:[Object(g.jsx)(f.k,{checked:c,id:"share_twitter",onChange:()=>{const t=!c;d(t),e(K.a.TWITTER,t)},size:"sm"}),Object(g.jsx)(f.y,{htmlFor:"share_twitter",children:Object(g.jsx)(f.f,{marginStart:2,children:Object(g.jsx)(f.ab,{children:s.a._("Post to Twitter")})})})]})]})}var Q=n("Sihc");var J=({board:e,completeCreateSectionAction:t,height:n,onClose:o,pinImport:a,url:c,width:d})=>{const l=Object(r.useDispatch)(),[u,h]=Object(i.useState)(""),[b,p]=Object(i.useState)(!1),[m,j]=Object(i.useState)(null);return Object(g.jsx)(F.b,{accessibilityModalLabel:s.a._("Repin modal","save.pinToBoard.modal.label","Accessibility label on modal"),heading:Object(g.jsx)(f.f,{padding:8,children:Object(g.jsx)(f.s,{alignItems:"center",children:Object(g.jsx)(f.f,{width:"66%",marginStart:"auto",children:Object(g.jsxs)(f.s,{justifyContent:"between",children:[Object(g.jsx)(f.u,{size:"md",children:s.a._("Add section","sectionCreateModal.title","Title in the add section modal")}),Object(g.jsx)(f.w,{icon:"cancel",accessibilityLabel:s.a._("Close","sectionCreateModal.closeButton","close section create modal button"),size:"md",iconColor:"darkGray",onClick:o})]})})})}),footer:Object(g.jsx)(f.s,{children:Object(g.jsx)(f.f,{marginStart:"auto",children:Object(g.jsx)(f.g,{text:s.a._("Add","sectionCreateModal.add.button","add a new section"),color:"red",onClick:()=>{e&&(p(!0),l(Object(Q.a)({boardId:e.id,name:u.trim(),pinImport:a})).then(n=>{t(e,n,!1)}).catch(e=>{j(e.message||e.message_detail)}).finally(()=>{p(!1)}))},disabled:b||!u.trim()||!!m,size:"lg"})})}),onDismiss:o,size:"sm",children:Object(g.jsx)(f.f,{padding:8,children:Object(g.jsxs)(f.s,{children:[Object(g.jsx)(f.C,{rounding:4,height:n,width:d,children:Object(g.jsx)(f.x,{alt:"",fit:"cover",src:c||"",naturalHeight:n,naturalWidth:d})}),Object(g.jsx)(f.f,{marginStart:8,dangerouslySetInlineStyle:{__style:{width:`calc(100% - ${d}px)`}},children:Object(g.jsx)(f.cb,{id:"sectionEditName",onChange:e=>{h(e.value)},placeholder:s.a._('Like "Lighting"',"sectionCreateModal.boardSection.name","Placeholder for board section name"),label:s.a._("Name","section.create.label","label text for section input"),size:"lg",type:"text",value:u})})]})})})};function $(){return Object(g.jsxs)(f.f,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",children:[Object(g.jsx)(f.T,{accessibilityLabel:s.a._("Pins being saved to new sections","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","accessibility label on spinner"),show:!0}),Object(g.jsx)(f.f,{paddingY:2,children:Object(g.jsx)(f.u,{children:s.a._("Hold, please...","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Heading on modal while saving pins")})}),Object(g.jsx)(f.ab,{children:s.a._("We're grouping the ideas you picked into sections. This will help organize all your ideas!","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Text explaining new pins are being saved")})]})}var ee=n("82UD");function te({index:e,pin:t,sectionName:n}){const o=t.id,r=Object(i.useContext)(de),[a,s]=Object(i.useState)(!1),c=Object(i.useCallback)(({event:e})=>{e.preventDefault(),e.stopPropagation(),r({type:a?"unselect":"select",payload:{sectionName:n,pinId:o}}),s(!a)},[o,a]);return Object(g.jsx)(f.Z,{onTap:c,rounding:4,children:Object(g.jsx)(ee.a,{attributionOption:"hide",blockClickEvents:!0,pin:t,pinId:t.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:a?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}})})}var ne=Object(i.memo)((function({sectionSuggestion:e,showSpinner:t}){const n=Object(i.useRef)(),o=Object(v.a)({name:"BatchP2PResource",options:{clientType:"84",page_size:10,pinIds:e.pins.map(e=>e.id)},allowStale:!1});return Object(g.jsxs)(i.Fragment,{children:[Object(g.jsx)(f.f,{display:"flex",justifyContent:"center",width:"100%",children:Object(g.jsx)(f.T,{accessibilityLabel:s.a._("Loading pins","save.pin-to-board.PinToBoard.SectionSuggestions.SectionPinsSelection","Accessibility label on a loading spinner"),show:t&&o.isFetching})}),o.data&&Object(g.jsx)(f.f,{paddingY:4,paddingX:8,children:Object(g.jsx)(f.u,{align:"start",size:"sm",children:e.name})}),Object(g.jsx)(f.f,{ref:n,children:o.data&&n&&n.current&&Object(g.jsx)(f.D,{columnWidth:152,comp:({data:t,itemIdx:n})=>Object(g.jsx)(te,{index:n,pin:t,sectionName:e.name}),gutterWidth:16,items:o.data||[],loadItems:()=>{},scrollContainer:()=>n.current})})]})}),(e,t)=>e.sectionSuggestion.id===t.sectionSuggestion.id);function ie({canSubmit:e,handleClose:t,handleSubmit:n,sectionSuggestions:o}){Object(i.useEffect)(()=>{const e=[];o.forEach(t=>e.push(t.name)),Object(D.b)(13,{suggested_section_names_viewed:e,view:1,viewParameter:3461})},[o]);return Object(g.jsx)(i.Fragment,{children:Object(g.jsxs)(f.f,{width:"100%",children:[Object(g.jsx)(f.f,{minHeight:"100%",marginBottom:12,width:"100%",children:o.map((e,t)=>Object(g.jsx)(f.f,{marginBottom:4,children:Object(g.jsx)(ne,{sectionSuggestion:e,showSpinner:0===t})},e.name))}),Object(g.jsx)(f.f,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",position:"sticky"}},display:"flex",justifyContent:"end",padding:4,width:720,children:Object(g.jsx)(f.g,{color:e?"red":"gray",inline:!0,size:"lg",text:e?s.a._("Next","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"):s.a._("Skip","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"),onClick:()=>{e?n():t()}})})]})})}function oe({handleClose:e,handleSubmit:t,suggestions:n}){const[o,r]=Object(i.useState)({}),a=!!Object.keys(o).length;return Object(g.jsxs)(f.f,{children:[Object(g.jsx)(f.f,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{height:"calc(100% - 88px)"}},children:Object(g.jsx)(f.f,{display:"flex",wrap:!0,height:360,paddingX:6,children:n.map(e=>Object(g.jsx)(f.f,{paddingX:1,height:160,children:Object(g.jsx)(f.Z,{onTap:()=>{const t={...o};t[e.name]?delete t[e.name]:t[e.name]=e,r(t)},rounding:6,children:Object(g.jsx)(f.f,{rounding:7,dangerouslySetInlineStyle:{__style:{border:o[e.name]?"2px solid #111":"2px solid white",padding:"2px"}},children:Object(g.jsxs)(f.f,{height:160,width:152,position:"relative",rounding:6,children:[Object(g.jsx)(f.C,{rounding:6,height:160,width:152,children:Object(g.jsx)(f.x,{alt:e.name,fit:"cover",naturalHeight:e.images["236x"].height,naturalWidth:e.images["236x"].width,src:e.images["236x"].url})}),Object(g.jsx)(f.f,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},display:"flex",height:160,justifyContent:"center",left:!0,paddingX:5,position:"absolute",rounding:6,top:!0,width:152,children:Object(g.jsx)(f.u,{align:"center",color:"white",size:"sm",children:e.name})})]})})})},e.name))})}),Object(g.jsx)(f.f,{display:"flex",width:"100%",justifyContent:"end",padding:5,children:Object(g.jsx)(f.g,{color:a?"red":"gray",inline:!0,size:"lg",text:a?s.a._("Next","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"):s.a._("Skip","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"),onClick:()=>{a?t(Object.values(o)):e()}})})]})}var re=n("M1Uz"),ae=n("6G9P"),se=n("EC67"),ce=n("nGHF");const de=Object(i.createContext)();function le(e,t){const{sectionName:n,pinId:i}=t.payload,o=[...e[n]||[]];switch(t.type){case"select":return{...e,[n]:[...o,i]};case"unselect":const t=o.indexOf(i);if(o.splice(t,1),!o.length){const t={...e};return delete t[n],t}return{...e,[n]:o};default:throw new Error("Unsupported action received by PinSelectionReducer")}}function ue({board:e,handleClose:t,setModalTitle:n,suggestions:o}){const[a,c]=Object(i.useState)("sections"),[d,l]=Object(i.useState)([]),[u,h]=Object(i.useState)([]),[b,p]=Object(i.useReducer)(le,{}),{showOneToast:f}=Object(ce.b)(),m=Object(r.useDispatch)(),j=Object(se.h)(),v=Object(i.useRef)(null);Object(i.useEffect)(()=>()=>{v.current&&clearTimeout(v.current)},[]),Object(i.useEffect)(()=>{const e=[];o.forEach(t=>e.push(t.name)),h(e)},[o]);const O=()=>{Object(D.b)(101,{component:20,view:52})},x=()=>{t(),f(({onHide:t})=>{var n;return Object(g.jsx)(re.a,{duration:fe,onHide:t,text:Object(ae.a)(e.name),href:e.url,imageUrl:null!==(n=e.image_cover_url)&&void 0!==n?n:"",onClick:O})}),Object(D.b)(101,{element:1150,view:1,viewParameter:3460,suggested_section_names:u})};return{sections:Object(g.jsx)(oe,{handleClose:x,handleSubmit:e=>{l(e),c("pins"),n&&n(s.a._("Great! Now pick some ideas to start off with.","save.pin-to-board.PinToBoard.SectionSuggestions.SectionSuggestionContainer","Modal title for choosing ideas for a new board"));const t=[];e.forEach(e=>t.push(e.name)),Object(D.b)(101,{element:96,suggested_section_names_selected:t,suggested_section_names_viewed:u,view:1,viewParameter:3460})},suggestions:o}),pins:Object(g.jsx)(de.Provider,{value:p,children:Object(g.jsx)(ie,{canSubmit:!!Object.keys(b).length,handleClose:x,handleSubmit:()=>{let t=0;c("saving"),n&&n(null);const i=d.reduce((e,t)=>(e[t.name]=null,e),{});let o=0;const r=[];Object.entries({...i,...b}).forEach(([n,i])=>{o+=Array.isArray(i)&&i.length,r.push({[n]:i}),m(Object(Q.a)({boardId:e.id,initialPinIds:i,name:n})).then(()=>{t+=1,t===d.length&&(v.current=setTimeout(()=>{var t;j.push(null!==(t=e.url)&&void 0!==t?t:"")},1500),Object(D.b)(101,{element:76,number_pins_selected:o,number_sections_selected:d.length,selected_pin_ids:JSON.stringify(r),suggested_section_names:u,view:1,viewParameter:3460}))})})},sectionSuggestions:d})}),saving:Object(g.jsx)($,{})}[a]}var he=n("Yo6N"),be=n("QAzJ");function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const fe=4e3,ge={LOADING:"loading",SUCCESS:"success"};class me extends i.PureComponent{constructor(...e){super(...e),pe(this,"state",{isFlyoutOpen:!1,isSavingPin:!1,newBoard:null}),pe(this,"pinImageRef",Object(i.createRef)()),pe(this,"unmounted",!1),pe(this,"handleSavePinToBoard",(e,t,n)=>{const{handleSaveToBoard:i,sectionSuggestions:o,setModalTitle:r}=this.props;i(e,t,n),n&&(this.setState({isSavingPin:!0,newBoard:e}),o&&o.length>0&&r&&r(s.a._("Let's build out your new board! What topics will it include?","save.pin-to-board.PinToBoard.SectionPickerModalTitle","Modal title for selection recommended sections for a new board")))}),pe(this,"handleToggleFlyout",()=>this.setState({isFlyoutOpen:!this.state.isFlyoutOpen})),pe(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),pe(this,"close",()=>{const{isFlyoutOpen:e}=this.state,{handleAbort:t}=this.props;e||t()}),pe(this,"dismissModal",e=>{const{dismissModal:t}=this.props;t&&t()})}componentWillUnmount(){this.unmounted=!0}render(){const{activateRemoveBoardSectionUpsell:e,boardSavedTo:t,boardWithSection:n,color:r,displaySuccessAnimation:a,handleNewBoardAnimationCompletion:c,handleSocialConnectSet:d,isInModal:l,newPin:u,pin:h,preselectedCollaborators:b,onBoardCreated:p,sectionSuggestions:m,sensitiveContentNotice:j,setModalTitle:v,showCreate:O,shouldRenderContent:x,suggestedBoardTitle:y,updateDescription:_}=this.props;if(!h||!h&&!h.resourceLoaded||!x)return null;const{isSavingPin:w,newBoard:C}=this.state;if(O&&n){var S;const{url:e,width:t,height:i}=(null===(S=h.images)||void 0===S?void 0:S["236x"])||{};return Object(g.jsx)(J,{board:n,url:e,height:i,width:t,onClose:this.close,completeCreateSectionAction:this.handleSavePinToBoard})}let I=null;u&&u.board&&(I=u.board.name);const T=j&&j.title||this.props.modalTitle,E=j?Object(g.jsx)(he.a,{inModal:!0,notices:[j]}):Object(g.jsx)(f.f,{display:"flex",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%",children:w&&C&&m&&m.length>0&&!e().group.startsWith("enabled")?Object(g.jsx)(ue,{board:C,handleClose:this.close,setModalTitle:v,suggestions:m}):Object(g.jsxs)(i.Fragment,{children:[Object(g.jsxs)(f.f,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[Object(g.jsxs)(f.f,{direction:"column",display:"flex",justifyContent:"between",width:"40%",children:[Object(g.jsx)(f.f,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:Object(g.jsx)(U.a,{color:r,pin:h,pinImageRef:this.pinImageRef,updateDescription:_})}),Object(g.jsx)(Z,{onSocialConnect:d})]}),Object(g.jsx)(f.f,{display:"flex",width:"60%",children:Object(g.jsx)(N,{boardSavedTo:t,boardWithSection:n,isRepin:!0,onBoardCreated:p,onBoardSave:this.handleSavePinToBoard,onClose:this.close,onToggleFlyout:this.handleToggleFlyout,pinId:h.id,preselectedCollaborators:b,setModalTitle:l?v:void 0,showCreate:O,suggestedBoardTitle:y})})]}),a&&Object(g.jsx)(o.a,{onDismiss:()=>{c(),this.dismissModal()},pin:h,pinImageRef:this.pinImageRef,selectedBoardName:I})]})});return l?Object(g.jsx)(F.b,{accessibilityModalLabel:T||s.a._("Repin modal","save.pin-to-board.PinToBoard.PinToBoard","Accessibility label on modal"),heading:T,onDismiss:this.close,size:"md",children:E}):E}}pe(me,"defaultProps",{pwtAuxData:{}});t.c=function(e){const t=Object(be.b)("web_remove_board_section_upsell");return Object(g.jsx)(me,{...e,activateRemoveBoardSectionUpsell:t})}},BEzM:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n("7nh8"),r=n("LTlA"),a=n("QLaP");t.default=function(e){return function(t){void 0===t&&(t={});var n=e.getMonitor(),s=e.getRegistry();!function(e){a(e.isDragging(),"Cannot call drop while not dragging."),a(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n),function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n).forEach((function(c,d){var l=function(e,t,n,i){var o=n.getTarget(e),s=o?o.drop(i,e):void 0;(function(e){a(void 0===e||r.isObject(e),"Drop result must either be an object or undefined.")})(s),void 0===s&&(s=0===t?{}:i.getDropResult());return s}(c,d,s,n),u={type:o.DROP,payload:{dropResult:i({},t,l)}};e.dispatch(u)}))}}},BUdX:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("sErn"),o=n("+NLT"),r=n("jZXB");let a=null;const s={fromDesktopContextProps(e){const{context:t,context:{user:n={}}}=e;return{advertiser:t.advertiser?t.advertiser:null,country:t.country,deepLink:t.deep_link,experiments:e.experiments,fullPath:t.full_path,isAmp:!1,isAuthenticated:t.is_authenticated,isBot:"true"===t.is_bot,isSocialBot:!!t.social_bot,isManagedAdvertiser:t.is_managed_advertiser,isRTL:["ar"].includes(t.language),language:t.language,legacyAdvertiser:null,locale:t.locale,loginState:n.login_state||void 0,origin:t.origin,regionFromIp:t.region_from_ip,unauthId:t.unauth_id,userAgent:{browserName:t.browser_name,browserVersion:t.browser_version,canUseNativeApp:t.user_agent_can_use_native_app,isTablet:t.is_tablet_agent,isMobile:t.is_mobile_agent,isRetina:t.is_retina,platform:t.user_agent_platform,platformVersion:t.user_agent_platform_version&&3===t.user_agent_platform_version.length?t.user_agent_platform_version:[0,0,0],raw:t.user_agent}}},fromLegacyContext:e=>({advertiser:null,country:e.country,deepLink:e.deep_link,experiments:e.experiments,fullPath:e.full_path,isAmp:!1,isAuthenticated:e.is_authenticated,isBot:"true"===e.is_bot,isSocialBot:!!e.social_bot,isManagedAdvertiser:e.is_managed_advertiser,isRTL:["ar"].includes(e.language),language:e.language,legacyAdvertiser:e.advertiser?e.advertiser:null,locale:e.locale,loginState:e.user&&e.user.login_state||void 0,origin:e.origin,regionFromIp:e.region_from_ip,unauthId:e.unauth_id,userAgent:{browserName:e.browser_name,browserVersion:e.browser_version,canUseNativeApp:e.user_agent_can_use_native_app,isTablet:e.is_tablet_agent,isMobile:e.is_mobile_agent,isRetina:e.is_retina,platform:e.user_agent_platform,platformVersion:e.user_agent_platform_version||[0,0,0],raw:e.user_agent}}),fromGlobalContext(){if(a)return a;const e=s.fromDesktopContextProps({context:o.a.instance,...Object(i.a)(o.a.instance)});var t;return t=o.a.instance,0!==Object.keys(t).length&&(a=e),e},__private_static_provider_fallback_value:()=>({country:"US",deepLink:"",fullPath:"",isAmp:!1,isAuthenticated:!1,isBot:!1,isSocialBot:!1,isManagedAdvertiser:!1,isRTL:!1,language:"en",locale:"en-US",unauthId:"asdasda",origin:"https://example.com",regionFromIp:"CA",userAgent:{browserName:"Chrome",browserVersion:"76.0.3809.132",platform:"OSX",platformVersion:[0,0,0],isTablet:!1,isMobile:!1,isRetina:!1,raw:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36"},experiments:new r.a,advertiser:null,legacyAdvertiser:null})}},BcvT:function(e,t,n){var i=n("q1tI"),o=n("nKUr");function r({anchor:e,children:t,zIndex:n}){const r=Object(i.useRef)(null),[a,s]=Object(i.useState)(0),[c,d]=Object(i.useState)(0),{height:l,width:u}=e.getBoundingClientRect();return Object(i.useEffect)(()=>{const{current:t}=r;if(e&&t){const{height:e,width:n}=t.getBoundingClientRect(),{horizontalOffset:i,verticalOffset:o}=((e,t,n,i)=>({horizontalOffset:-(i/2-t/2),verticalOffset:-(n/2-e/2)}))(l,u,e,n);s(i),d(o)}},[l,u,r.current]),Object(o.jsx)("div",{ref:r,style:{left:a,position:"absolute",top:c,zIndex:n},children:t})}var a=n("n6mq");t.a=function(e){const{anchor:t,onTouch:n,onMouseEnter:i,paused:s,size:c,zIndex:d}=e;return t?Object(o.jsx)(r,{anchor:t,zIndex:d,children:Object(o.jsx)(a.Z,{fullWidth:!1,onTap:({event:e})=>n(e),onMouseEnter:i,rounding:"circle",children:Object(o.jsx)(a.L,{paused:s,size:c})})}):null}},Bfq7:function(e,t,n){var i;Object.defineProperty(t,"__esModule",{value:!0});var o=n("QSJg"),r=n("9b+k");t.nativeTypesConfig=((i={})[o.FILE]={exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]},i[o.URL]={exposeProperties:{urls:function(e,t){return r.getDataFromDataTransfer(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]},i[o.TEXT]={exposeProperties:{text:function(e,t){return r.getDataFromDataTransfer(e,t,"")}},matchesTypes:["Text","text/plain"]},i)},BkRI:function(e,t,n){var i=n("OBhP");e.exports=function(e){return i(e,5)}},"Bn+j":function(e,t,n){var i=n("q1tI"),o=n("c4Fo"),r=n("NrS9"),a=n("n6mq"),s=n("nKUr");const c=[500329,503259,500410,500688];t.a=({placementId:e})=>{const[t,n]=Object(i.useState)(!0),d=()=>{n(!1)};return Object(s.jsx)(o.a,{placementId:e,experienceIds:c,children:({complete:e,dismiss:n})=>(r.a.instance().subscribe(e,n),t?Object(s.jsx)(a.Z,{fullWidth:!1,onTap:d,children:Object(s.jsx)("div",{className:"experienceSystemPushOverlay"})}):null)})}},CMye:function(e,t,n){var i=n("GoyQ");e.exports=function(e){return e==e&&!i(e)}},"Dw+G":function(e,t,n){var i=n("juv8"),o=n("mTTR");e.exports=function(e,t){return e&&i(t,o(t),e)}},DzJC:function(e,t,n){var i=n("sEfC"),o=n("GoyQ");e.exports=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),i(e,t,{leading:r,maxWait:t,trailing:a})}},E2hd:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("n6mq"),o=n("nKUr");function r(e){const{accessibilityLabel:t,bgColor:n,icon:r,onClick:a,selected:s,size:c}=e;return Object(o.jsx)(i.w,{accessibilityLabel:t,bgColor:null!=n?n:"transparent",icon:r,iconColor:"darkGray",onClick:a,selected:s,size:null!=c?c:"lg"})}},E3gc:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){return"string"==typeof t||"symbol"==typeof t||!!n&&Array.isArray(t)&&t.every((function(t){return e(t,!1)}))}},E8d4:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("q1tI");class o extends i.Component{constructor(...e){var t,n,i;super(...e),i={errorIsCaught:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidCatch(){this.setState({errorIsCaught:!0})}render(){const{children:e}=this.props,{errorIsCaught:t}=this.state;return t?null:e}}var r=n("nKUr");function a({children:e,errorBoundaryName:t,fallback:n,dangerouslyServerRenderForGraphQL:a=!1}){const s=n||null;return Object(r.jsx)(o,{...t?{name:t}:{},children:Object(r.jsx)(i.Suspense,{fallback:s,children:e})})}},EC51:function(e,t,n){var i=n("q1tI"),o=n("zwad"),r=n("n6mq"),a=n("gqRH"),s=n("nKUr");const c=Object(i.forwardRef)((e,t)=>{const{accessibilityLabel:n,children:i,forceTarget:c,hoverStyle:d,href:l,id:u,inline:h,onBlur:b,onClick:p,onFocus:f,rel:g,target:m}=e,j=o.a.isOffsiteUrl(l);return Object(s.jsx)(a.a,{href:l,target:!c&&j?null:m,children:({handleClick:e})=>Object(s.jsx)(r.B,{accessibilityLabel:n,hoverStyle:d,href:l,id:u,inline:h,onBlur:b,onClick:({event:t,disableOnNavigation:n})=>{n(),null==p||p({event:t}),e({event:t})},onFocus:f,ref:t,rel:j?"nofollow":g,target:c?m:null,children:i})})});c.displayName="Link",t.a=c},EDqd:function(e,t,n){n.d(t,"a",(function(){return a}));const i=["236x","474x","564x","736x"];function o(e){function t(e,{imageKey:t,height:n,width:i}){return e.images&&e.images[t]&&(e={...e,images:{...e.images,[t]:{...e.images[t],height:n,width:i}}}),e}const n=i.map((function(t){const n=Math.min(...e.map(e=>e.images&&e.images[t]&&e.images[t].height||1/0)),i=Math.min(...e.map(e=>e.images&&e.images[t]&&e.images[t].width||1/0));return{imageKey:t,height:n,width:i}}));return e.map(e=>n.reduce(t,e))}function r(e,t){return e.concat([{images:t&&t.canonical_images,image_signature:t&&t.image_signature}])}function a(e,t,n){const i=[{images:e}],a=t&&t.additional_images;return{carousel_slots:o((null!=a?a:[]).reduce(r,i)),index:n||0,id:t.id}}},EEGq:function(e,t,n){var i=n("juv8"),o=n("oCl/");e.exports=function(e,t){return i(e,o(e),t)}},ESls:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("0rqB"),o=n("pLLR"),r=n("nKUr");function a({activate:e,children:t,isEligible:n,name:a}){return Object(r.jsx)(o.b,{children:o=>Object(r.jsx)(i.a,{activate:e,activateExperiment:e=>o.experiments.v2ActivateExperiment(e)||"",group:o.experiments.v2GetGroup(a)||"",isEligible:n,name:a,children:t})})}},EhF7:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("Ye/N"),o=(n("lXCh"),n("nKUr"));function r({children:e}){return Object(o.jsx)("div",{className:"withoutBoxShadow",children:e})}var a=n("n6mq");function s({children:e,onClick:t}){return Object(o.jsxs)("div",{className:"relative",children:[Object(o.jsx)(a.f,{bottom:!0,left:!0,right:!0,top:!0,position:"absolute",children:Object(o.jsx)(r,{children:Object(o.jsx)(a.Z,{accessibilityLabel:i.a._("Drag and drop item","BulkEditPinWrapper.tapArea.accessibilityLabel","Label for item that can be dragged and dropped."),fullHeight:!0,fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),t()},rounding:2})})}),Object(o.jsx)("div",{style:{pointerEvents:"none"},children:e})]})}},EwHv:function(e,t,n){n.d(t,"a",(function(){return p}));var i=n("q1tI"),o=n("+wrf"),r=n("Ye/N"),a=n("3j7w"),s=n("n6mq"),c=n("nKUr");function d(e){const{fetchMore:t,invites:n,isAtEnd:i,isFetching:o,onBoardLeave:d,refreshData:l,scroll:u,renderInvite:h}=e;return Object(c.jsxs)("div",{children:[u&&Object(c.jsx)(a.a,{scrollBuffer:3*u.container.clientHeight,scrollHeight:u.container.scrollHeight,scrollTop:u.top,isAtEnd:i,isFetching:o,fetchMore:t}),n.map((e,t)=>e&&e.invited_user&&e.invited_user.id?Object(c.jsx)(s.f,{children:h(e,d,l)},t):null),o&&!i&&Object(c.jsx)(s.T,{accessibilityLabel:r.a._("loading board invites","accessibility label for board collaborator invites loading spinner","accessibility label for board collaborator invites loading spinner"),show:!0})]})}var l=n("ViqK"),u=n("mEMi"),h=n("w70y");class b extends i.Component{constructor(...e){var t,n,i;super(...e),i=()=>{const{invitesPendingApproval:e,invites:t}=this.props;e.refreshData(),t.refreshData()},(n="handleInvitesDidUpdate")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}shouldComponentUpdate(e){const{invites:{data:t}}=e,{invites:{data:n}}=this.props;return!n||!!t&&n.length!==t.length}render(){const{board:e,invites:t,invitesPendingApproval:n,scrollInfo:a,onBoardLeave:h,onModalOpen:b,renderInvite:p}=this.props,{full_name:f,image_medium_url:g,username:m}=e.owner,j=r.a._("Owner of this board","boardInviteSheet.CollaboratorList.boardOwner.subtitle","The subtext that identifies the owner of a board");return Object(c.jsx)(i.Fragment,{children:t.isLoaded||n.isLoaded?Object(c.jsx)(u.a,{fetchMore:t.fetchMore,children:({onScroll:i,setRef:r})=>Object(c.jsxs)(s.f,{width:"100%",onScroll:i,ref:r,children:[Object(c.jsx)(d,{boardId:e.id,fetchMore:n.fetchMore,invites:n.data||[],isAtEnd:n.isAtEnd,isFetching:n.isFetching,onBoardLeave:h,refreshData:this.handleInvitesDidUpdate,scroll:a,renderInvite:p}),(n.data||[]).length>0?Object(c.jsx)(s.f,{paddingY:3,children:Object(c.jsx)(s.p,{})}):null,Object(c.jsxs)(s.f,{paddingY:1,children:[Object(c.jsx)(l.a,{imageUrl:g,linkURL:`/${m}/`,name:f,subtitle:j,title:f}),(t.data||[]).map(e=>e&&e.invited_user&&e.invited_user.id?Object(c.jsx)(o.a,{invite:e,onBoardLeave:h,onModalOpen:b,onInviteDidUpdate:t.refreshData},e.invited_user.id):null)]})]})}):Object(c.jsx)(s.T,{show:!0,accessibilityLabel:r.a._("Loading","Loading state for showing board collaborators","Loading state for showing board collaborators")})})}}function p(e){const t=Object(h.a)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,allow_stale:!1}}),n=Object(h.a)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"pending_approval",allow_stale:!1}});return Object(c.jsx)(b,{...e,invites:t,invitesPendingApproval:n})}},EyTA:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("yYqh"),o=n("ytYg"),r=n("w70y");function a({getOptions:e,checkExperiments:t,disableFetch:n,...a}){const s=Object(o.a)(),{args:c,fetchDisabled:d}=Object(i.a)({checkExperiments:t,disableFetch:n,viewer:s}),l=e?e(c):void 0;return Object(r.a)({dangerouslyDisableFetch:d,options:l,...a})}},F2ZA:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return h}));n("n6mq");const i="/today/",o=3,r=(e,t,n=0)=>({num_days:t,referrer:n,...e?{}:{redux_normalize_feed:!0}});function a(e,t,n){const i=function(e){return 0===e||2===e?"trending":1===e?"best":"article"}(e),o=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-")}(t);return`/today/${i}/${encodeURIComponent(o)}/${n}/`}const s={"www.pinterest.com":"US","www.pinterest.co.uk":"GB","www.pinterest.ca":"CA","www.pinterest.com.au":"AU","br.pinterest.com":"BR","www.pinterest.com.mx":"MX","ar.pinterest.com":"AR","www.pinterest.cl":"CL","co.pinterest.com":"CO","www.pinterest.de":"DE","www.pinterest.at":"AT","www.pinterest.ch":"CH","www.pinterest.fr":"FR","in.pinterest.com":"IN","id.pinterest.com":"ID","www.pinterest.jp":"JP"},c={US:"en",GB:"en",CA:"en",AU:"en",BR:"pt",MX:"es",AR:"es",CL:"es",CO:"es",PE:"es",DE:"de",AT:"de",CH:"de",FR:"fr",IN:"en",ID:"id",JP:"ja",IT:"it"},d=(e,t)=>{const n=c[e];return!(null===n||n!==t&&!t.startsWith(n))},l=e=>s[e],u=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)||""),h=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner))},FDmi:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("n6mq"),o=n("nKUr");const r=(e,t)=>{const n=null==e?void 0:e.includes("images/user/default");return Boolean(n&&t)};function a({accessibilityLabel:e,name:t,outline:n,size:a,src:s,verified:c}){return Object(o.jsx)(i.b,{accessibilityLabel:e,name:t,outline:n,size:a,src:r(s,t)?void 0:s,verified:c})}},FeGr:function(e,t,n){(function(t){function n(e){o.length||(i(),!0),o[o.length]=e}e.exports=n;var i,o=[],r=0;function a(){for(;r<o.length;){var e=r;if(r+=1,o[e].call(),r>1024){for(var t=0,n=o.length-r;t<n;t++)o[t]=o[t+r];o.length-=r,r=0}}o.length=0,r=0,!1}var s,c,d,l=void 0!==t?t:self,u=l.MutationObserver||l.WebKitMutationObserver;function h(e){return function(){var t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof u?(s=1,c=new u(a),d=document.createTextNode(""),c.observe(d,{characterData:!0}),i=function(){s=-s,d.data=s}):i=h(a),n.requestFlush=i,n.makeRequestCallFromTimer=h}).call(this,n("yLpj"))},G6B4:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n("JQRy"),r=n("+jF9"),a=n("jaOL"),s=n("pWuj"),c=n("lihF"),d=n("LTlA");t.default=function(e,t){return void 0===e&&(e={}),{dirtyHandlerIds:s.default(e.dirtyHandlerIds,{type:t.type,payload:i({},t.payload,{prevTargetIds:d.get(e,"dragOperation.targetIds",[])})}),dragOffset:o.default(e.dragOffset,t),refCount:a.default(e.refCount,t),dragOperation:r.default(e.dragOperation,t),stateId:c.default(e.stateId)}}},G6z8:function(e,t,n){var i=n("fR/l"),o=n("oCl/"),r=n("mTTR");e.exports=function(e){return i(e,r,o)}},G8fK:function(e,t,n){function i(e,t){return{type:"SET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e,renderError:t}}}function o(e){return{type:"UNSET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e}}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},GBVV:function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n("n6mq"),o=n("nKUr");const r={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function a(){return Object(o.jsx)(i.f,{alignItems:"center",color:"red",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8,children:Object(o.jsx)(i.f,{dangerouslySetInlineStyle:r,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function s({disabled:e,name:t,onClick:n,size:r,submitting:s,text:c}){return Object(o.jsxs)(i.f,{display:"flex",position:"relative",children:[s&&Object(o.jsx)(a,{}),Object(o.jsx)(i.g,{color:"red",disabled:e||s,inline:!0,name:t,onClick:n,size:r,type:"submit",text:c})]})}},GDhZ:function(e,t,n){var i=n("wF/u"),o=n("mwIZ"),r=n("hgQt"),a=n("9ggG"),s=n("CMye"),c=n("IOzZ"),d=n("9Nap");e.exports=function(e,t){return a(e)&&s(t)?c(d(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?r(n,e):i(t,a,3)}}},"GFC/":function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("Ye/N"),r=n("TNox"),a=n("n6mq"),s=n("nKUr");function c({children:e,dataTestId:t,icon:n,onClick:c,url:d}){const[l,u]=Object(i.useState)(!1);let h;"selected"===n?h=Object(s.jsx)(a.v,{accessibilityLabel:o.a._("Selected option","flyoutMenu.selectedOptionCheckmark","Accessibility label for checkmark icon indicating which option is currently selected"),color:"darkGray",icon:"check",inline:!0}):"externalLink"===n&&(h=Object(s.jsx)(a.v,{accessibilityLabel:o.a._("External link","header.accountsOptionsMenu.externalLinkIcon","Accessibility label for icon indicating a menu item opens an external link"),color:"darkGray",icon:"arrow-up-right",inline:!0,size:12}));const b="string"==typeof e?Object(s.jsx)(a.f,{maxWidth:h?230:void 0,children:Object(s.jsx)(a.ab,{weight:"bold",children:e})}):e,p=d?r.a:a.Z;return Object(s.jsx)(a.f,{dangerouslySetInlineStyle:{__style:{backgroundColor:l?"rgba(0, 0, 0, 0.06)":void 0}},"data-test-id":t,role:"listitem",rounding:2,children:Object(s.jsx)(p,{href:d,onBlur:()=>u(!1),onFocus:()=>u(!0),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onTap:c,target:"externalLink"===n?"blank":null,children:Object(s.jsxs)(a.f,{alignItems:"center",display:"flex",justifyContent:"between",minHeight:35,paddingX:2,rounding:2,children:[b,h&&Object(s.jsx)(a.f,{flex:"none",marginStart:"auto",children:h})]})})})}},GNiM:function(e,t,n){var i=n("I01J"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=i((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,i,o){t.push(i?o.replace(r,"$1"):n||e)})),t}));e.exports=a},Gi0A:function(e,t,n){var i=n("QqLw"),o=n("ExA7");e.exports=function(e){return o(e)&&"[object Map]"==i(e)}},GoyQ:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},Gytx:function(e,t){e.exports=function(e,t,n,i){var o=n?n.call(i,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<r.length;c++){var d=r[c];if(!s(d))return!1;var l=e[d],u=t[d];if(!1===(o=n?n.call(i,l,u,d):void 0)||void 0===o&&l!==u)return!1}return!0}},H3Jb:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("q1tI"),o=n("4vzw"),r=n("/acK"),a=n("nrB0"),s=n("nwWm"),c=n("2S0S");t.useDragSourceMonitor=function(){var e=r.useDragDropManager();return[i.useMemo((function(){return new a.default(e)}),[e]),i.useMemo((function(){return new s.default(e.getBackend())}),[e])]},t.useDragHandler=function(e,t,n){var a=r.useDragDropManager(),s=i.useMemo((function(){return{beginDrag:function(){var n=e.current,i=n.begin,o=n.item;if(i){var r=i(t);return c(null==r||"object"==typeof r,"dragSpec.begin() must either return an object, undefined, or null"),r||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,i){var o=e.current.isDragging;return o?o(t):i===n.getSourceId()},endDrag:function(){var i=e.current.end;i&&i(t.getItem(),t),n.reconnect()}}}),[]);i.useEffect((function(){var i=o.default(e.current.item.type,s,a),r=i[0],c=i[1];return t.receiveHandlerId(r),n.receiveHandlerId(r),c}),[])}},HCyo:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("mc7v"),o=n("QIuh"),r=n("YuQ1"),a=n("QLaP"),s=function(){function e(e,t){this.store=e,this.registry=t}return e.prototype.subscribeToStateChange=function(e,t){var n=this;void 0===t&&(t={handlerIds:void 0});var i=t.handlerIds;a("function"==typeof e,"listener must be a function."),a(void 0===i||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var o=this.store.getState().stateId;return this.store.subscribe((function(){var t=n.store.getState(),a=t.stateId;try{a===o||a===o+1&&!r.areDirty(t.dirtyHandlerIds,i)||e()}finally{o=a}}))},e.prototype.subscribeToOffsetChange=function(e){var t=this;a("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var i=t.store.getState().dragOffset;i!==n&&(n=i,e())}))},e.prototype.canDragSource=function(e){if(!e)return!1;var t=this.registry.getSource(e);return a(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)},e.prototype.canDropOnTarget=function(e){if(!e)return!1;var t=this.registry.getTarget(e);if(a(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),o=this.getItemType();return i.default(n,o)&&t.canDrop(this,e)},e.prototype.isDragging=function(){return Boolean(this.getItemType())},e.prototype.isDraggingSource=function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return a(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))},e.prototype.isOverTarget=function(e,t){if(void 0===t&&(t={shallow:!1}),!e)return!1;var n=t.shallow;if(!this.isDragging())return!1;var o=this.registry.getTargetType(e),r=this.getItemType();if(r&&!i.default(o,r))return!1;var a=this.getTargetIds();if(!a.length)return!1;var s=a.indexOf(e);return n?s===a.length-1:s>-1},e.prototype.getItemType=function(){return this.store.getState().dragOperation.itemType},e.prototype.getItem=function(){return this.store.getState().dragOperation.item},e.prototype.getSourceId=function(){return this.store.getState().dragOperation.sourceId},e.prototype.getTargetIds=function(){return this.store.getState().dragOperation.targetIds},e.prototype.getDropResult=function(){return this.store.getState().dragOperation.dropResult},e.prototype.didDrop=function(){return this.store.getState().dragOperation.didDrop},e.prototype.isSourcePublic=function(){return this.store.getState().dragOperation.isSourcePublic},e.prototype.getInitialClientOffset=function(){return this.store.getState().dragOffset.initialClientOffset},e.prototype.getInitialSourceClientOffset=function(){return this.store.getState().dragOffset.initialSourceClientOffset},e.prototype.getClientOffset=function(){return this.store.getState().dragOffset.clientOffset},e.prototype.getSourceClientOffset=function(){return o.getSourceClientOffset(this.store.getState().dragOffset)},e.prototype.getDifferenceFromInitialOffset=function(){return o.getDifferenceFromInitialOffset(this.store.getState().dragOffset)},e}();t.default=s},HLqC:function(e,t,n){var i=n("R5Y4"),o=n("mv/X"),r=n("ZCgT");e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&o(t,n,a)&&(n=a=void 0),t=r(t),void 0===n?(n=t,t=0):n=r(n),a=void 0===a?t<n?1:-1:r(a),i(t,n,a,e)}}},HNpt:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=0;t.default=function(){return i++}},HoRl:function(e,t,n){function i(e){switch(e.toUpperCase()){case"CS-CZ":return"CZ";case"DA-DK":return"DA";case"DE":return"DE";case"EL-GR":return"GR";case"EN-GB":return"ENUK";case"EN-US":return"ENUS";case"ES-ES":return"ESES";case"ES-MX":return"ESMX";case"ES-AR":return"ESAR";case"ES-419":return"ESMX";case"FI-FI":return"FI";case"FR":return"FR";case"HI-IN":return"HI";case"HU-HU":return"HU";case"ID-ID":return"ID";case"IT":return"IT";case"JA":return"JP";case"KO-KR":return"KR";case"MS-MY":return"MS";case"NL":return"NL";case"NB-NO":return"NO";case"PL-PL":return"PL";case"PT-BR":return"PTBR";case"PT-PT":return"PTPT";case"RO-RO":return"RO";case"RU-RU":return"RU";case"SK-SK":return"SK";case"SV-SE":return"SV";case"TH-TH":return"TH";case"TL-PH":return"TL";case"TR":return"TR";case"UK-UA":return"UA";case"VI-VN":return"VT";case"ZH-CN":return"ZHCN";case"ZH-TW":return"ZHTW";default:return"none"}}n.r(t),n.d(t,"default",(function(){return i}))},"Hz/G":function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("U4JR");var o=n("eOdZ");var r=n("zpPL"),a=n("t3tn");function s({boardDensity:e,component:t,surface:n,viewType:s}){!function({boardDensity:e,component:t,viewType:n}){const o=function({boardDensity:e,viewType:t}){switch(t){case 164:return"regular"===e?10618:10619;case 5:return"regular"===e?10607:10608;default:return 10607}}({boardDensity:e,viewType:n}),r=4===n?3106:3069;Object(i.b)(101,{component:t,element:o,...n?{view:n,viewParameter:r}:{}})}({boardDensity:e,component:t,viewType:s}),function({density:e,surface:t}){const n="board"===t?{profile_pin_rep_view_type:e}:{board_pin_rep_view_type:e};o.a.create("UserMetadataResource",n).callUpdate()}({density:e,surface:n}),function({density:e,surface:t}){const n="board"===t?a.a:a.d;r.a.instance.dispatch(n(e))}({density:e,surface:n})}},I01J:function(e,t,n){var i=n("44Ds");e.exports=function(e){var t=i(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},IBrh:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("mEMi"),r=(n("9QW3"),n("n6mq")),a=n("nKUr");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.Component{constructor(e){super(e),s(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),s(this,"handleIndexUpdate",e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),s(this,"handleSelectItem",e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)}),s(this,"handleMouseEnter",e=>()=>{const{disabled:t,indexManager:n}=this.props;t||n.updateIndex(e)}),s(this,"handleMouseLeave",()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),s(this,"renderItems",(e,t)=>{const{renderItem:n}=this.props,{selectedIndex:i}=this.state,{row:o,section:s}=i||{},{customProps:c={},items:d,renderItem:l}=e,{isDisabled:u=(e=>!1)}=c,h=t===s,b=l||n;return b&&d.map((e,n)=>{const i=u(e),s={section:t,row:n},d=h&&n===o;return Object(a.jsx)(r.f,{"data-test-id":"board-selection",ref:!i&&d?this.setSelectedItemRef:null,children:i?b({item:e,hovered:d,sectionProps:c}):Object(a.jsx)(r.Z,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(s),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:b({item:e,hovered:d,sectionProps:c})})},n)})}),s(this,"renderSections",()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map((t,n)=>Object(a.jsxs)(r.f,{children:[e&&e(t,n),this.renderItems(t,n)]},n))});const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),i=n.top,o=n.bottom,r=t.getBoundingClientRect(),a=r.top;o>=r.bottom?e.scrollIntoView(!1):i<=a&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return Object(a.jsx)(o.a,{fetchMore:n,children:({setRef:n,onScroll:i})=>Object(a.jsx)(r.f,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:i,overflow:"auto",ref:e=>{this.containerRef=e,n(e)},children:this.renderSections()})})}}},"IEa/":function(e,t,n){var i=n("FeGr"),o=[],r=[],a=i.makeRequestCallFromTimer((function(){if(r.length)throw r.shift()}));function s(e){var t;(t=o.length?o.pop():new c).task=e,i(t)}function c(){this.task=null}e.exports=s,c.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(r.push(e),a())}finally{this.task=null,o[o.length]=this}}},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},IRZy:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("QWk2"),o=n("TT16"),r=n("Gytx"),a=function(){function e(e){var t=this;this.backend=e,this.hooks=i.default({dropTarget:function(e,n){t.dropTargetOptions=n,o.isRef(e)?t.dropTargetRef=e:t.dropTargetNode=e,t.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null}return Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dropTarget},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)},e.prototype.receiveHandlerId=function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"dropTargetOptions",{get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},e.prototype.didOptionsChange=function(){return!r(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},e.prototype.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},Object.defineProperty(e.prototype,"dropTarget",{get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current},enumerable:!0,configurable:!0}),e}();t.default=a},IWTy:function(e,t,n){var i=n("yue5");e.exports=function(e,t,n){for(var o=-1,r=e.criteria,a=t.criteria,s=r.length,c=n.length;++o<s;){var d=i(r[o],a[o]);if(d)return o>=c?d:d*("desc"==n[o]?-1:1)}return e.index-t.index}},IeEU:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("/MKj");const o=[1000069,1000075],r={};function a(e){return o.forEach(t=>{!e[t]||void 0!==r[t]&&r[t].id===e[t].id||(r[t]=e[t])}),r}function s(e){return Object(i.connect)(e=>({lfvExperiences:a(e.experiences.eligibleExperiences)}))(e)}function c(){return a(Object(i.useSelector)(({experiences:e})=>e.eligibleExperiences))}},"J/d7":function(e,t,n){n.d(t,"a",(function(){return j}));var i=n("q1tI"),o=n("/MKj"),r=n("YGxj"),a=n("Ye/N"),s=n("VPyJ"),c=n("n6mq"),d=n("nKUr");function l(e){const{anchor:t,experienceType:n,hideAddSectionTooltip:i}=e,{setShowBoardlessPinsModal:o}=Object(s.b)();let l;switch(n){case"addSectionTooltip":l=Object(d.jsx)(c.J,{anchor:t,color:"blue",idealDirection:"down",onDismiss:i,positionRelativeToAnchor:!1,showCaret:!0,size:"sm",children:Object(d.jsx)(c.f,{padding:4,children:Object(d.jsx)(c.ab,{color:"white",weight:"bold",children:a.a._("Tap + to add a section any time","boardActionsButton.addIconButton.addSectionFlyout","Flyout to point out where you can find add section")})})});break;case"planningActionsExperience":l=Object(d.jsx)(r.a,{anchor:t,experienceIds:[502096],idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0});break;case"createBoardTooltip":l=Object(d.jsx)(r.a,{anchor:t,experienceIds:[503447],idealDirection:"down",flyoutSize:"md",onClickComplete:()=>{o(!0)},placementId:19,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center",textWeight:"normal"});break;default:l=null}return Object(d.jsx)(c.z,{children:Object(d.jsx)(c.f,{dangerouslySetInlineStyle:{__style:{zIndex:5e3}},position:"absolute",top:!0,children:l})})}var u=n("+nTX"),h=n("s6a/"),b=n("GFC/"),p=n("4cpq"),f=n("QAzJ");function g({anchor:e,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:o,onAddSection:r,onClose:s,onCreateBoard:l,onCreatePin:g,onCreateStoryPin:m,surface:j}){const{anyEnabled:v}=Object(f.a)("web_story_pin_creator"),{anyEnabled:O}=Object(f.a)("web_sp2s");return Object(d.jsx)(u.a,{anchor:e,idealDirection:t,onDismiss:s,children:Object(d.jsxs)(i.Fragment,{children:[Object(d.jsxs)(h.a,{label:a.a._("Create","BoardActionsButton.LegoFlyout.Create","Label for a list of options to create a pin or a section"),children:[Object(d.jsx)(b.a,{dataTestId:"Create Pin",onClick:()=>{g(),s()},children:a.a._("Pin","BoardActionsButton.LegoFlyout.Pin","Option to create a pin")}),v&&Object(d.jsx)(b.a,{dataTestId:"Create Story Pin",onClick:()=>{m(),s()},children:O?a.a._("Idea Pin","BoardActionsButton.LegoFlyout.IdeaPin","Option to create a Idea Pin"):a.a._("Story Pin","BoardActionsButton.LegoFlyout.StoryPin","Option to create a Story Pin")}),"profileBoards"===j&&l&&Object(d.jsx)(b.a,{dataTestId:"Create board",onClick:()=>{l(),s()},children:a.a._("Board","profileHeader.actionBar.board","Option to create a board")})]}),"board"===j&&Object(d.jsxs)(h.a,{label:a.a._("Add","BoardActionsButton.LegoFlyout.Add","Label for a list of options to add board sections or a board date"),children:["board"===j&&n&&Object(d.jsx)(p.a,{id:"addBoardNote",children:Object(d.jsx)(b.a,{onClick:()=>{n(),s()},children:Object(d.jsxs)(c.f,{display:"flex",alignItems:"center",children:[Object(d.jsx)(c.ab,{weight:"bold",children:a.a._("Note","BoardActionsButton.LegoFlyout.Note","Option to create a board note")}),Object(d.jsx)(c.f,{color:"blue",marginStart:2,padding:1,rounding:1,children:Object(d.jsx)(c.ab,{color:"white",size:"sm",weight:"bold",children:a.a._("New","BoardActionsButton.LegoFlyout.New","New option indicator")})})]})})}),"board"===j&&r&&Object(d.jsx)(p.a,{id:"addSection",children:Object(d.jsx)(b.a,{onClick:()=>{r(),s()},children:a.a._("Section","BoardActionsButton.LegoFlyout.Section","Option to create a board section")})}),"board"===j&&!!o&&Object(d.jsx)(b.a,{onClick:()=>{o(),s()},children:a.a._("Date","BoardActionsButton.LegoFlyout.Date","Option to add a date to a board")})]})]})})}var m=n("shej");function j({children:e,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:r,onAddSection:s,onCreateBoard:u,onCreatePin:h,onCreateStoryPin:b,onOpen:p=(()=>{}),surface:f}){const j=Object(o.useDispatch)(),v=()=>j(Object(m.a)()),O=Object(o.useSelector)(({createSectionTooltip:e})=>Boolean(null==e?void 0:e.showCreateSectionTooltip)),x=Object(i.useRef)(),[y,_]=Object(i.useState)(!1),w=()=>{p(),O&&v(),_(!0)},C={board:a.a._("Board Actions","button that allows user view actions on a board such as add section, create pin, create pincode, and create widget","button that allows user view actions on a board such as add section, create pin, create pincode, and create widget"),profileBoards:a.a._("Profile Actions","profileHeader.actionBar.createButton","Button on user's profile to open flyout with options to create a pin or a board"),profilePins:a.a._("Profile Actions","profileHeader.actionBar.createButton","Button on user's profile to open flyout with options to create a pin or a board"),section:a.a._("Create Pin","Button to begin pin creation flow","Button to begin pin creation flow")},S=e&&e({active:y,openFlyout:w})||Object(d.jsx)(c.w,{accessibilityLabel:C[f],icon:"add",onClick:"section"===f?h:w,size:"lg"});let I;return y||"board"!==f||(O?I="addSectionTooltip":r&&(I="planningActionsExperience")),y||"profileBoards"!==f||(I="createBoardTooltip"),Object(d.jsxs)(c.f,{"data-test-id":"boardActionsButton",children:[Object(d.jsx)(c.f,{ref:x,children:S}),y&&Object(d.jsx)(g,{anchor:x.current,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:r,onAddSection:s,onClose:()=>_(!1),onCreateBoard:u,onCreatePin:h,onCreateStoryPin:b,surface:f}),I&&Object(d.jsx)(l,{anchor:x.current,experienceType:I,hideAddSectionTooltip:v})]})}},JBUN:function(e,t,n){var i={"./":["dH2W",9],"./CZ":["B5Bz",9,550],"./CZ.js":["B5Bz",9,550],"./DA":["Gi0d",9,551],"./DA.js":["Gi0d",9,551],"./DE":["gu28",9,552],"./DE.js":["gu28",9,552],"./ENUK":["XnQI",9,553],"./ENUK.js":["XnQI",9,553],"./ENUS":["AWLv",9,554],"./ENUS.js":["AWLv",9,554],"./ESAR":["REmk",9,555],"./ESAR.js":["REmk",9,555],"./ESES":["wsSg",9,556],"./ESES.js":["wsSg",9,556],"./ESMX":["1BwC",9,557],"./ESMX.js":["1BwC",9,557],"./FI":["2A7Q",9,558],"./FI.js":["2A7Q",9,558],"./FR":["cYI+",9,559],"./FR.js":["cYI+",9,559],"./GR":["GRYs",9,560],"./GR.js":["GRYs",9,560],"./HI":["VJRD",9,561],"./HI.js":["VJRD",9,561],"./HU":["ruI3",9,562],"./HU.js":["ruI3",9,562],"./ID":["qOEt",9,563],"./ID.js":["qOEt",9,563],"./IT":["Bq0h",9,564],"./IT.js":["Bq0h",9,564],"./JP":["zJe/",9,565],"./JP.js":["zJe/",9,565],"./KR":["8fMJ",9,566],"./KR.js":["8fMJ",9,566],"./MS":["BOEg",9,567],"./MS.js":["BOEg",9,567],"./NL":["0gKe",9,568],"./NL.js":["0gKe",9,568],"./NO":["PiZp",9,569],"./NO.js":["PiZp",9,569],"./PL":["+Fv7",9,570],"./PL.js":["+Fv7",9,570],"./PTBR":["Ortd",9,571],"./PTBR.js":["Ortd",9,571],"./PTPT":["Yqrn",9,572],"./PTPT.js":["Yqrn",9,572],"./RO":["6YHy",9,573],"./RO.js":["6YHy",9,573],"./RU":["Pvfl",9,574],"./RU.js":["Pvfl",9,574],"./SK":["Lc4P",9,575],"./SK.js":["Lc4P",9,575],"./SV":["JVoV",9,576],"./SV.js":["JVoV",9,576],"./TH":["7T3W",9,577],"./TH.js":["7T3W",9,577],"./TL":["2ndg",9,578],"./TL.js":["2ndg",9,578],"./TR":["3+7V",9,579],"./TR.js":["3+7V",9,579],"./UA":["0Qy6",9,580],"./UA.js":["0Qy6",9,580],"./VT":["gfny",9,581],"./VT.js":["gfny",9,581],"./ZHCN":["lT6v",9,582],"./ZHCN.js":["lT6v",9,582],"./ZHTW":["yMH2",9,583],"./ZHTW.js":["yMH2",9,583],"./index":["dH2W",9],"./index.js":["dH2W",9],"./localeToFilename":["HoRl",9],"./localeToFilename.js":["HoRl",9],"./types":["99Jd",7,584],"./types.js":["99Jd",7,584]};function o(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],o=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(o,t[1])}))}o.keys=function(){return Object.keys(i)},o.id="JBUN",e.exports=o},JKZO:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("2K7C"),o=n("MKeS"),r=n("nKUr"),a=n.n(r);const s=Object(o.a)({resolved:{},chunkName:()=>"EditorWithMentionsInternal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>n.e("EditorWithMentionsInternal").then(n.bind(null,"AO8i")),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return"AO8i"}});function c(e){return Object(r.jsx)(s,{...e,fallback:Object(r.jsx)(i.a,{})})}},JQRy:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n("pYMm"),r=n("N4T/"),a={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};t.default=function(e,t){void 0===e&&(e=a);var n=t.payload;switch(t.type){case o.INIT_COORDS:case o.BEGIN_DRAG:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case o.HOVER:return r.areCoordsEqual(e.clientOffset,n.clientOffset)?e:i({},e,{clientOffset:n.clientOffset});case o.END_DRAG:case o.DROP:return a;default:return e}}},Jld5:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("CkrQ"),o=n("G6B4"),r=n("pYMm"),a=n("HCyo"),s=n("54t5");var c=function(){function e(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1),this.context=t,this.isSetUp=!1,this.handleRefCountChange=function(){var e=r.store.getState().refCount>0;e&&!r.isSetUp?(r.backend.setup(),r.isSetUp=!0):!e&&r.isSetUp&&(r.backend.teardown(),r.isSetUp=!1)};var c=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return i.createStore(o.default,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n);this.store=c,this.monitor=new a.default(c,new s.default(c)),this.backend=e(this),c.subscribe(this.handleRefCountChange)}return e.prototype.getContext=function(){return this.context},e.prototype.getMonitor=function(){return this.monitor},e.prototype.getBackend=function(){return this.backend},e.prototype.getRegistry=function(){return this.monitor.registry},e.prototype.getActions=function(){var e=this,t=this.store.dispatch;var n=r.default(this);return Object.keys(n).reduce((function(i,o){var r,a=n[o];return i[o]=(r=a,function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(e,n);void 0!==o&&t(o)}),i}),{})},e.prototype.dispatch=function(e){this.store.dispatch(e)},e}();t.default=c},Joxa:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));const i=[0,2,1];function o(e){const{list_blocks:t,key_value_blocks:n}=e,i=t&&t.length>0?t.map(e=>{const{heading:t,blocks:n}=e;return{heading:t,blocks:n.map(e=>({text:e.text,type:9})),type:7}}):[];return{key_value_blocks:n&&n.length>0?n.map(e=>({category_type:e.category_type,type:8,value:e.value})):[],list_blocks:i}}function r(e){const{list_blocks:t,key_value_blocks:n}=e,i=t&&t.length>0?t.map(e=>{const{heading:t,blocks:n}=e;return{heading:t,items:n.map(e=>e.text)}}):[];return{keyValueBlocks:n&&n.length>0?n.reduce((e,t)=>{const{category_type:n,value:i}=t;return e[n]=i,e},{}):{},listBlocks:i}}function a(e){const{keyValueBlocks:t,listBlocks:n}=e;if(!t&&!n)return null;return{list_blocks:n?n.map(e=>{const{heading:t,items:n}=e;let i=[];return n&&(i=n.map(e=>({text:e,type:9}))),{blocks:i,heading:t,type:7}}):[],key_value_blocks:(t?Object.keys(t).map(e=>{const n=t[e],o=Number.parseInt(e,10),r=i.indexOf(o)>-1&&n===Number.parseInt(n,10).toString();return n&&r?{value:n,category_type:o,type:8}:null}):[]).filter(Boolean)}}},KEt0:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("n6mq"),o=n("nKUr");function r({size:e}){return Object(o.jsx)("span",{style:{padding:"0 4px"},children:Object(o.jsx)(i.ab,{inline:!0,size:null!=e?e:"md",children:"·"})})}},KfNM:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},Kz5y:function(e,t,n){var i=n("WFqU"),o="object"==typeof self&&self&&self.Object===Object&&self,r=i||o||Function("return this")();e.exports=r},L2iP:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return u}));const i=64,o=80,r=22,a="HeaderContent",s=4,c=24,d=671,l={marginBottom:s},u={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},LTlA:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e)},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.isString=function(e){return"string"==typeof e},t.isObject=function(e){return"object"==typeof e},t.xor=function(e,t){var n=new Map,i=function(e){return n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(i),t.forEach(i);var o=[];return n.forEach((function(e,t){1===e&&o.push(t)})),o},t.intersection=function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))}},La7j:function(e,t,n){t.a=n("kugi").default},M1Uz:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("q1tI"),o=n("4jWr"),r=n("n6mq"),a=n("nKUr");function s({color:e="white",duration:t=2e3,href:n,iconThumbnail:s,imageUrl:c,onClick:d,onHide:l,openNewPage:u,text:h,button:b,thumbnailShape:p="square",dataTestId:f}){const[g,m]=Object(i.useState)(!1),[j,v]=Object(i.useState)(!1),O=Object(i.useRef)(),x=()=>{m(!0),O.current=setTimeout(l,o.a)},y=()=>{O.current&&clearTimeout(O.current)},_=()=>{O.current=setTimeout(x,t)};Object(i.useEffect)(()=>(setTimeout(()=>v(!0),100),_(),y),[]);const w="string"==typeof h?h:`${h[0]} ${h[1]}`,C=c?Object(a.jsx)(r.f,{height:48,overflow:"hidden",width:48,children:Object(a.jsx)(r.x,{alt:w,fit:"cover",naturalHeight:1,naturalWidth:1,src:c})}):void 0,S=Object(a.jsx)(r.db,{color:e,text:h,thumbnail:null!=s?s:C,button:b,thumbnailShape:p});return Object(a.jsx)("div",{style:Object(o.b)(j,g),onMouseEnter:y,onMouseLeave:_,"data-test-id":null!=f?f:"toast",children:n?Object(a.jsx)("a",{href:n,onClick:d,target:u?"_blank":null,rel:u?"noopener noreferrer":null,children:S}):S})}},MCs0:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getDecoratedComponent=function(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}},MKeS:function(e,t,n){n.d(t,"b",(function(){return I}));var i=n("q1tI"),o=n.n(i);function r(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=n("TOwV"),d=n("2mql"),l=n.n(d);function u(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}function h(e){console.warn("loadable: "+e)}var b=o.a.createContext();function p(e){return e+"__LOADABLE_REQUIRED_CHUNKS__"}var f={initialChunks:{}},g="PENDING",m="REJECTED";var j=function(e){return e};function v(e){var t=e.defaultResolveComponent,n=void 0===t?j:t,i=e.render,d=e.onLoad;function h(e,t){void 0===t&&(t={});var h=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),p={};function j(e){return t.cacheKey?t.cacheKey(e):h.resolve?h.resolve(e):"static"}function v(e,i,o){var r=t.resolveComponent?t.resolveComponent(e,i):n(e);if(t.resolveComponent&&!Object(c.isValidElementType)(r))throw new Error("resolveComponent returned something that is not a React component!");return l()(o,r,{preload:!0}),r}var O,x=function(e){var n,o;function c(n){var i;return(i=e.call(this,n)||this).state={result:null,error:null,loading:!0,cacheKey:j(n)},u(!n.__chunkExtractor||h.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),n.__chunkExtractor?(!1===t.ssr||(h.requireAsync(n).catch((function(){return null})),i.loadSync(),n.__chunkExtractor.addChunk(h.chunkName(n))),s(i)):(!1!==t.ssr&&(h.isReady&&h.isReady(n)||h.chunkName&&f.initialChunks[h.chunkName(n)])&&i.loadSync(),i)}o=e,(n=c).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,c.getDerivedStateFromProps=function(e,t){var n=j(e);return a({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var l=c.prototype;return l.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===m&&this.setCache(),this.state.loading&&this.loadAsync()},l.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},l.componentWillUnmount=function(){this.mounted=!1},l.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},l.getCacheKey=function(){return j(this.props)},l.getCache=function(){return p[this.getCacheKey()]},l.setCache=function(e){void 0===e&&(e=void 0),p[this.getCacheKey()]=e},l.triggerOnLoad=function(){var e=this;d&&setTimeout((function(){d(e.state.result,e.props)}))},l.loadSync=function(){if(this.state.loading)try{var e=v(h.requireSync(this.props),this.props,_);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:h.resolve(this.props),chunkName:h.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},l.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var n=v(t,e.props,{Loadable:_});e.safeSetState({result:n,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},l.resolveAsync=function(){var e=this,t=this.props,n=(t.__chunkExtractor,t.forwardedRef,r(t,["__chunkExtractor","forwardedRef"])),i=this.getCache();return i||((i=h.requireAsync(n)).status=g,this.setCache(i),i.then((function(){i.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:h.resolve(e.props),chunkName:h.chunkName(e.props),error:t?t.message:t}),i.status=m}))),i},l.render=function(){var e=this.props,n=e.forwardedRef,o=e.fallback,s=(e.__chunkExtractor,r(e,["forwardedRef","fallback","__chunkExtractor"])),c=this.state,d=c.error,l=c.loading,u=c.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===g)throw this.loadAsync();if(d)throw d;var h=o||t.fallback||null;return l?h:i({fallback:h,result:u,options:t,props:a({},s,{ref:n})})},c}(o.a.Component),y=(O=x,function(e){return o.a.createElement(b.Consumer,null,(function(t){return o.a.createElement(O,Object.assign({__chunkExtractor:t},e))}))}),_=o.a.forwardRef((function(e,t){return o.a.createElement(y,Object.assign({forwardedRef:t},e))}));return _.preload=function(e){h.requireAsync(e)},_.load=function(e){return h.requireAsync(e)},_}return{loadable:h,lazy:function(e,t){return h(e,a({},t,{suspense:!0}))}}}var O=v({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,n=e.props;return o.a.createElement(t,n)}}),x=O.loadable,y=O.lazy,_=v({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),w=_.loadable,C=_.lazy,S="undefined"!=typeof window;function I(e,t){void 0===e&&(e=function(){});var n=(void 0===t?{}:t).namespace,i=void 0===n?"":n;if(!S)return h("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var o=null;if(S){var r=p(i),a=document.getElementById(r);if(a){o=JSON.parse(a.textContent);var s=document.getElementById(r+"_ext");if(!s)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(s.textContent).namedChunks.forEach((function(e){f.initialChunks[e]=!0}))}}if(!o)return h("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var c=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,n=t.push.bind(t);function i(){o.every((function(e){return t.some((function(t){return t[0].indexOf(e)>-1}))}))&&(c||(c=!0,e()))}t.push=function(){n.apply(void 0,arguments),i()},i()})).then(e)}var T=x;T.lib=w,y.lib=C;t.a=T},MNxV:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("XRfM"),o=n("pLLR"),r=n("nKUr");const a=i.c.DateFormatType;t.b=({dateFormatType:e,useUTC:t=!0,value:n})=>Object(r.jsx)(o.b,{children:o=>i.c.formatDate(o.locale,n,e,t)})},MaRn:function(e,t,n){function i(e){return{type:"FEED_ITEM_REORDERED",payload:e}}n.d(t,"a",(function(){return i}))},"N/FO":function(e,t,n){const i="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now();t.a=({window:e,duration:t,run:n})=>{const o=i();let r=0,a=null;const s=()=>{const c=i()-o,d=c-r;if(t===1/0)n(0,c,d);else{const e=c/t;if(e>=1)return void n(1,c,d);n(e,c,d)}r=c,a=e.requestAnimationFrame(s)};return{start:()=>{a=e.requestAnimationFrame(s)},cancel:()=>{a&&(e.cancelAnimationFrame(a),a=null)}}}},"N4T/":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.strictEquality=function(e,t){return e===t},t.areCoordsEqual=function(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)},t.areArraysEqual=function(e,n,i){if(void 0===i&&(i=t.strictEquality),e.length!==n.length)return!1;for(var o=0;o<e.length;++o)if(!i(e[o],n[o]))return!1;return!0}},NFjV:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.config=e,this.item={},Object.keys(this.config.exposeProperties).forEach((function(e){Object.defineProperty(t.item,e,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \""+e+'" until the drop event.'),null}})}))}return e.prototype.mutateItemByReadingDataTransfer=function(e){var t=this,n={};e&&Object.keys(this.config.exposeProperties).forEach((function(i){n[i]={value:t.config.exposeProperties[i](e,t.config.matchesTypes)}})),Object.defineProperties(this.item,n)},e.prototype.canDrag=function(){return!0},e.prototype.beginDrag=function(){return this.item},e.prototype.isDragging=function(e,t){return t===e.getSourceId()},e.prototype.endDrag=function(){},e}();t.NativeDragSource=i},NVsV:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("q1tI");const o="__ALL__",r="__NONE__",a={canEnableDebugger:!1,setDebuggerVisible:()=>{},debuggerVisible:!1,setDebuggingEnabled:()=>{},debuggingEnabled:!1,highlightExperiment:e=>{},highlightedExperiment:r,overrideExperiment:(e,t)=>{},overriddenExperiments:{},visibleExperimentCounts:{},setExperimentVisible:(e,t)=>{}},s=Object(i.createContext)(a);t.c=s},NXrh:function(e,t,n){n.d(t,"a",(function(){return j}));var i=n("q1tI"),o=n("/MKj"),r=n("Sihc"),a=n("Ye/N"),s=n("rrvb"),c=n("ANjH"),d=n("0BOE"),l=n("jdx6"),u=n("n6mq"),h=n("w70y"),b=n("nKUr");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f="NO_SECTION_VALUE";function g({section:e,hovered:t,searchQuery:n}){return Object(b.jsxs)(u.f,{children:[Object(b.jsx)(u.f,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:Object(b.jsx)(u.f,{flex:"grow",children:Object(b.jsx)(u.ab,{weight:"bold",children:Object(l.b)(n,e.title)})})}),e.id===f&&Object(b.jsx)(u.p,{})]})}class m extends i.Component{constructor(...e){super(...e),p(this,"state",{searchQuery:""}),p(this,"getPickerSections",()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:n}=this.props;let i=t&&t.data||[];return i=n?i.filter(e=>e.id!==n):[{id:f,title:a.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...i],e.length>=2&&(i=Object(d.a)(i,e,"title")),[{items:i}]}),p(this,"createBtnDisabled",()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some(e=>{var n;return(null===(n=e.title)||void 0===n?void 0:n.toLowerCase())===t.toLocaleLowerCase()})}),p(this,"handleSectionCreate",()=>{const{board:e,onSectionChange:t,sectionsResource:n,dispatch:i,onSectionCreate:o}=this.props,{searchQuery:a}=this.state;o?o(a):i&&e.id&&i(Object(r.a)({boardId:e.id,name:a})).then(e=>{n&&n.refreshData(),this.setState({searchQuery:""}),t(e)})}),p(this,"handleSectionSelected",e=>{const{onSectionChange:t}=this.props;e.id===f?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))}),p(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),p(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return Object(b.jsx)(g,{hovered:t,searchQuery:n,section:e})})}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:n}=this.props;if(n!==t){const{sectionsResource:e}=this.props;e&&e.refreshData()}}render(){const{isStoryPin:e,sectionsResource:t,selectedSectionId:n,mergingFromSectionId:i,selectedSectionName:o}=this.props,{searchQuery:r}=this.state;let c=i?a.a._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):a.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(n){let e;t&&t.data&&(e=t.data.find(e=>e.id===n)),c=e&&e.title||c}else o&&(c=o);return Object(b.jsxs)(u.f,{children:[Object(b.jsx)(u.T,{accessibilityLabel:a.a._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!t&&!t.isLoaded}),(!t||t&&t.isLoaded)&&Object(b.jsx)(s.a,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:c,isStoryPin:e,onCreate:i?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:r,sections:this.getPickerSections()})]})}}const j=m;t.b=Object(c.compose)(Object(o.connect)(),Object(h.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id}),allowStale:!1}))(j)},NdQN:function(e,t,n){var i=n("q1tI"),o=n("JW66"),r=n("Ye/N"),a=(n("9QW3"),n("n6mq")),s=n("nKUr");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.Component{constructor(...e){super(...e),c(this,"setInputRef",e=>{e&&(this._input=e)}),c(this,"handleKeyDown",e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case o.a.KeyCode.ENTER:case o.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),n.select();break;case o.a.KeyCode.UP:e.preventDefault(),n.prev();break;case o.a.KeyCode.DOWN:e.preventDefault(),n.next()}})}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return Object(s.jsx)("div",{onKeyDown:this.handleKeyDown,role:"presentation",style:{width:"100%"},children:Object(s.jsx)(a.P,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:r.a._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t})})}}t.a=d},NdXn:function(e,t,n){function i(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}n.d(t,"a",(function(){return i}))},NrS9:function(e,t,n){n.d(t,"b",(function(){return c}));var i=n("gxu6"),o=n("7w6Q"),r=n("eOdZ"),a=n("mBfy");const s=function(){};Object.assign(s.prototype,{sendSubscriptionToServer(e,t,n){i.b("cm_sub","allowed",8760,"/"),t&&t(),o.a.increment("auth.web.notifications.allowed",1,{sourceLandingPage:n});let a=e.subscriptionId;if(!a){const t=e.endpoint.split("/");a=t[t.length-1]}return r.a.create("WebPushDeviceResource",{}).callGet({showError:!1}).then(t=>{const n=t.resource_response.data;if(!(a in n)){const t={registration_id:a,subscription_endpoint:e.endpoint};return r.a.create("WebPushDeviceResource",t).callCreate()}})},subscribe(e,t,n){return o.a.increment("auth.web.notifications.viewed",1,{sourceLandingPage:n}),navigator.serviceWorker.ready.then(r=>{var a;null==r||null===(a=r.pushManager)||void 0===a||a.subscribe({userVisibleOnly:!0}).then(t=>this.sendSubscriptionToServer(t,e,n),r=>{"Notification"in window&&"denied"!==Notification.permission?(i.b("cm_sub","dismissed",8760,"/"),t&&t(),o.a.increment("auth.web.notifications.dismissed",1,{sourceLandingPage:n})):(i.b("cm_sub","denied",8760,"/"),e&&e(),o.a.increment("auth.web.notifications.denied",1,{sourceLandingPage:n}))})}).catch(()=>{})},initializeState(){if(a.default.isLimitedLogin())i.b("cm_sub","denied",8760,"/");else if(a.default.isAuthenticated())if("showNotification"in ServiceWorkerRegistration.prototype)if("Notification"in window&&"denied"!==Notification.permission){if("PushManager"in window)return navigator.serviceWorker.ready.then(e=>e.pushManager.getSubscription()).then(e=>{if(e)return this.sendSubscriptionToServer(e);throw i.b("cm_sub","none",8760,"/"),new Error}).catch(e=>{});i.b("cm_sub","denied",8760,"/")}else i.b("cm_sub","denied",8760,"/");else i.b("cm_sub","denied",8760,"/");else i.b("cm_sub","denied",8760,"/")}}),s.instance=function(){return s._instance||(s._instance=new s),s._instance},"undefined"!=typeof window&&window.addEventListener("load",()=>{"serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js").then(()=>{s.instance().initializeState()}).catch(()=>{})});const c=()=>{if("serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&"Notification"in window&&"PushManager"in window)try{return window.Notification.permission}catch(e){return}};t.a=s},NykK:function(e,t,n){var i=n("nmnc"),o=n("AP2z"),r=n("KfNM"),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):r(e)}},O7RO:function(e,t,n){var i=n("CMye"),o=n("7GkX");e.exports=function(e){for(var t=o(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,i(a)]}return t}},OBhP:function(e,t,n){var i=n("fmRc"),o=n("gFfm"),r=n("MrPd"),a=n("WwFo"),s=n("Dw+G"),c=n("5Tg0"),d=n("Q1l4"),l=n("VOtZ"),u=n("EEGq"),h=n("qZTm"),b=n("G6z8"),p=n("QqLw"),f=n("yHx3"),g=n("wrZu"),m=n("+iFO"),j=n("Z0cm"),v=n("DSRE"),O=n("zEVN"),x=n("GoyQ"),y=n("1+5i"),_=n("7GkX"),w=n("mTTR"),C="[object Arguments]",S="[object Function]",I="[object Object]",T={};T[C]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[I]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[S]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,E,P,D,B){var k,M=1&n,R=2&n,A=4&n;if(E&&(k=D?E(t,P,D,B):E(t)),void 0!==k)return k;if(!x(t))return t;var L=j(t);if(L){if(k=f(t),!M)return d(t,k)}else{var N=p(t),F=N==S||"[object GeneratorFunction]"==N;if(v(t))return c(t,M);if(N==I||N==C||F&&!D){if(k=R||F?{}:m(t),!M)return R?u(t,s(k,t)):l(t,a(k,t))}else{if(!T[N])return D?t:{};k=g(t,N,M)}}B||(B=new i);var U=B.get(t);if(U)return U;B.set(t,k),y(t)?t.forEach((function(i){k.add(e(i,n,E,i,t,B))})):O(t)&&t.forEach((function(i,o){k.set(o,e(i,n,E,o,t,B))}));var H=L?void 0:(A?R?b:h:R?w:_)(t);return o(H||t,(function(i,o){H&&(i=t[o=i]),r(k,o,e(i,n,E,o,t,B))})),k}},OQKm:function(e,t,n){n.d(t,"a",(function(){return ee}));var i=n("q1tI"),o=n("Ye/N"),r=n("rYoy"),a=n("M1Uz"),s=n("nGHF"),c=n("n6mq"),d=n("nKUr");const l=Object(i.lazy)(()=>n.e("ReactCopyToClipboardLibrary").then(n.t.bind(null,"P5Jw",7)));function u({linkURL:e,onDidFocus:t,onDidClickCopyButton:n}){const{showOneToast:i}=Object(s.b)(),u=o.a._("Copy link","[button] copy a URL link shown, to paste in another place","[button] copy a URL link shown, to paste in another place");return Object(d.jsxs)(c.f,{display:"flex",alignItems:"center",paddingX:4,children:[Object(d.jsx)(c.f,{flex:"grow",marginEnd:2,children:Object(d.jsx)(c.cb,{id:"copylinkurl",onChange:()=>{},onFocus:t,size:"lg",type:"url",value:e})}),Object(d.jsx)(r.a,{fallback:Object(d.jsx)(c.g,{inline:!0,text:u,disabled:!0}),children:Object(d.jsx)(l,{text:e,onCopy:(e,t)=>{t&&i(({onHide:e})=>Object(d.jsx)(a.a,{onHide:e,text:o.a._("Link copied to clipboard!","toast message to confirm if users copied the url successfully","toast message to confirm if users copied the url successfully")})),n()},children:Object(d.jsx)(c.g,{inline:!0,text:u,size:"lg"})})})]})}var h=n("mvLR"),b=n("oVol"),p=n("U4JR"),f=n("udob");const g=e=>({invite_category:4,invite_channel:12,object_type:b.a.BOARD,object_id:e});function m({boardId:e}){const[t,n]=Object(i.useState)(!1),[o,r]=Object(i.useState)(null);Object(i.useEffect)(()=>{if(!o){const t=g(e),{cancel:n,promise:i}=Object(h.a)(f.a.createShareInviteData(t));return i.then(e=>r(e)),()=>{n()}}},[]);const a=o?o.invite_url:"...",s=()=>{null===o||t||(n(!0),f.a.logShareInvite(g(e),o))};return Object(d.jsx)(u,{linkURL:a,onDidClickCopyButton:()=>{Object(p.b)(101,(e=>({component:13305,element:10921,objectId:e,view:5,viewParameter:3059}))(e)),s()},onDidFocus:s})}var j=n("+wrf"),v=n("FDmi"),O=n("w70y");function x({boardId:e,invitedUserId:t,isInvited:n,onClick:r,buttonSize:a="sm"}){const s=Object(O.a)({name:"BoardInviteResource",options:{board_id:e,invited_user_id:t}});Object(i.useEffect)(()=>{s.refreshData()},[]);const l={text:o.a._("Invite","[button] invite someone to collaborate on a board","it appears in the list expanded when click invite button at the top of board page"),color:"red",disabled:!1};return s.isFetching&&(l.text=o.a._("Loading","[button] disabled button status text when checking if the user has been invited","it appears in the list expanded when click invite button at the top of board page"),l.color="gray",l.disabled=!0),(n||s.isLoaded&&s.data)&&(l.text=o.a._("Invited","[button] disabled button status text when a user has been invited to a board","it appears in the list expanded when click invite button at the top of board page"),l.color="gray",l.disabled=!0),Object(d.jsx)(c.g,{color:l.color,size:a,disabled:l.disabled,onClick:r,text:l.text})}var y=n("ViqK"),_=n("xZ6X"),w=n("fZbY"),C=n("7w6Q"),S=n("TSYQ"),I=n.n(S),T=n("G35+"),E=n("+zF7");const{FACEBOOK:P,GPLUS:D,YAHOO:B}=T.a,k="40px";function M(e){const t={[P]:o.a._("Find friends from Facebook"),[D]:o.a._("Find friends from Google+"),[B]:o.a._("Find friends from Yahoo")},{network:n}=e;return Object(d.jsx)(c.Z,{onTap:()=>function(e){E.a.instance().handleConnect(e,!0,{})}(n),children:Object(d.jsxs)(c.f,{display:"flex",alignItems:"center",paddingX:3,paddingY:2,children:[Object(d.jsx)(c.f,{width:k,height:k,marginEnd:4,children:Object(d.jsx)("div",{className:"SocialConnectCell",children:Object(d.jsx)("div",{className:I()("icon","socialConnect-"+n),children:Object(d.jsx)("em",{})})})}),Object(d.jsx)(c.f,{display:"flex",flex:"grow",alignItems:"start",direction:"column",children:Object(d.jsx)(c.ab,{color:"darkGray",size:"md",weight:"bold",children:t[n]})})]})})}var R=n("oRM1"),A=n("v/Q4"),L=n("x12c");var N=n("ZE2w");const F=[];function U({boardId:e,onInvitesDidUpdate:t,onInviteDidComplete:n,shareSuggestions:r}){const a=Object(A.a)(),[s,l]=Object(i.useState)(a.isAuth?a.socialNetwork:void 0),[u,h]=Object(i.useState)(""),[b,f]=Object(i.useState)([]),[g,m]=Object(i.useState)({}),[j,O]=Object(i.useState)({}),S=e=>{if(!e)return[];return Object.keys(e).filter(e=>F.includes(e)).filter(t=>!1===e[t].connected).map(e=>Object(d.jsx)(M,{network:e},"socialConnect-"+e))},I=e=>{switch(e.type){case"user":case"user_share_suggestion":return e.username||o.a._("On Pinterest","is a user of Pinterest","is a user of Pinterest");case"emailcontact":case"email_share_suggestion":return e.email||o.a._("Email Contact","invited user has an email","invited user has an email")}return""};L.b.subscribe("currentUser","socialNetworkUpdated",(e,t,n)=>{l(function(e){return{facebook:{connected:e.connected_to_facebook||!1},google:{connected:e.connected_to_google||!1},youtube:{connected:e.connected_to_youtube||!1},gplus:{connected:!!e.gplus_url,url:e.gplus_url},microsoft:{connected:e.connected_to_microsoft||!1},twitter:{connected:!!e.twitter_url,url:e.twitter_url},etsy:{connected:e.connected_to_etsy||!1},instagram:{connected:e.connected_to_instagram||!1},dropbox:{connected:e.connected_to_dropbox||!1}}}(n))});const T=(i,o)=>{const{id:r,full_name:a,debug_reason:s}=i;let c="";s&&(c=s.reason),((t,n)=>{const i=u?1044:1039;Object(p.b)(101,{component:13029,element:i,entered_query:u,result_index:t+1,rs:n,objectId:e,view:5,viewParameter:3059})})(o,c);const d={...g};d[r]=!0,m(d),Object(N.d)(e,[r]).then(()=>{n(a,!0)}).catch(e=>{n(a,!1,e);const t={...g};t[r]=!1,m(t)}).finally(t)},E=[...S(s)];let P=r;return u&&(P=b),Object(d.jsxs)(c.f,{minHeight:0,display:"flex",direction:"column",children:[Object(d.jsx)(c.f,{paddingY:4,flex:"none",display:"flex",alignItems:"center",children:Object(d.jsx)(c.f,{flex:"grow",children:Object(d.jsx)(R.a,{onTypeaheadSuggestionsChange:e=>{C.a.increment("web_contacts_search",1,{source:"board_invite"}),f(e)},resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{suggestion_type:"group_board",count:25},value:u,children:Object(d.jsx)(c.f,{paddingX:4,children:Object(d.jsx)(c.P,{accessibilityLabel:o.a._("Search for a name or email","accessible label for contact search input field","accessible label for contact search input field"),id:"search",onChange:({value:e})=>{h(e),Object(p.b)(4113,{component:13029,element:1043,entered_query:e,viewParameter:3059})},placeholder:o.a._("Search by name or email","search input field prompt for finding contacts","search input field prompt for finding contacts"),size:"lg",value:u})})})})}),Object(d.jsxs)(c.f,{overflow:"scrollY",maxHeight:414,children:[P.map((t,n)=>{const i=t.username?`/${t.username}/`:null;return Object(d.jsx)(c.f,{children:Object(d.jsx)(y.a,{imageUrl:t.image_medium_url||"",name:t.full_name||t.email,title:t.full_name||t.email,subtitle:I(t),accessory:Object(d.jsx)(x,{boardId:e,invitedUserId:t.id,isInvited:(o=t.id,!!g[o]),onClick:()=>T(t,n),buttonSize:"lg"}),linkURL:i})},n);var o}),u&&(Object(w.a)(u)?Object(d.jsx)(y.a,{name:u,title:u,accessory:(D=!!j[u],B=()=>{const i=u;if(!Object(w.a)(i))return;const o={...j};o[i]=!0,O(o),Object(N.c)(e,[i]).then(()=>{n(i,!0),h("")}).catch(e=>{n(i,!1,e);const t={...j};t[i]=!1,O(t)}).finally(t)},k="lg",Object(d.jsx)(c.g,{color:D?"gray":"red",disabled:!!D,size:k,onClick:B,text:D?o.a._("Invited","[button] disabled button status text when a user has been invited to a board","[button] disabled button status text when a user has been invited to a board"):o.a._("Invite","[button] invite someone to collaborate on a board","[button] invite someone to collaborate on a board")}))}):Object(d.jsx)(_.a,{iconNode:Object(d.jsx)(v.a,{name:u,size:"md"}),title:u,subtitle:o.a._("Keep typing!","boardCollabInviterForm.label","Message for user to keep typing")})),E]})]});var D,B,k}var H=n("vvax");function z({boardId:e}){const t=Object(s.b)(),{refreshData:n}=Object(O.a)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0},allowStale:!1}),{refreshData:r}=Object(O.a)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"pending_approval"},allowStale:!1}),{data:l,isLoaded:u}=Object(O.a)({name:"ShareSuggestionsResource",options:{page_size:5,field_set_key:"default",suggestion_type:"group_board"},allowStale:!1});Object(i.useEffect)(()=>{Object(p.b)(7120,{objectId:e,view:5,viewParameter:3059})},[]),Object(i.useEffect)(()=>{if(u){const e=l&&l.length>0?7511:7512;Object(p.b)(e,{component:13305,element:10592,view:5,viewParameter:3059})}},[u]);const h=(e,n=!1)=>{t.showOneToast(({onHide:t})=>Object(d.jsx)(a.a,{color:n?"red":void 0,duration:3e3,onHide:t,text:e}))};return u?Object(d.jsx)(U,{boardId:e,onInvitesDidUpdate:()=>{n(),r()},onInviteDidComplete:(e,t,n)=>{t?h(o.a._("1 invite sent!","BoardCollabInviteFormContainer.showInviteSuccessToast.text","Toast for successfully sending invitation of collaborating a board")):((e,t)=>{const n=o.a._("Failed to invite {{userIdentifier}} to collaborate","Toast for failing to send invitation of collaborating a board","Toast for failing to send invitation of collaborating a board");h(t&&t.message?t.message:Object(H.b)(n,{userIdentifier:e}).join(""),!0)})(e,n)},shareSuggestions:l||[]}):Object(d.jsx)(c.f,{display:"flex",justifyContent:"center",paddingY:12,width:"100%",children:Object(d.jsx)(c.T,{accessibilityLabel:o.a._("Loading contacts","BoardCollab.BoardCollabInviteFormContainer","Accessibility label on loading spinner"),show:!0})})}const q="INVITE_SETTING",G="REQUEST_TO_JOIN_SETTING";function W({boldHeading:e,setting:t,viewerIsOwner:n}){const r={0:{name:o.a._("Do (almost) everything","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o.a._("Add, move or delete Pins and sections, comment and react","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")},1:{name:o.a._("Save and comment","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:n?o.a._("Save Pins, organize them, comment and react","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting"):o.a._("Save Pins, organize them, comment, and react. For more permissions, reach out to the board owner!","save.board.BoardPage.ModalContents.BoardCollabSettings.SaveOnly.Collab","Text explaining collaborator permission setting")},[q]:{name:o.a._("Invite other people","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o.a._("Collaborators can invite others to this board","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")},[G]:{name:o.a._("Board requests","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o.a._("People can request to join this board","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")}},a=e?c.u:c.ab;return Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(a,{color:"darkGray",size:e?"sm":"lg",children:r[t].name}),Object(d.jsx)(c.f,{paddingY:1,children:Object(d.jsx)(c.ab,{color:"gray",size:"lg",children:r[t].description})})]})}var Y=n("EwHv"),K=n("TgLd"),V=n("EC67");function X({board:e,currentPermissionLevel:t,navigateToPermissions:n,onDismiss:r}){var a;const s="number"==typeof e.collaborator_count&&e.collaborator_count>0,[l,u]=Object(i.useState)(!s),h=Object(A.a)(),b=Object(V.h)(),p=h.isAuth&&(null===(a=e.owner)||void 0===a?void 0:a.id)===h.id,f=p||e.collaborator_invites_enabled,g=l&&!s||!l;return Object(d.jsx)(K.b,{accessibilityModalLabel:l?o.a._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"):o.a._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"),footer:f&&!l?Object(d.jsx)(c.Z,{onTap:()=>u(!0),rounding:8,children:Object(d.jsxs)(c.f,{display:"flex",alignItems:"center",children:[Object(d.jsx)(c.w,{accessibilityLabel:o.a._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","accessibility label on icon button"),icon:"add",bgColor:"red",iconColor:"white"}),Object(d.jsx)(c.f,{paddingX:3,children:Object(d.jsx)(c.ab,{size:"lg",weight:"bold",children:o.a._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Clickable text to show invite form")})})]})}):null,heading:Object(d.jsx)(c.f,{padding:8,children:Object(d.jsx)(c.u,{align:"center",size:"md",children:l?o.a._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal"):o.a._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal")})}),onDismiss:r,children:Object(d.jsxs)(c.f,{marginBottom:5,children:[g&&Object(d.jsxs)(c.f,{paddingX:6,children:[Object(d.jsx)(c.f,{paddingY:3,children:Object(d.jsx)(c.ab,{size:"sm",children:p?o.a._("Collaborators can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Text before explaining current collaborator permission setting"):o.a._("You can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Text before explaining current collaborator permission setting")})}),Object(d.jsxs)(c.f,{alignItems:"start",display:"flex",justifyContent:"between",marginBottom:4,children:[Object(d.jsx)(c.f,{width:"60%",children:Object(d.jsx)(W,{boldHeading:!0,viewerIsOwner:p,setting:t})}),p&&Object(d.jsx)(c.w,{accessibilityLabel:o.a._("Edit board permissions","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on icon button"),icon:"arrow-forward",onClick:n})]})]}),l?Object(d.jsxs)(c.f,{paddingX:2,children:[Object(d.jsx)(m,{boardId:e.id}),Object(d.jsx)(z,{boardId:e.id})]}):Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(c.f,{paddingX:6,paddingY:5,children:Object(d.jsx)(c.ab,{size:"sm",children:o.a._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Header before listing collaborators on a group board")})}),Object(d.jsx)(Y.a,{board:e,scrollInfo:null,onBoardLeave:()=>{const e=h.isAuth?"/"+h.username:"/";b.replace(e)},renderInvite:(e,t,n)=>{const i={invite:e,onBoardLeave:t,onInviteDidUpdate:n,useGestaltModal:!0,isDim:!1};return Object(d.jsx)(j.a,{...i})}})]})]})})}var Z=n("/MKj"),Q=n("pLLR"),J=n("oN2T");function $({board:{collaborator_invites_enabled:e,collaborator_requests_enabled:t,id:n},currentPermissionLevel:r,navigateToCollaborators:a,onDismiss:s}){const[l,u]=Object(i.useState)(r),[h,b]=Object(i.useState)(e),[f,g]=Object(i.useState)(t),[m,j]=Object(i.useState)(!1),v=Object(Q.d)(),O=Object(Z.useDispatch)();return Object(d.jsx)(K.b,{accessibilityModalLabel:o.a._("Board permissions","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"),heading:Object(d.jsxs)(c.f,{paddingY:8,position:"relative",children:[Object(d.jsx)(c.f,{position:"absolute",top:!0,left:!v.isRTL,right:v.isRTL,paddingY:8,paddingX:6,children:Object(d.jsx)(c.w,{accessibilityLabel:o.a._("Back","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"arrow-back",iconColor:"darkGray",onClick:a})}),Object(d.jsx)(c.u,{align:"center",size:"md",children:o.a._("Collaborators can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal")}),Object(d.jsx)(c.f,{position:"absolute",top:!0,left:v.isRTL,right:!v.isRTL,paddingY:8,paddingX:6,children:Object(d.jsx)(c.w,{accessibilityLabel:o.a._("Close","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"cancel",iconColor:"darkGray",onClick:s})})]}),footer:Object(d.jsx)(c.f,{display:"flex",justifyContent:"end",children:Object(d.jsx)(c.g,{color:"red",disabled:m||l===r&&h===e&&f===t,inline:!0,onClick:()=>{j(!0);const i={id:n},o={view:5,viewParameter:3472};h!==e&&(i.collaborator_invites_enabled=h,Object(p.b)(h?106:107,{element:11896,...o})),l!==r&&(i.collaborator_permissions_setting=l,Object(p.b)(8841,{...o})),f!==t&&(i.collaborator_requests_enabled=f),O(Object(J.n)(i)).then(()=>s())},size:"lg",text:o.a._("Done","save.board.BoardPage.ModalContents.PermissionsModal","Submit button on a form")})}),onDismiss:s,children:Object(d.jsxs)(c.f,{paddingX:12,children:[Object(d.jsx)(c.f,{paddingY:3,children:Object(d.jsx)(c.ab,{size:"sm",children:o.a._("Permissions","save.board.BoardPage.ModalContents.PermissionsModal","Heading before listing possible board permissions")})}),Object(d.jsxs)(c.f,{alignItems:"center",display:"flex",children:[Object(d.jsx)(c.M,{checked:0===l,id:"ALL",onChange:()=>u(0),value:0}),Object(d.jsx)(c.f,{marginEnd:12,paddingX:2,children:Object(d.jsx)(W,{setting:0})})]}),Object(d.jsxs)(c.f,{display:"flex",paddingY:6,"data-test-id":"invite-radio-container",children:[Object(d.jsx)(c.M,{checked:1===l,id:"SAVE_ONLY",onChange:()=>u(1),value:1}),Object(d.jsx)(c.f,{marginEnd:12,paddingX:2,children:Object(d.jsx)(W,{setting:1})})]}),Object(d.jsx)(c.f,{paddingY:3,children:Object(d.jsx)(c.ab,{size:"sm",children:o.a._("Invitations","save.board.BoardPage.ModalContents.PermissionsModal","Heading before group board invitation permission form setting")})}),Object(d.jsxs)(c.f,{display:"flex",marginBottom:6,"data-test-id":"invite-checkbox-container",children:[Object(d.jsx)(c.k,{checked:h,id:"inviteSetting",onChange:({checked:e})=>b(e)}),Object(d.jsx)(c.f,{marginEnd:12,paddingX:2,children:Object(d.jsx)(W,{setting:q})})]}),Object(d.jsxs)(c.s,{alignItems:"center",justifyContent:"start",children:[Object(d.jsx)(c.k,{checked:f,id:"inviteSetting",onChange:({checked:e})=>g(e)}),Object(d.jsx)(c.f,{marginEnd:12,paddingX:2,children:Object(d.jsx)(W,{setting:G})})]})]})})}function ee({board:e,onDismiss:t}){const[n,o]=Object(i.useState)("collaboratorsView"),{collaborator_permissions_setting:r}=e;return"collaboratorsView"===n?Object(d.jsx)(X,{board:e,currentPermissionLevel:r,navigateToPermissions:()=>o("permissionsView"),onDismiss:t}):Object(d.jsx)($,{board:e,currentPermissionLevel:r,navigateToCollaborators:()=>o("collaboratorsView"),onDismiss:t})}},OSge:function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));const i="0.8.0",o=9/16,r=6;function a(e,t=1){return{x:e/5,y:e*(t-1)}}const s={HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",MENTION_STICKER:"story_pin_mention_sticker_block",PRODUCT_STICKER:"story_pin_product_sticker_block"},c={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1},d={...c,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}},OWXb:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("eOdZ");function o(e){return t=>function(e){return i.a.create("BoardActionStatusResource",{board_id:e}).callGet({showError:!1}).then(e=>new Promise((t,n)=>{const i=e&&e.resource_response&&e.resource_response.data&&e.resource_response.data.blocking_actions;i?t(i):n(new Error("No blocking actions found in the response"))}))}(e).then(n=>(t({type:"BLOCKING_ACTIONS_UPDATED",payload:{boardId:e,blockingActions:n}}),n))}},Oz7m:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("KEt0"),r=n("n6mq"),a=n("nKUr");function s(e){return null!=e}function c({additionalPadding:e,inline:t,items:n}){const c=e?Object(a.jsx)("span",{style:{padding:`0 ${4*e}px`},children:Object(a.jsx)(o.a,{})}):Object(a.jsx)(o.a,{}),d=n.filter(s).reduce((e,t,n)=>[...e,0!==n?c:null,t],[]).filter(s).map((e,t)=>Object(a.jsx)(i.Fragment,{children:e},t));return 0===d.length?null:t?Object(a.jsx)(r.f,{children:d}):Object(a.jsx)(r.s,{alignItems:"center",justifyContent:"start",children:d})}},P2Et:function(e,t,n){n.d(t,"b",(function(){return z}));var i=n("q1tI"),o=n("ks/r"),r=n("d7JY"),a=n("Ye/N"),s=n("n6mq"),c=n("nKUr");function d({isSection:e}){const t=e?a.a._("There aren’t any Pins in this section yet","EmptyBoard.EmptyText.section","Statement that there are no pins in the section"):a.a._("There aren’t any Pins on this board yet","EmptyBoard.EmptyText.board","Statement that there are no pins on the board");return Object(c.jsx)(r.a,{children:Object(c.jsx)(s.f,{paddingY:8,children:Object(c.jsx)(s.ab,{color:"darkGray",size:"lg",children:t})})})}function l({hasSections:e,isSection:t}){return Object(c.jsx)(s.f,{width:"100%",display:"flex",justifyContent:"center",children:!t&&e?null:Object(c.jsx)(d,{isSection:t})})}var u=n("3z7j"),h=n("mmKv"),b=n("dKiF");const p=e=>null===e,f=e=>e?164:5,g=e=>"story"===e.type&&["recommended_searches","search_related_queries","BUBBLE_ONE_COL"].includes(e.story_type),m=(e,t)=>e+(e>=t?1:0),j=Object(b.b)(0,b.a)(e=>e);function v(e){const{boardSectionId:t,gridItem:n,index:i,paddingBottom:o,renderPinItem:r,viewParameter:a}=e,{itemKey:s}=n;let d=null;switch(s.type){case"story":d=Object(c.jsx)(h.a,{slot:i,storyId:s.id,viewType:f(t),viewParameter:a});break;case"pin":d=Object(c.jsx)("div",{style:{paddingBottom:o},children:r(n,i)});break;default:d=null}return Object(c.jsx)("div",{children:d},`${s.type}:${s.id}`)}var O=n("MaRn"),x=n("MhBu"),y=n("R0ru"),_=n("9X5u"),w=n("rg+c");const C=-1;var S=Object(_.a)(w.a.Pin)((function(e){const{allowReordering:t,children:n,connectDropTarget:i,index:o,isDragWithinBounds:r}=e;return t&&i?i(Object(c.jsx)("div",{style:{opacity:o===C||r?1:.5},children:n})):n})),I=n("EhF7"),T=n("82UD"),E=n("0S8y");function P(e){const{allowReordering:t,boardSectionId:n,gridItem:i,handlePinDragBegin:o,handlePinDragEnd:r,handlePinDragHover:a,index:s,lfvExperiences:d,onBulkEditPinClick:l,source:u,target:h,viewParameter:b}=e,{inBulkEditMode:p,isCollaborator:g,isGroupBoard:m,isOwnBoard:j,isSelected:v,itemKey:{id:O}}=i,x=u!==C,y=h===s,_={pinId:O,imageOnlyOption:!j&&Object(E.b)(d)?"image-only":"default",attributionOption:m?"show":"hide",pinImageCrop:"none",surface:p?"BulkEditMode":"BaseBoardPinGrid",trackingParameters:{slotIndex:s,viewParameter:b,viewType:f(n)}};if(!j&&!g)return Object(c.jsx)(T.a,{..._});let S="no-selection";p&&(S=v?"selected":"deselected");let P=Object(c.jsx)(T.a,{..._,disableHover:x||p,selectionState:S});return p&&(P=Object(c.jsx)(I.a,{onClick:()=>l(O),children:P})),t&&(P=Object(c.jsx)(w.b,{index:s,isDragging:y,onDragBegin:o,onDragHover:a,onDragEnd:r,type:w.a.Pin,children:P})),P}var D=n("eOdZ"),B=n("IeEU"),k=n("2qKt"),M=n("ANjH"),R=n("x12c"),A=n("U4JR"),L=n("Wrea"),N=n("yjg8"),F=n("KFEb");function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class H extends i.Component{constructor(...e){super(...e),U(this,"state",{reorderSource:C,reorderTarget:C}),U(this,"handlePinDeleted",(e,t,n)=>{const i=n,{board:o,boardSectionId:r,dispatch:a,onPinDelete:s}=this.props;a(Object(L.f)(o.id)),a(Object(x.a)({feedId:r||o.id,feedType:r?F.a.SECTION_PINS:F.a.BOARD_PINS,itemIds:[i],itemType:"pin"})),r&&a(Object(u.a)(r)),s()}),U(this,"handlePinAdded",(e,t,n)=>{const{board:i,boardSectionId:o,dispatch:r}=this.props;r(Object(L.f)(i.id)),o&&r(Object(u.a)(o)),this.props.resource.refreshData()}),U(this,"handlePinDragBegin",e=>this.setState({reorderSource:e})),U(this,"handlePinDragHover",e=>{const{reorderTarget:t}=this.state;e!==t&&this.setState({reorderTarget:e})}),U(this,"handlePinDragEnd",e=>{const{board:t,boardSectionId:n,dispatch:i,feed:o,viewParameter:r}=this.props,{reorderSource:a,reorderTarget:s}=this.state;if(o&&e&&s!==C&&a!==C&&s!==a){const e=this.hiddenItemIndex,[c,d]=-1===e?[a,s]:[m(a,e),m(s,e)],l=Object(F.c)(o,c,d),u=o[c].id;i(Object(O.a)({feedType:n?F.a.SECTION_PINS:F.a.BOARD_PINS,feedId:n||t.id,itemType:"pin",targetItemId:o[d].id,sourceItemId:o[c].id}));const h={board_id:t.id,pin_id:u},b=l.filter(e=>"pin"===e.type).map(e=>e.id),p=b.indexOf(u),g=p-1;g>=0&&g<b.length&&(h.pin_id_before=b[g]);const j=p+1;j>=0&&j<b.length&&(h.pin_id_after=b[j]);const v={objectId:u,view:f(n),viewParameter:r};D.a.create("BoardPinsReorderResource",h).callUpdate({showError:!1}).then(()=>Object(A.b)(7122,v))}this.setState({reorderSource:C,reorderTarget:C})}),U(this,"handleFetchMore",()=>{const{resource:{fetchMore:e,isAtEnd:t,isFetching:n}}=this.props;t||n||e()}),U(this,"renderPinItem",(e,t)=>{const{lfvExperiences:n,onBulkEditPinClick:i,viewer:o,viewParameter:r,boardSectionId:a}=this.props,{reorderSource:s,reorderTarget:d}=this.state;return Object(c.jsx)(P,{allowReordering:this.allowReordering,boardSectionId:a,gridItem:e,handlePinDragBegin:this.handlePinDragBegin,handlePinDragEnd:this.handlePinDragEnd,handlePinDragHover:this.handlePinDragHover,index:t,lfvExperiences:n,onBulkEditPinClick:i,source:s,target:d,viewer:o,viewParameter:r})}),U(this,"renderGridItem",({data:e,itemIdx:t})=>{const{boardSectionId:n,viewParameter:i}=this.props;return Object(c.jsx)(v,{boardSectionId:n,gridItem:e,index:t,paddingBottom:this.props.denseViewSelected?6:0,renderPinItem:this.renderPinItem,viewParameter:i})})}componentDidMount(){const{board:{id:e},feed:t,resource:{isFetching:n,refreshData:i}}=this.props;this.subscribers=[R.b.subscribe(e,"pinDeleted",this.handlePinDeleted),R.b.subscribe(e,"pinCreated",this.handlePinAdded)],p(t)&&!n&&i()}componentDidUpdate(e){const{feed:t,resource:{isFetching:n,refreshData:i}}=this.props;p(t)&&!p(e.feed)&&!n&&i()}componentWillUnmount(){this.subscribers.forEach(e=>e.unsubscribe()),delete this.subscribers}get allowReordering(){const{board:{collaborated_by_me:e=!1},isOwnBoard:t,isPinGridSorted:n}=this.props;return!n&&(t||e)}get hiddenItemIndex(){const{denseViewSelected:e,feed:t}=this.props;return e?(t||[]).findIndex(g):-1}render(){const{bulkEditSelectedPins:e,board:t,boardSectionId:n,feed:r,footerStoryId:d,denseViewSelected:u,inBoardOrganizationMode:h,inSectionOrganizationMode:b,isDragWithinBounds:p,inSelectAll:f,renderFooterStory:g,resource:{isAtEnd:m,isFetching:v,isLoaded:O},isOwnBoard:x,refreshFilteredFeed:_,scrollContainer:w}=this.props,{access:I,collaborated_by_me:T=!1,collaborator_count:E=0,section_count:P}=t,{reorderSource:D,reorderTarget:B}=this.state;if(!r||!r.find(e=>"pin"===e.type))return v?Object(c.jsx)(s.T,{accessibilityLabel:a.a._("Board Pins grid"),show:!0}):(O&&r&&0===r.length&&_&&_(),Object(c.jsxs)(i.Fragment,{children:[O&&r&&0===r.length&&Object(c.jsx)(l,{hasSections:!!P,isSection:!!n}),g&&d&&g(d)]}));const k=this.allowReordering,M=k&&D!==B&&D!==C&&B!==C;let R=r||[];const A=this.hiddenItemIndex;if(-1!==A&&(R=[...R.slice(0,A),...R.slice(A+1)]),M&&(R=Object(F.c)(R,D,B)),!R.length)return Object(c.jsx)(s.T,{accessibilityLabel:a.a._("Board Pins grid"),show:!0});const L={inBulkEditMode:h||b,inDenseView:u||!1,isGroupBoard:E>0,userCanEdit:(I||[]).includes("write"),isOwnBoard:x,isCollaborator:T},U=R.map((t,n)=>{const{inBulkEditMode:i}=L,o="pin"===t.type&&!(null==e||!e.includes(t.id));return j({...L,isSelected:i&&(f?!o:o),itemKey:t})});return Object(c.jsxs)(s.f,{"data-test-id":"base-board-pin-grid",minHeight:u?800:"",children:[Object(c.jsx)(S,{allowReordering:k,index:B,isDragWithinBounds:p,children:Object(c.jsx)(y.default,{columnWidth:u?N.f:N.e,comp:this.renderGridItem,gutterWidth:u?2*N.b/3:N.b,isAtEnd:m,isFetching:v,isLoaded:O,items:U,layout:"basicCentered",loadItems:this.handleFetchMore,paddingStyle:u?"dense":"simplified",scrollContainer:w,virtualize:!0},`${String(u)}-${String(h)}-${String(b)}`)}),k&&D!==C&&Object(c.jsx)(o.a,{}),v&&Object(c.jsx)(s.f,{position:"relative",paddingY:3,children:Object(c.jsx)(s.T,{accessibilityLabel:a.a._("Loading Board Feed"),show:!0})}),m&&d&&g&&g(d)]})}}const z=e=>e?e.reduce(({feed:e,footerStoryId:t},n)=>{const i="story"===n.type&&"board_ideas_preview_detailed"===n.story_type;return{feed:e.concat(i?[]:[n]),footerStoryId:i?n.id:t}},{feed:[],footerStoryId:void 0}):{feed:e,footerStoryId:void 0},q=Object(M.compose)(Object(k.a)(1000182),B.a)(H);q.displayName="BaseBoardPinGrid";t.a=q},P6AF:function(e,t,n){var i=n("/MKj"),o=n("ANjH"),r=n("KFEb");var a=n("5FNA"),s=n("w70y"),c=n("P2Et");const d=Object(o.compose)(Object(i.connect)((e,t)=>Object(c.b)(e.feeds[r.a.SECTION_PINS][t.boardSectionId])),Object(s.b)({name:"BoardsResource",key:"boardsResource",options:e=>Object(a.a)(e.viewer.username,!0)}),Object(s.b)({name:"BoardSectionPinsResource",key:"resource",options:e=>{return t=e.boardSectionId,n=e.isOwnBoard,i=e.board.should_show_board_activity,{currentFilter:e.currentFilter,field_set_key:i?"react_grid_pin_with_board_activity":"react_grid_pin",is_own_profile_pins:n,page_size:25,redux_normalize_feed:!0,section_id:t};var t,n,i}}))(c.a);d.displayName="BoardSectionPinGrid";t.a=d},P6kd:function(e,t,n){n.d(t,"a",(function(){return b}));var i=n("q1tI"),o=n("Ye/N"),r=n("oRao"),a=n("eOdZ"),s=n("Sbkd"),c=n("vvax"),d=n("n6mq"),l=n("nKUr");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(...e){super(...e),u(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",()=>{}),u(this,"mounted",!1),u(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),u(this,"handleKeyDown",e=>{38===e.keyCode?this.handlePrevHashtag(e):40===e.keyCode?this.handleNextHashtag(e):27===e.keyCode?this.handleClose(e):13===e.keyCode&&this.handleSubmit(e)}),u(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),u(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),u(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),u(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),u(this,"callResource",e=>{const{makeCancelablePromise:t}=this.props;t(a.a.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then(e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const{recommendations:e,resourceLoaded:t,selectedIndex:n}=this.state,{anchor:i,idealDirection:a}=this.props,s=e.filter(e=>e.query),u=a||"down",h="flyout_"+s.length;return t&&s.length>0?Object(l.jsx)("div",{className:"HashtagFlyout",children:Object(l.jsx)(d.J,{anchor:i,idealDirection:u,onDismiss:this.onDismiss,size:"sm",children:Object(l.jsx)("div",{className:"HashtagRecommendations",children:s.length>0?s.map((e,t)=>Object(l.jsx)("div",{className:"HashtagItem",children:Object(l.jsx)(d.Z,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:Object(l.jsxs)(d.f,{display:"flex",justifyContent:"between",alignItems:"center",color:t===n?"lightGray":"transparent",padding:1,children:[Object(l.jsx)(d.f,{flex:"grow",children:Object(l.jsx)(d.ab,{inline:!0,size:"md",weight:"bold",children:e.query})}),Object(l.jsx)(d.f,{flex:"none",children:Object(l.jsx)(d.ab,{inline:!0,size:"sm",children:Object(c.b)(o.a.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout","label for n pins in hashtag flyout"),{count:Object(l.jsx)(r.a,{value:Number(e.pin_count)},"pinCount")})})})]})})},e.query)):null})},h)}):null}}function b(e){const t=Object(s.a)();return Object(l.jsx)(h,{...e,makeCancelablePromise:t})}},P9b8:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("SFi7");t.DragDropContext=i.DragDropContext,t.DragDropContextProvider=i.DragDropContextProvider,t.DragDropContextConsumer=i.Consumer;var o=n("QNmZ");t.DragLayer=o.default;var r=n("9EBm");t.DragSource=r.default;var a=n("tvWU");t.DropTarget=a.default;var s=n("fpRd");t.DragPreviewImage=s.default;var c=n("sGxw");t.useDrag=c.useDrag,t.useDragLayer=c.useDragLayer,t.useDrop=c.useDrop},PNKV:function(e,t,n){},PRGv:function(e,t,n){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i||((i=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),i}},PnD8:function(e,t,n){e.exports=n("6uti")},"Pv/+":function(e,t,n){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var i=n("MhBu"),o=n("eOdZ"),r=n("oN2T"),a=n("KFEb"),s=n("Wer7");function c(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}function d(e,t){return n=>o.a.create("BoardSectionEditResource",{section_id:t}).callDelete({showError:!1}).then(()=>Promise.all([n(c(e,t)),n(Object(i.a)({feedId:e,feedType:a.a.BOARD_SECTIONS,itemIds:[t],itemType:"board_section"})),n(Object(r.c)(e,"pin_count")),n(Object(s.f)("BoardSectionsRepinResource",{board_id:e}))]))}},Q59z:function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=(n("3qQZ"),n("WjpJ")),a=n.n(r),s=n("n6mq"),c=n("nKUr");const d=80,l=1.2;function u({layoutType:e,thumbnails:t}){switch(e){case 4:const e=t&&t[0]&&t[0]["236x"];return Object(c.jsx)(s.C,{rounding:4,width:d,height:80,children:e?Object(c.jsx)(s.x,{alt:"",color:"gray",fit:"cover",naturalHeight:e.height,naturalWidth:e.width,src:e.url||""}):Object(c.jsxs)(s.f,{display:"flex",children:[Object(c.jsx)(s.f,{color:"lightGray",height:d,width:39.4}),Object(c.jsxs)("div",{style:{paddingLeft:l},children:[Object(c.jsx)(s.f,{color:"lightGray",height:39.4,width:39.4}),Object(c.jsx)(s.f,{color:"lightGray",dangerouslySetInlineStyle:{__style:{marginTop:"1.2px"}},height:40.6,width:39.4})]})]})});case 2:return Object(c.jsx)(s.C,{rounding:4,width:d,height:80,children:Object(c.jsx)(s.f,{display:"flex",children:a()(0,2).map(e=>{const n=!!t&&t.length>0&&t[e];return Object(c.jsx)("div",{style:{paddingRight:l},children:Object(c.jsx)(s.f,{height:d,width:39.4,children:n&&Object(c.jsx)(s.x,{alt:"",color:"gray",fit:"cover",naturalHeight:d,naturalWidth:39.4,src:n["236x"].url||""})})},e)})})});default:return null}}var h=n("c4Fo"),b=n("U4JR");const p=[502043,502085,502419];function f({boardId:e,handleShowArchiveConfirmation:t,handleShowGroupPinsModal:n}){return Object(c.jsx)(h.a,{placementId:18,experienceIds:p,children:({display_data:i,complete:o,dismiss:r})=>Object(c.jsx)(g,{boardId:e,displayData:i,complete:o,dismiss:r,handleShowArchiveConfirmation:t,handleShowGroupPinsModal:n})})}function g({boardId:e,displayData:t,complete:n,dismiss:o,handleShowArchiveConfirmation:r,handleShowGroupPinsModal:a}){const d=t.custom_properties,[l,h]=Object(i.useState)(null);Object(i.useEffect)(()=>()=>clearTimeout(l),[l]);const p={2:r,3:()=>{d&&a(d.cluster_id,d.section_name)}};return Object(i.useEffect)(()=>{(e=>{if(!l){const t=setTimeout(()=>{e()},2e4);h(t)}})(o),Object(b.b)(13,{view:5,viewParameter:3069,element:11758,objectId:JSON.stringify(t.experience.experience_id),board_id:e})},[]),Object(c.jsx)(s.z,{children:Object(c.jsxs)("div",{className:"BoardActionUpsellCard",children:[Object(c.jsx)(s.f,{flex:"none",children:Object(c.jsx)(u,{layoutType:t.layout_type,thumbnails:t.thumbnail_image_urls})}),Object(c.jsxs)(s.f,{marginStart:4,children:[Object(c.jsx)(s.ab,{inline:!0,children:Object(c.jsx)(s.u,{size:"sm",children:t.text})}),Object(c.jsxs)(s.f,{display:"flex",justifyContent:"start",marginTop:4,width:"100%",children:[Object(c.jsx)(s.g,{color:"gray",inline:!0,onClick:()=>{Object(b.b)(123,{view:5,viewParameter:3069,element:11758,objectId:JSON.stringify(t.experience.experience_id),board_id:e}),o()},text:t.dismiss_button.text}),Object(c.jsx)(s.f,{paddingX:2,children:Object(c.jsx)(s.g,{color:"red",inline:!0,onClick:()=>{p[t.complete_button.action_type](),Object(b.b)(101,{view:5,viewParameter:3069,element:11758,objectId:JSON.stringify(t.experience.experience_id),board_id:e}),n()},text:t.complete_button.text})})]})]})]})})}var m=n("Hz/G");function j({density:e,surface:t}){Object(m.a)({boardDensity:e,component:"board"===t?13183:13187,surface:"board",viewType:"board"===t?5:164})}var v=n("Ye/N");var O=n("+nTX"),x=n("s6a/"),y=n("GFC/"),_=n("HJ6M");function w({board:e,currentFilter:t,eligibleFilters:n,isOwnBoard:r,surface:a,setCurrentFilter:d,setTitle:l}){const u=Object(i.useRef)(null),h=Object(o.useSelector)(({ui:e})=>{var t;return null==e||null===(t=e.views)||void 0===t?void 0:t.boardPinView}),[p,f]=Object(i.useState)(!1),g=()=>{f(!1)},m=[],w={[_.a]:12111,[_.c]:12110,[_.b]:12227};if(n){const i={items:n.map(n=>{var i;return{isSelected:n.pin_type===t,onClick:()=>{var t,i;Object(b.b)(101,{component:13475,element:w[null!==(t=n.pin_type)&&void 0!==t?t:-1],objectId:e.id,view:5,viewParameter:r?3069:3070}),d(null!==(i=n.pin_type)&&void 0!==i?i:-1),l(n.pin_type===_.a?null:n.text),g()},text:null!==(i=n.text)&&void 0!==i?i:""}}),label:v.a._("Filter by type","board.experimentalBoardActionBar.filterOptions","List of board filter options")};m.push(i)}return m.push(function({handleClose:e,selectedDensity:t,surface:n}){return{items:[{isSelected:"regular"===t,onClick:()=>{e(),j({density:"regular",surface:n})},text:v.a._("Default","BoardHeader.ActionBar.DensityOption-Default","Clickable text to set board view density to default mode")},{isSelected:"dense"===t,onClick:()=>{e(),j({density:"dense",surface:n})},text:v.a._("Compact","BoardHeader.ActionBar.DensityOption-Compact","Clickable text to set board view density to compact mode")}],label:v.a._("View options","BoardHeader.ActionBar.ViewOptions","List of board view options")}}({handleClose:g,selectedDensity:h,surface:a})),Object(c.jsxs)(i.Fragment,{children:[Object(c.jsx)(s.f,{ref:u,children:Object(c.jsx)(s.w,{accessibilityLabel:v.a._("Board Filter","board.experimentalBoardActionBar.boardFilter","Filter to select specific Pins on board"),icon:"filter",iconColor:"darkGray",onClick:()=>{Object(b.b)(101,{element:12020,objectId:e.id,view:5,viewParameter:r?3069:3070}),f(!p)},selected:p,size:"lg"})}),p&&Object(c.jsx)(O.a,{anchor:u.current,onDismiss:g,size:"lg",children:m.map(({items:e,label:t})=>Object(c.jsx)(x.a,{label:t,children:e.map(({isSelected:e,onClick:t,text:n})=>Object(c.jsx)(y.a,{icon:e?"selected":null,onClick:t,children:n},n))},t))})]})}var C=n("2qKt"),S=n("vvax");var I=Object(C.a)(1000332)((function({board:e,currentFilter:t,isOwnBoard:n,section:o,setCurrentFilter:r,showExperienceTooltip:a}){const{eligible_pin_type_filters:d}=null!=o?o:e,[l,u]=Object(i.useState)(null),b=Object(i.useRef)(null),p=o?o.pin_count:e.pin_count;return Object(c.jsxs)(i.Fragment,{children:[Object(c.jsxs)(s.f,{alignItems:"center",direction:"row",display:"flex",paddingX:8,children:[Object(c.jsx)(s.f,{flex:"grow",children:Object(c.jsx)(s.u,{accessibilityLevel:2,size:"sm",children:t>0&&l?l:Object(S.b)(v.a.ngettext("{{ pinCount }} Pin","{{ pinCount }} Pins",null!=p?p:0,"board.experimentalBoardActionBar.pinCount","Number of Pins on board or section"),{pinCount:p})})}),Object(c.jsx)(s.f,{ref:b,children:Object(c.jsx)(w,{board:e,isOwnBoard:n,currentFilter:t,eligibleFilters:d,setCurrentFilter:r,setTitle:u,surface:o?"section":"board"})})]}),a&&b&&Object(c.jsx)(s.z,{children:Object(c.jsx)(h.a,{experienceIds:[502974],placementId:1000332,children:({dismiss:e,display_data:t})=>((e,t)=>{var n;return b&&(null===(n=b.current)||void 0===n||n.scrollIntoView(!1)),Object(c.jsx)(s.J,{showCaret:!0,anchor:b.current,color:"blue",idealDirection:"down",onDismiss:e,shouldFocus:!1,size:312,children:Object(c.jsx)(s.f,{padding:3,children:Object(c.jsx)(s.ab,{align:"center",color:"white",overflow:"normal",weight:"bold",children:t.text})})})})(e,t)})})]})})),T=n("lnQP"),E=n("zUcL"),P=n("P6AF"),D=n("VVkO"),B=n("6j0b"),k=n("TgLd"),M=n("fOIk");function R(){const e=Object(c.jsx)(s.f,{display:"flex",justifyContent:"center",paddingX:8,children:Object(c.jsx)(s.ab,{children:Object(S.b)(v.a._("Add a {{ star }} to show collaborators your favorite Pins","groupBoardFavoriteEducationModal.text","Text for modal informing users of changes from group board reactions to board favorites"),{star:Object(c.jsx)(s.f,{display:"inlineBlock",children:Object(c.jsx)(s.v,{accessibilityLabel:v.a._("Favorite icon","groupBoardFavoriteEducationModal.bodyFavoriteIcon","Accessibility label for favorite icon"),color:"darkGray",dangerouslySetSvgPath:M.a,size:12})})})})}),t=e=>Object(c.jsx)(s.s,{justifyContent:"end",children:Object(c.jsx)(s.g,{inline:!0,onClick:e,text:v.a._("Got it","groupBoardFavoriteEducationModal.doneButton","Done button for modal")})}),n=e=>Object(c.jsxs)(s.f,{alignItems:"center",display:"flex",justifyContent:"center",paddingX:4,paddingY:6,position:"relative",children:[Object(c.jsx)(s.f,{maxWidth:400,children:Object(c.jsx)(s.u,{align:"center",size:"md",children:Object(S.b)(v.a._("{{ heart }}  is now  {{ star }}","groupBoardFavoriteEducationModal.heading","Heading for modal informing users of changes from group board reactions to board favorites"),{heart:Object(c.jsx)(s.f,{display:"inlineBlock",paddingX:1,children:Object(c.jsx)(s.v,{accessibilityLabel:v.a._("Heart icon","groupBoardFavoriteEducationModal.headingHeartIcon","Accessibility label for heart icon"),color:"darkGray",icon:"heart",size:16})}),star:Object(c.jsx)(s.f,{display:"inlineBlock",paddingX:1,children:Object(c.jsx)(s.v,{accessibilityLabel:v.a._("Favorite icon","groupBoardFavoriteEducationModal.headingFavoriteIcon","Accessibility label for favorite icon"),color:"darkGray",dangerouslySetSvgPath:M.a,size:16})})})})}),Object(c.jsx)(s.f,{position:"absolute",top:!0,right:!0,padding:6,children:Object(c.jsx)(s.w,{accessibilityLabel:v.a._("Close","groupBoardFavoriteEducationModal.closeModalButton","Accessibility label for close modal button"),icon:"cancel",iconColor:"darkGray",onClick:e})})]});return Object(c.jsx)(h.a,{experienceIds:[503077],placementId:18,children:({complete:i,dismiss:o})=>Object(c.jsx)(k.b,{accessibilityModalLabel:v.a._("Group board reaction","groupBoardFavoriteEducationModal.modalAccessibilityLabel","Accessiblility label for modal used to educate group board collaborators about favorite button"),footer:t(i),heading:n(o),onDismiss:o,size:"sm",children:e})})}var A=n("Pqnw"),L=n("i/p3"),N=n("79tv"),F=n("v/Q4"),U=n("zq6P"),H=n("KFEb"),z=n("QAzJ"),q=n("juW8");const G=()=>{};function W({board:e,currentView:t,handleContentViewChange:n,handleSetCurrentModal:r,handleShowEditSectionModal:a,handleShowMergeSectionsConfirmationModal:d,isOwnerOrCollaborator:l,isOwnBoard:u,isPinGridSorted:h,refreshBoardData:b=G,refreshSectionData:p=G,section:f}){const g=Object(F.a)(),m=Object(B.a)({board:e,viewer:g}),j=(e.access||[]).includes("write"),v=Object(o.useSelector)(e=>e.ui.views.boardPinView),O=Object(N.a)(f?Object(D.a)(e,f):""),{anyEnabled:x}=Object(z.a)("web_board_favorites",l),[y,w]=Object(i.useState)(_.a),[C,S]=Object(i.useState)(!1),k=Object(o.useDispatch)();Object(i.useEffect)(()=>()=>{y!==_.a&&k(f?Object(A.a)(H.a.SECTION_PINS,f.id):Object(A.a)(H.a.BOARD_PINS,e.id))},[e,y,k,f]);const M=()=>{y>0&&(w(_.a),f?p():b())};return f?Object(c.jsx)(U.a,{value:{currentFilter:y,eligibleFilters:f.eligible_pin_type_filters,refreshData:p,sectionId:f.id},children:Object(c.jsxs)(i.Fragment,{children:[l&&Object(c.jsx)(I,{board:e,currentFilter:y,isOwnBoard:u,section:f,setCurrentFilter:w,showExperienceTooltip:!1}),Object(c.jsx)(P.a,{board:e,boardSectionId:f.id,currentFilter:y,denseViewSelected:j&&"dense"===v,inSectionOrganizationMode:!1,inSelectAll:!1,isOwnBoard:u,refreshFilteredFeed:M,renderFooterStory:t=>!e.archived_by_me_at&&l&&Object(c.jsx)(s.f,{marginBottom:12,children:Object(c.jsx)(E.a,{children:Object(c.jsx)(L.a,{collection:f,storyId:t,url:O})})}),viewer:g,viewParameter:m})]})}):Object(c.jsx)(U.a,{value:{currentFilter:y,eligibleFilters:e.eligible_pin_type_filters,refreshData:b,setShowExperienceTooltip:S},children:Object(c.jsxs)(i.Fragment,{children:[l&&Object(c.jsx)(I,{board:e,currentFilter:y,isOwnBoard:u,setCurrentFilter:w,showExperienceTooltip:C}),Object(c.jsx)(T.a,{actions:{onBoardOrganizeClick:G},board:e,currentFilter:y,currentView:t,enableReordering:l,isOwnBoard:u,isPinGridSorted:h,onContentViewChange:n,onPinDelete:G,onShowEditSectionModal:a,onShowMergeSectionsConfirmationModal:(e,t)=>{r(q.a.sectionMergeConfirm),d(e,t)},refreshFilteredFeed:M,viewParameter:m}),x&&Object(c.jsx)(R,{})]})})}function Y(){Object(b.b)(101,{element:10778,component:13216,view:5,viewParameter:3069})}function K({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditClick:o,onMergeClick:r,onUnarchiveClick:a,setFlyoutType:s,showCreatePinCodeOption:c}){const d=[{dataTestId:"editBoardButton",text:v.a._("Edit board","BoardHeader.BoardOptionsFlyout.EditOption","Clickable text to enter board editing mode"),onClick:()=>{o(),e()}},{text:v.a._("Share","BoardHeader.BoardOptionsFlyout.ShareOption","Clickable text to show share options"),onClick:()=>{Y(),s("boardShare")}},{text:v.a._("Merge","BoardHeader.BoardOptionsFlyout.MergeOption","Clickable text to open merge board modal"),onClick:()=>{r(),e()}}];t?d.push({text:v.a._("Unarchive","BoardHeader.BoardOptionsFlyout.UnarchiveOption","Clickable text to open unarchive modal"),onClick:()=>{a(),e()}}):d.push({text:v.a._("Archive","BoardHeader.BoardOptionsFlyout.ArchiveOption","Clickable text to open archive modal"),onClick:()=>{n(),e()}}),c&&d.push({text:v.a._("Create Pincode","BoardHeader.BoardOptionsFlyout.PincodeOption","Clickable text to trigger Pincode modal"),onClick:()=>{i(),e()}});return{items:d,label:v.a._("Board options","BoardHeader.BoardOptionsFlyout.OptionsCategory","Category of board options in board flyout")}}function V({handleClose:e,onEditClick:t,setFlyoutType:n}){return{items:[{text:v.a._("Edit Section","BoardHeader.getSectionOptionsCategory.EditOption","Clickable text to enter board editing mode"),onClick:()=>{t(),e()}},{text:v.a._("Share","BoardHeader.getSectionOptionsCategory.ShareOption","Clickable text to show share options"),onClick:()=>{Y(),n("boardShare")}}],label:v.a._("Section options","BoardHeader.getSectionOptionsCategory.OptionsCategory","Category of section options in section flyout")}}function X({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:a,onUnarchiveClick:d,setFlyoutType:l,showCreatePinCodeOption:u,surface:h}){const b=[].concat(["section"===h?V({handleClose:e,onEditClick:r,setFlyoutType:l}):K({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditClick:o,onMergeClick:a,onUnarchiveClick:d,setFlyoutType:l,showCreatePinCodeOption:u})]);return Object(c.jsx)(s.f,{width:206,children:b.map(({items:e,label:t})=>Object(c.jsx)(x.a,{label:t,children:e.map(({dataTestId:e,isSelected:t,onClick:n,text:i})=>Object(c.jsx)(y.a,{dataTestId:e,icon:t?"selected":null,onClick:n,children:i},i))},t))})}var Z=n("0ZL5"),Q=n("fevN"),J=n("oVol");function $({board:e,onArchiveClick:t,onCreatePincode:n,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:a,onUnarchiveClick:d,showCreatePinCodeOption:l,surface:u}){const h=Object(i.useRef)(null),[b,p]=Object(i.useState)(!1),[f,g]=Object(i.useState)("boardOptions"),m=()=>{p(!1),g("boardOptions")},j={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:J.a.BOARD,url:e.url},x=()=>{p(e=>!e),g("boardOptions")},y=!!e.archived_by_me_at;return Object(c.jsxs)(s.f,{position:"relative",children:[Object(c.jsx)(s.f,{"data-test-id":"more-board-options",ref:h,children:Object(c.jsx)(s.w,{accessibilityLabel:v.a._("More Board options","BoardHeaderOVerflowFlyoutButton.IconButton.AccessibilityLabel","Accessibility label on icon button"),bgColor:"lightGray",icon:"ellipsis",iconColor:"darkGray",onClick:x,selected:b,size:"sm"})}),Object(c.jsx)(Z.a,{anchors:{3001:h.current},onCompleteByAnchor:{3001:x},placementId:18}),b&&Object(c.jsx)(O.a,{anchor:h.current,onDismiss:m,size:"boardOptions"===f?"lg":"xl",children:"boardOptions"===f?Object(c.jsx)(X,{handleClose:m,isArchived:y,onArchiveClick:t,onCreatePincode:n,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:a,onUnarchiveClick:d,setFlyoutType:g,showCreatePinCodeOption:l,surface:u}):Object(c.jsx)(Q.a,{classNames:"SendBoard",isFlyout:!0,onCreatePincodeClick:n,onHide:m,sendType:J.a.BOARD,sharedObject:j})})]})}var ee=n("FDmi"),te=n("yaUg"),ne=n("qD10");function ie(e){const{faces:t,maxFaces:n,numFaces:i,onOverflowClick:o,shouldNavigate:r=!0}=e,a=[...t].reverse(),d=t.length>n?a.slice(0,n+1):a,l=i-n;return Object(c.jsx)(s.f,{position:"relative",display:"flex",dangerouslySetInlineStyle:{__style:{flexDirection:"row-reverse"}},alignItems:"center",children:d.map((e,t)=>{const{name:n,src:i,href:a,isDim:d}=e;if(0===t&&l>0)return Object(c.jsx)(s.f,{dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},width:44,height:44,marginStart:-2,rounding:"circle",overflow:"hidden",children:Object(c.jsx)(s.x,{src:i||"",alt:n,naturalWidth:44,naturalHeight:44,fit:"contain",children:Object(c.jsx)(s.Z,{fullHeight:!0,fullWidth:!0,onTap:o,rounding:"circle",children:Object(c.jsx)(s.f,{display:"flex",justifyContent:"center",alignItems:"center",rounding:"circle",width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.4)"}},children:Object(c.jsx)(s.ab,{color:"white",size:"md",weight:"bold",children:(u=l,u>99?"99+":u)})})})})},t);{const e={__style:{opacity:d?.5:1}},o=Object(c.jsx)(s.f,{marginStart:-2,dangerouslySetInlineStyle:e,children:Object(c.jsx)(ee.a,{name:n,size:"sm",src:i,outline:!0})},t);return r?Object(c.jsx)(ne.a,{to:a,children:o},t):o}var u})})}var oe=n("EC51");function re({invitedByUser:e,isAccepted:t,onDecline:n,onAccept:i,createdAt:o}){const r=Object(F.a)(),a=e||{},{first_name:d,full_name:l,username:u,image_medium_url:h}=a,b=d||l||v.a._("others","Default text when board colalborator name is not known.","Default text when board colalborator name is not known.");return Object(c.jsx)(s.o,{children:t?Object(c.jsxs)(s.f,{width:"100%",paddingX:5,paddingY:3,rounding:2,marginStart:-1,marginEnd:-1,display:"flex",direction:"row",alignItems:"center",borderStyle:"sm",children:[Object(c.jsx)(ie,{maxFaces:2,numFaces:2,faces:[{href:r.isAuth?"/"+r.username:"",name:r.isAuth?r.fullName:"",src:r.isAuth?r.imageMediumUrl:""},{href:"/"+u,name:l,src:h}]}),Object(c.jsxs)(s.f,{marginStart:2,children:[Object(c.jsx)(s.ab,{weight:"bold",children:v.a._("You're in!","Text showing that a user has accepted the board invite and is now a part of the board","Text showing that a user has accepted the board invite and is now a part of the board")}),Object(c.jsx)(s.ab,{children:Object(te.a)(v.a._("Start collaborating with {{ invitedByUserName }} on this board"),{invitedByUserName:b})})]})]}):Object(c.jsx)(s.f,{width:540,color:"white",paddingX:6,paddingY:6,rounding:6,marginStart:-1,marginEnd:-1,borderStyle:"shadow",children:Object(c.jsxs)(s.f,{display:"flex",alignItems:"center",direction:"row",children:[Object(c.jsx)(s.f,{marginEnd:2,children:Object(c.jsx)(ee.a,{name:l,src:h,size:"md"})}),Object(c.jsx)(s.f,{flex:"grow",children:Object(c.jsx)(s.ab,{inline:!0,color:"darkGray",children:Object(S.b)(v.a._("{{ user }} invited you to collaborate on this board {{ createdAt }}","web.boardView.inviteCard.text","Label used to indicate a Pinner has invited you to join a board"),{user:Object(c.jsx)(s.ab,{color:"darkGray",inline:!0,weight:"bold",children:Object(c.jsx)(oe.a,{inline:!0,href:"/"+u,children:l})},u),createdAt:Object(c.jsx)(s.ab,{color:"gray",inline:!0,children:o})})})}),Object(c.jsxs)(s.f,{display:"flex",alignItems:"center",paddingX:1,dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},children:[Object(c.jsx)(s.f,{marginEnd:2,display:"inlineBlock",children:Object(c.jsx)(s.g,{onClick:n,text:v.a._("Decline","decline board collaborator invite or request","decline board collaborator invite or request"),color:"gray",size:"lg",inline:!0})}),Object(c.jsx)(s.g,{onClick:i,text:v.a._("Accept","Text to accept a board collaboration invite","Text to accept a board collaboration invite"),size:"lg",color:"red",inline:!0})]})]})})})}var ae=n("4dcN"),se=n("pWkb"),ce=n("eOdZ"),de=n("M1Uz"),le=n("w70y"),ue=n("Wrea"),he=n("Wer7"),be=n("nGHF");var pe=Object(be.c)(({boardId:e,inviteCode:t,shouldAutoAcceptBoardInvite:n,toastManagerContext:r,userInviterId:a})=>{const[d,l]=Object(i.useState)(!1),[u,h]=Object(i.useState)(null),b=Object(F.a)(),p=Object(o.useDispatch)(),f={board_id:e,field_set_key:"boardBanner",invite_code:t,invited_user_id:b.isAuth&&b.id};Object(i.useEffect)(()=>{a&&n&&(ce.a.create("BoardInviteResource",f).callUpdate().then(()=>{p(Object(ue.c)(e)),p(Object(he.f)("BoardInviteResource",f))}),ce.a.create("UserResource",{field_set_key:"grid_item",user_id:a}).callGet().then(({resource_response:e})=>{const t=e&&e.data;t&&h(t)}))},[n,a]);const{data:g}=Object(le.a)({name:"BoardInvitesResource",options:{current_user:!0,field_set_key:"news"}}),{data:m}=Object(le.a)({name:"BoardInviteResource",options:f}),j=!(!a||!n)||d,O=!["new","contact_request_not_approved"].includes(null==m?void 0:m.status),x=[...g||[]].pop(),y=t=>{const n=t?"collaborator_invite_accept":"collaborator_decline_invite";ae.a.trackEvent(n,"click");const i=ce.a.create("BoardInviteResource",f);(t?i.callUpdate():i.callDelete()).then(()=>{t&&(p(Object(ue.c)(e)),l(!0),r.showToast(({onHide:e})=>Object(c.jsx)(de.a,{duration:5e3,onHide:e,text:v.a._("You're in! Save Pins, plan with collaborators, and more!","BoardCollabInviteBannerContainer.useEffect.acceptedInviteToast","Text in toast after accepting a board collaborator invite.")}))),p(Object(he.f)("BoardInviteResource",f))})},_=(null==m?void 0:m.invited_by_user)||u;return!_||O&&!j?null:Object(c.jsx)(s.f,{marginTop:3,paddingY:0,children:Object(c.jsx)(re,{invitedByUser:_,isAccepted:j,onAccept:()=>y(!0),onDecline:()=>y(!1),createdAt:Object(se.a)(x&&x.created_at,{isAbbreviated:!0})})})}),fe=n("Yo6N"),ge=n("RNo4"),me=n("EC67"),je=n("ZdPf");function ve({boardId:e}){const t=Object(me.i)(),n=t&&t.search?Object(ge.k)(t.search):{},i=n.invite_code,o=n.accept_invite,r=n.inviter_user_id;return Object(c.jsx)(pe,{boardId:e,inviteCode:i,shouldAutoAcceptBoardInvite:o,userInviterId:r})}var Oe=function(e){const{board:t}=e,{id:n,sensitivity:o}=t,r=Object(je.d)(o);return Object(c.jsxs)(i.Fragment,{children:[!r&&Object(c.jsx)(ve,{boardId:n}),r&&Object(je.c)(o)&&o&&Object(c.jsx)(s.f,{paddingY:10,children:Object(c.jsx)(fe.a,{notices:o.notices,viewType:5,sensitivity:o})})]})};function xe(e){const{color:t,size:n}=e;return Object(c.jsx)(s.v,{accessibilityLabel:v.a._("secret board","accessible label for secret board icon","accessible label for secret board icon"),color:t,icon:"lock",size:n})}function ye({color:e,paddingX:t}){return Object(c.jsx)(s.f,{display:"inlineBlock",paddingX:t,children:Object(c.jsx)(s.ab,{color:e,size:"md",weight:"bold",inline:!0,children:"·"})})}function _e({archived:e,secret:t}){return Object(c.jsxs)(s.f,{alignItems:"center",display:"flex",children:[t&&Object(c.jsx)(xe,{color:"gray",size:16}),t&&Object(c.jsx)(s.f,{"data-test-id":"secret-board",paddingX:1,children:Object(c.jsx)(s.ab,{color:"gray",inline:!0,size:"lg",children:v.a._("Secret board","LegoBoardPageHeader.BoardStatus.secret","Label for a secret board")})}),t&&e&&Object(c.jsx)(ye,{color:"gray",paddingX:1}),e&&Object(c.jsx)(s.f,{paddingX:1,children:Object(c.jsx)(s.ab,{color:"gray",inline:!0,size:"lg",children:v.a._("Archived board","LegoBoardPageHeader.BoardStatus.archived","Label for a secret board")})})]})}var we=n("d7JY");var Ce=({boardCollaboratorCount:e,collaborators:t})=>{const n=e?e+1:t.length,i=n>3,o=t.slice(0,i?2:3);return{displayedCollaborators:o,nonDisplayedCollaboratorCount:i?n-o.length:0}},Se=n("0C0f"),Ie=n("qyXF");function Te({board:e,collaborators:t,overflowNumber:n}){const o=Object(i.useRef)(),[r,a]=Object(i.useState)(!1),d=t.map(e=>e.isDim?null:Object(c.jsx)(ne.a,{to:e.href||"",children:Object(c.jsx)(s.ab,{inline:!0,weight:"bold",children:e.name})},e.name)).filter(Boolean);return n&&d.push(Object(c.jsx)(s.f,{display:"inlineBlock",ref:o,children:Object(c.jsx)(s.Z,{onTap:()=>a(!0),children:Object(c.jsx)(s.ab,{inline:!0,weight:"bold",children:Object(S.b)(v.a.ngettext("{{ overflowNumber }} other","{{ overflowNumber }} others",n,"LegoBoardPageHeader.CollaboratorNames.others","number of additional collaborators not listed"),{overflowNumber:n})})})},"overflowText")),Object(c.jsxs)(i.Fragment,{children:[Object(c.jsx)(s.ab,{inline:!0,truncate:!0,children:Object(Ie.a)(d)}),r&&Object(c.jsx)(Se.default,{anchor:o.current,board:e,onDismiss:()=>a(!1)})]})}var Ee=n("JW66"),Pe=n("Oz7m"),De=n("qUzp");function Be(e){return e?v.a._("Join","BoardPage.BoardJoinButton.join","[Button] Request to join a group board as a collaborator"):v.a._("Request to join","[Button] Request to join a group board as a collaborator","[Button] Request to join a group board as a collaborator")}function ke(e){return e?v.a._("Cancel","BoardPage.BoardJoinButton.cancel","[Button] Cancel request to join a group board as a collaborator"):v.a._("Cancel request","[Button] Cancel request to join a group board as a collaborator","[Button] Cancel request to join a group board as a collaborator")}function Me(e){const{onClick:t,requested:n,size:i,useAlternateText:o}=e;return Object(c.jsx)(s.g,{onClick:t,size:i||"md",text:(n?ke:Be)(o)})}function Re(e){const{boardImage:t,boardName:n,boardUrl:i,onHide:o}=e,r=Object(c.jsx)(s.ab,{children:Object(S.b)(v.a._("You've cancelled the request to collaborate on {{ boardName }}","Board.JoinButton.CancelToast","Toast text stating that a user has cancelled a request to join a board"),{boardName:Object(c.jsx)(s.ab,{inline:!0,weight:"bold",children:n})})});return Object(c.jsx)(de.a,{duration:3e3,href:i,imageUrl:t,onHide:o,text:r})}function Ae(e){const{boardImage:t,boardName:n,boardUrl:i,onHide:o}=e,r=Object(c.jsx)(s.ab,{children:Object(S.b)(v.a._("You've requested to join {{ boardName }}","Board.JoinButton.RequestToast","Toast text stating that a user has requested to join a board"),{boardName:Object(c.jsx)(s.ab,{inline:!0,weight:"bold",children:n})})});return Object(c.jsx)(de.a,{href:i,imageUrl:t,onHide:o,text:r})}var Le=n("dMCU");function Ne(e,t){return ce.a.create("BoardCollaboratorRequestResource",{board_id:e,requesting_user_id:t})}function Fe(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}var Ue=Object(Le.a)((function(e){const{authAction:t,boardId:n,boardImage:i,boardName:r,boardUrl:a,isBoardLandingPage:d,isRequestedByMe:l,showPulsar:u,size:h,variant:p}=e,f=Object(o.useDispatch)(),g=Object(F.a)(),m=Object(be.b)(),j=g.isAuth&&g.id||"";function v(){f(function(e,t){const n="cancel-group-board-request-to-join";return i=>{Ne(e,t).callDelete({showError:!1}).then(()=>{ae.a.trackEvent(n,"success")}).catch(()=>{ae.a.trackEvent(n,"error"),i(Fe(e,!0))}),i(Fe(e,!1))}}(n,j)),m.showOneToast(({onHide:e})=>Object(c.jsx)(Re,{boardImage:i,boardName:r,boardUrl:a,onHide:e}))}function O(){f(function(e,t){const n="group-board-request-to-join";return i=>{Ne(e,t).callCreate().then(()=>{ae.a.trackEvent(n,"success")}).catch(()=>{ae.a.trackEvent(n,"error"),i(Fe(e,!1))}),i(Fe(e,!0))}}(n,j)),m.showOneToast(({onHide:e})=>Object(c.jsx)(Ae,{boardImage:i,boardName:r,boardUrl:a,onHide:e}))}const x=({event:e})=>{e.preventDefault(),e.stopPropagation();const i=l?"cancel_group_board_request_to_join":"group_board_request_to_join";t(l?v:O)(),function(e){const{action:t,id:n,isBoardLandingPage:i,url:o}=e,r="request"===t?7499:7547,a=i?5:4;Object(b.b)(101,{component:1,element:r,objectId:n,view:a,current_page_url:o})}({action:l?"request":"cancel",id:n,isBoardLandingPage:!!d,url:a}),ae.a.trackEvent(i,"click")};return j?Object(c.jsxs)(s.f,{position:"relative",display:"flex",children:[Object(c.jsx)(Me,{onClick:x,requested:l,useAlternateText:"lego"===p,size:h}),u&&Object(c.jsx)(s.Z,{onTap:e=>{x(e)},children:Object(c.jsx)(s.f,{wrap:!1,position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}},children:Object(c.jsx)(s.L,{paused:l})})})]}):null})),He=n("3oMh"),ze=n("Sp3T");function qe({board:e,handleCreatePincode:t}){const n=Object(ze.a)();return Object(c.jsx)(He.a,{board:e,onCreatePincode:t,onOpen:()=>n(()=>Y()),children:({onClick:e})=>Object(c.jsx)(s.g,{color:"gray",onClick:e,size:"lg",text:v.a._("Share","BoardHeader.SendBoardButton","Text on button to share board")})})}var Ge=n("0NP8");var We=n("yweb"),Ye=n("qpbZ"),Ke=n("pLLR");const Ve=48,Xe=Object(i.forwardRef)((e,t)=>{const{addButtonRef:n,collaboratorCount:i,nonDisplayedCollaboratorCount:o,displayedCollaborators:r,onClick:a,showAddButton:d}=e,l=Object(We.c)(),{isRTL:u}=Object(Ke.d)(),h=r.map(e=>e.name);let b="";switch(o?"default":h.length){case 3:b=Object(Ye.c)(l._("{{ first }}, {{ second }}, and {{ last }}","BoardAvatarGroup.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames"),{first:""+h[0],second:""+h[1],last:""+h[2]});break;case 2:b=Object(Ye.c)(l._("{{ first }} and {{ second }}","BoardAvatarGroup.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames."),{first:""+h[0],second:""+h[1]});break;default:b=h.join(", ")}const p=o?Object(Ye.c)(l.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",o,"BoardAvatarGroup.AvatarGroup.accessibilityLabel.aboveTwoCollaborators","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:b,leftCount:""+o}):Object(Ye.c)(l._("Collaborators: {{ userNames }}.","BoardAvatarGroup.AvatarGroup.accessibilityLabel.notAboveTwoCollaborators","Accessibility label that lists the names of collaborators"),{userNames:b}),f=r.length>1?[...r,...Array(o).fill({name:"",src:""})]:r,g=(r.length>1||0===i)&&d,m=l._("Invite collaborators.","BoardAvatarGroup.AvatarGroup.accessibilityLabel.inviteCollaborators","It informs the users that they can invite other collaborators.");return Object(c.jsxs)(s.f,{position:"relative",rounding:"pill",children:[g?Object(c.jsx)(s.f,{height:Ve,position:"absolute",left:u,ref:n,right:!u,rounding:"circle",top:!0,width:Ve}):null,Object(c.jsx)(s.c,{accessibilityLabel:g?`${p} ${m}`:""+p,addCollaborators:g,collaborators:f,onClick:a,ref:t,role:"button",size:"md"})]})});Xe.displayName="BoardAvatarGroup";var Ze=Xe,Qe=n("XRfM");function Je({addButtonRef:e,nonDisplayedCollaboratorCount:t,displayedCollaborators:n,onClick:o,pileRef:r,showAddButton:a}){const[d,l]=Object(i.useState)(!1),{locale:u}=Object(Ke.d)(),h=Object(We.c)(),b=h._("Invite collaborators.","DeprecatedBoardCollaboratorFacepile.accessibilityLabel.inviteCollaborators","It informs the users that they can invite other collaborators."),p=Object(Ye.c)(h.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",t,"DeprecatedBoardCollaboratorFacepile.accessibilityLabel","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:n.map(e=>e.name).join(", "),leftCount:""+t}),f=({children:e,hovered:t})=>Object(c.jsxs)(s.f,{position:"relative",children:[Object(c.jsx)(s.f,{bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0}),e]}),g=n.map(({name:e,src:t},n)=>Object(c.jsx)(s.f,{"aria-hidden":"true",marginStart:0!==n?-4:void 0,children:Object(c.jsx)(f,{hovered:d&&!!o,children:Object(c.jsx)(s.f,{color:"white",height:Ve,width:Ve,rounding:"circle",children:Object(c.jsx)(s.b,{name:e,outline:!0,src:t})})})},"face-"+n));return g.length>1&&t&&g.push(Object(c.jsx)(s.f,{"aria-hidden":"true",dangerouslySetInlineStyle:{__style:{zIndex:1}},children:Object(c.jsx)(s.f,{marginStart:-4,children:Object(c.jsx)(f,{hovered:d&&!!o,children:Object(c.jsx)(s.f,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:Object(c.jsx)(s.f,{alignItems:"center",color:"lightGray",display:"flex",height:Ve,justifyContent:"center",position:"relative",rounding:"circle",width:Ve,children:Object(c.jsx)(s.ab,{size:"lg",weight:"bold",children:Object(Qe.g)(u,t,{shortform:!0})})})})})})},"additionalCount")),g.length>1&&a&&g.push(Object(c.jsx)(s.f,{"aria-hidden":"true",dangerouslySetInlineStyle:{__style:{zIndex:1}},ref:e,children:Object(c.jsx)(s.f,{marginStart:-4,children:Object(c.jsx)(f,{hovered:d,children:Object(c.jsx)(s.f,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:Object(c.jsx)(s.f,{alignItems:"center",color:"lightGray",display:"flex",height:Ve,justifyContent:"center",rounding:"circle",width:Ve,children:Object(c.jsx)(s.v,{accessibilityLabel:"Add",icon:"add",color:"darkGray",size:20})})})})})},"addIcon")),Object(c.jsx)(s.s,{alignItems:"center",children:Object(c.jsx)(s.Z,{accessibilityLabel:a?`${p} ${b}`:""+p,ref:r,onTap:o,rounding:"pill",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:Object(c.jsx)(s.f,{alignItems:"center",display:"flex",children:g})})})}var $e=n("8A+h"),et=n("YGxj"),tt=n("rYoy");const nt=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"0C0f")));function it({board:e,displayedCollaborators:t,nonDisplayedCollaboratorCount:n,handleShowCollabAndPermissionsModal:o}){const[r,a]=Object(i.useState)(!1),d=Object(F.a)(),l=Object(i.useRef)(),u=Object(i.useRef)(),h=Object(me.h)(),b=Object($e.a)(d,e),p=b||e.collaborator_invites_enabled&&e.collaborated_by_me,f=(()=>{let n=()=>{var e;return h.push(null!==(e=t[0].href)&&void 0!==e?e:"/")};return t.length>1&&(n=()=>a(!r)),(b||e.collaborated_by_me)&&(n=o),n})(),g=[501003];b&&e.is_collaborative&&g.push(502335);const m=t.map(({name:e,src:t})=>e&&t?{name:e,src:t.endsWith("/default_75.png")?"":t}:{name:e,src:t});return Object(c.jsxs)(i.Fragment,{children:[Object(c.jsxs)(s.f,{alignItems:"center",display:"flex",children:[!e.collaborator_count||e.collaborator_count<=101?Object(c.jsx)(Ze,{addButtonRef:u,collaboratorCount:e.collaborator_count||0,nonDisplayedCollaboratorCount:n,displayedCollaborators:m,onClick:f,ref:l,showAddButton:null!=p&&p}):Object(c.jsx)(Je,{addButtonRef:u,nonDisplayedCollaboratorCount:n,displayedCollaborators:m,onClick:f,pileRef:l,showAddButton:null!=p&&p}),Object(c.jsx)(Z.a,{anchors:{3002:u.current},placementId:18,positionRelativeToAnchor:!1}),Object(c.jsx)(et.a,{anchor:u.current,experienceIds:g,idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0,customWrapper:({children:e})=>Object(c.jsx)(s.f,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{zIndex:2}},children:e})})]}),r&&Object(c.jsx)(tt.a,{children:Object(c.jsx)(nt,{anchor:l.current,board:e,onDismiss:()=>{a(!1),l.current&&l.current.focus()}})})]})}function ot(e){const{board:t,collaborators:n,handleCreatePincode:i,handleShowCollabAndPermissionsModal:o,hideFollowers:r,isToolsBoard:a,onFollowersClick:d,overFlowActionsButton:l,showPulsar:u,userBlocked:h}=e,{access:b,archived_by_me_at:p,collaborator_requests_enabled:f,description:g,follower_count:m,id:j,image_cover_url:v,name:O,privacy:x,url:y,viewer_collaborator_join_requested:_}=t,{displayedCollaborators:w,nonDisplayedCollaboratorCount:C}=Ce({boardCollaboratorCount:t.collaborator_count,collaborators:n}),S=Object(F.a)(),I=b&&b.includes("write"),T=Object(De.a)({viewer:S,board:t}),E=!!p,P=x===Ee.a.BoardPrivacy.PROTECTED,D=x===Ee.a.BoardPrivacy.SECRET,B=!I&&!h,k=B&&f,M=B&&!!i,R=!(!m||r||E||D||P),A=!T||g;return Object(c.jsx)(s.f,{direction:"column",display:"flex",justifyContent:"center",marginBottom:a?4:7,paddingX:8,width:"100%",children:Object(c.jsx)(s.f,{display:"flex",justifyContent:"center",children:Object(c.jsxs)(s.f,{"data-test-id":"LegoBoardHeader__main",direction:"column",display:"flex",maxWidth:488,children:[Object(c.jsx)(s.f,{display:"flex",justifyContent:"center",children:Object(c.jsx)(s.f,{maxWidth:800,children:Object(c.jsx)(Oe,{board:t})})}),Object(c.jsx)(s.f,{display:"flex",alignItems:"center",justifyContent:"center",marginStart:10,marginTop:4,children:Object(c.jsxs)(s.u,{align:"center",children:[O,Object(c.jsx)(s.f,{dangerouslySetInlineStyle:{__style:{display:"inline-flex"}},paddingX:2,children:l})]})}),Object(c.jsx)(we.a,{children:Object(c.jsx)(s.f,{marginTop:2,children:Object(c.jsx)(it,{board:t,displayedCollaborators:w,nonDisplayedCollaboratorCount:C,handleShowCollabAndPermissionsModal:o})})}),A&&Object(c.jsx)(we.a,{children:Object(c.jsx)(s.f,{marginTop:2,dangerouslySetInlineStyle:{__style:{textAlign:"center"}},children:Object(c.jsx)(Pe.a,{inline:!0,items:[T?null:Object(c.jsx)(Te,{board:t,collaborators:w,overflowNumber:C},"collaborators"),g?Object(c.jsx)(s.ab,{inline:!0,children:g}):null]})})}),Object(c.jsx)(we.a,{children:Object(c.jsx)(s.f,{marginTop:2,children:(E||D)&&Object(c.jsx)(_e,{archived:E,secret:D})})}),Object(c.jsx)(we.a,{children:R&&Object(c.jsx)(Ge.a,{bold:!0,count:null!=m?m:0,onClick:d,shortform:!0,size:"lg"})}),Object(c.jsx)(we.a,{children:(k||M)&&Object(c.jsxs)(s.f,{direction:"row",display:"flex",justifyContent:"center",marginTop:5,width:"100%",children:[k&&Object(c.jsx)(s.f,{paddingX:1,children:Object(c.jsx)(Ue,{boardId:j,boardImage:null!=v?v:"",boardName:O,boardUrl:y,isRequestedByMe:Boolean(_),showPulsar:u,size:"lg",variant:"lego"})}),M&&!!i&&Object(c.jsx)(s.f,{paddingX:1,children:Object(c.jsx)(qe,{board:t,handleCreatePincode:i})})]})})]})})})}function rt({boardId:e,ownerUsername:t,ownerName:n,ownerImgSrc:i,children:o}){const{data:r,isLoaded:a}=Object(le.a)({name:"BoardCollaboratorsResource",options:{board_id:e},allowStale:!1}),s=[{name:n,src:i,href:`/${t}/`}];return a&&r&&r.length>0&&r.forEach(e=>{const t=e.image_key||e.image_medium_url||e.image_small_url;s.push({name:e.full_name,src:t,href:`/${e.username}/`})}),o(s)}var at=n("0yL5"),st=n("QIf8"),ct=n("+qOO");function dt(e){const{bgColor:t,board:n,canCreatePincode:r,canEdit:a,handleCreatePincode:s,handleOpenSendBoardFlyout:d,onEditClick:l,showFollow:u,showShare:h,size:b}=e,{id:p,name:f,url:g,image_cover_url:m}=n,[j,O]=Object(i.useState)(n.followed_by_me),{showOneToast:_}=Object(be.b)(),w=Object(o.useDispatch)(),C=()=>{j?(w(Object(ct.b)(p)),O(!1)):(w(Object(ct.a)(p)),O(!0),_(({onHide:e})=>Object(c.jsx)(st.a,{boardImage:null!=m?m:"",boardName:f,boardUrl:g,onHide:e})))};return Object(c.jsx)(at.a,{bgColor:t,icon:"ellipsis",label:v.a._("Other actions","profileHeader.actionBar.overflow","Accessibility label for button to open other options flyout"),size:b,children:()=>Object(c.jsxs)(x.a,{label:v.a._("Board options","profileHeader.actionBar.overflow.header","Accessibility label header for board options flyout"),children:[a&&l&&Object(c.jsx)(y.a,{onClick:()=>{l()},children:v.a._("Edit","BoardPage.ActionBar.PartnerEdit","Clickable text to enter board editing mode")}),a&&r&&s&&Object(c.jsx)(y.a,{onClick:()=>{s()},children:v.a._("Create Pincode","BoardPage.ActionBar.PartnerPincode","Clickable text to trigger Pincode modal")}),h&&d&&Object(c.jsx)(He.a,{board:n,onCreatePincode:s,onOpen:d,children:({onClick:e})=>Object(c.jsx)(y.a,{onClick:e,children:v.a._("Share","BoardPage.ActionBar.EllipsisButton","Button caption to share board")})}),u&&Object(c.jsx)(i.Fragment,{children:j?Object(c.jsx)(y.a,{onClick:C,children:v.a._("Unfollow","BoardPage.ActionBar.EllipsisButton","Button caption to unfollow board")}):Object(c.jsx)(y.a,{onClick:C,children:v.a._("Follow","BoardPage.ActionBar.EllipsisButton","Button caption to follow board")})})]})})}var lt=n("7pfs");const ut=Object(i.forwardRef)((e,t)=>{const{boardName:n,boardUrl:i,children:o,overFlowActionsButton:r,sectionName:a}=e;return Object(c.jsxs)(s.f,{display:"flex",justifyContent:"center",marginBottom:8,paddingX:8,ref:t,width:"100%",children:[Object(c.jsxs)(s.f,{display:"flex",direction:"column",maxWidth:488,children:[Object(c.jsx)(we.a,{children:Object(c.jsx)(s.f,{marginTop:4,children:Object(c.jsx)(ne.a,{to:null!=i?i:"",children:Object(c.jsx)(lt.a,{children:({active:e,focused:t,hovered:i,onBlur:o,onFocus:r,onMouseEnter:a,onMouseLeave:d})=>Object(c.jsx)(s.f,{onFocus:r,onBlur:o,onMouseEnter:a,onMouseLeave:d,children:Object(c.jsx)(s.u,{align:"center",color:e||t||i?"darkGray":"gray",children:n})})})})})}),Object(c.jsx)(we.a,{children:Object(c.jsxs)(s.f,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:-2,children:[Object(c.jsx)(s.u,{align:"center",children:a}),!!r&&Object(c.jsx)(s.f,{paddingX:1,children:r})]})})]}),o&&Object(c.jsx)(s.f,{marginTop:8,children:o})]})});ut.displayName="SectionHeader";var ht=ut,bt=n("xUWj");function pt({board:e,handleBoardEditClick:t,handleFollowersClick:n,handleSectionEditClick:i,handleShowBoardArchiveConfirmation:o,handleShowBoardUnarchiveConfirmation:r,handleShowCollabAndPermissionsModal:a,handleShowCreatePincodeModal:d,handleShowMergeModal:l,section:u,showPulsar:h}){var b,p,f,g,m;const{name:j,sensitivity:v,url:O}=e,{access:x}=e,y=Object(F.a)(),_=x&&x.includes("write")?bt.a:rt,w=Object(je.d)(v),C=Object($e.a)(y,e),S=Object(De.a)({viewer:y,board:e});let I=null;I=S?Object(c.jsx)($,{board:e,onArchiveClick:o,onCreatePincode:d,onEditBoardClick:t,onEditSectionClick:i,onMergeClick:l,onUnarchiveClick:r,showCreatePinCodeOption:y.isAuth&&y.isPartner,surface:u?"section":"board"}):Object(c.jsx)(dt,{bgColor:"lightGray",board:e,showFollow:!0,size:"sm"});const T=w&&Object(je.c)(v);return u?Object(c.jsx)(ht,{boardName:j,boardUrl:O,overFlowActionsButton:I,sectionName:u.title,children:T&&Object(c.jsx)(we.a,{children:Object(c.jsx)(s.f,{maxWidth:800,paddingY:10,children:v&&Object(c.jsx)(fe.a,{notices:v.notices,viewType:5,sensitivity:v})})})}):Object(c.jsx)(s.f,{"data-test-id":"board-header",children:Object(c.jsx)(_,{boardId:e.id,ownerName:(null===(b=e.owner)||void 0===b?void 0:b.full_name)||"",ownerUsername:(null===(p=e.owner)||void 0===p?void 0:p.username)||"",ownerImgSrc:(null===(f=e.owner)||void 0===f?void 0:f.image_key)||(null===(g=e.owner)||void 0===g?void 0:g.image_medium_url)||(null===(m=e.owner)||void 0===m?void 0:m.image_small_url)||"",children:t=>{var i;return Object(c.jsx)(ot,{board:e,collaborators:t,handleCreatePincode:d,handleShowCollabAndPermissionsModal:a,hideFollowers:C,isToolsBoard:!0,onFollowersClick:n,overFlowActionsButton:I,showPulsar:h,userBlocked:!(null===(i=e.owner)||void 0===i||!i.blocked_by_me)})}})})}var ft=n("fNcP"),gt=n("TNox");const mt=Object(i.forwardRef)(({boardTool:{icon:e,link:t,text:n}},o)=>{const[r,a]=Object(i.useState)(!1),{isRTL:d}=Object(Ke.d)();return Object(c.jsx)(gt.a,{accessibilityLabel:n,href:t,onFocus:()=>a(!0),onBlur:()=>a(!1),onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),ref:o,rounding:6,children:Object(c.jsxs)(s.f,{display:"flex",direction:"column",justifyContent:"center",dangerouslySetInlineStyle:{__style:{paddingBottom:"1px"}},children:[Object(c.jsx)(s.f,{alignItems:"center",color:r?"lightWash":"lightGray",display:"flex",height:72,justifyContent:"center",rounding:6,width:72,children:Object(c.jsx)(s.v,{accessibilityLabel:n,color:"darkGray",icon:"text-align-left"===e&&d?"text-align-right":e,size:24})}),Object(c.jsx)(s.f,{paddingY:1,width:72,children:Object(c.jsx)(s.ab,{align:"center",size:"sm",weight:"bold",children:n})})]})})});mt.displayName="BoardTool";var jt=mt;function vt({boardId:e,sectionId:t}){const n=Object(i.useRef)(),o=Object(i.useRef)(),r=Object(i.useRef)(),a=Object(i.useRef)(),d=!!t,l=d?{sectionId:t}:{boardId:e},{data:u,isLoaded:h}=Object(le.a)({name:d?"SectionToolsFeedResource":"BoardToolsFeedResource",options:l});if(h&&(!u||!u.length))return null;const b=[n,o,r,a],p=null==u?void 0:u.map(({id:e})=>{const t=e.split("-");return t&&t.length>1?Number(t[1]):-1});return h&&null!=u&&u.length?Object(c.jsx)(s.s,{alignItems:"center",justifyContent:"center",width:"100%",children:Object(c.jsxs)(s.f,{display:"flex",children:[u.map((e,t)=>{const n=p?p[t]:-1;return Object(c.jsx)(s.f,{padding:1,children:Object(c.jsx)(jt,{boardTool:e,ref:b[n]})},e.id)}),Object(c.jsx)(Z.a,{anchors:{3003:n.current,3004:o.current,3005:r.current,3007:a.current},placementId:18,positionRelativeToAnchor:!1})]})}):null}var Ot=n("Bn+j"),xt=n("1YNZ"),yt=n("J/d7");function _t(){Object(b.b)(101,{element:10776,component:13216,view:5,viewParameter:3069})}function wt({handleAddBoardNote:e,handleAddSection:t,handleCreatePin:n,handleCreateStoryPin:o,surface:r}){const a=Object(i.useRef)();return Object(c.jsx)(s.f,{bottom:!0,marginBottom:4,position:"fixed",rounding:"circle",width:56,dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",left:"50%",right:"50%",transform:"translate(-50%)"}},children:Object(c.jsx)(yt.a,{idealDirection:"up",onAddBoardNote:e,onAddSection:t,onCreatePin:n,onCreateStoryPin:o,onOpen:_t,surface:r,children:({active:e,openFlyout:t})=>Object(c.jsxs)(s.f,{color:"white",display:"inlineBlock",rounding:"circle",children:[Object(c.jsx)(s.w,{accessibilityLabel:v.a._("Create a Pin or add a Section","BoardPage.ActionBar.AddPinOrSection","button triggering a flyout to create a pin or add a section"),bgColor:"white",icon:"add",iconColor:"darkGray",onClick:t,ref:a,selected:e,size:"xl"}),Object(c.jsx)(Z.a,{anchors:{3006:a.current},idealDirection:"up",placementId:18})]})})})}function Ct(e){const{boardUrl:t="",onHide:n,slug:i}=e;return Object(c.jsx)(de.a,{duration:2e3,href:`${t}${i}`,onHide:n,text:v.a._("Section added!","Toast for successfully creating a new board section","Toast for successfully creating a new board section")})}var St=n("5MXd"),It=n("75Er");const Tt=St.a+1;function Et({handleGoBack:e,hideSensitivityScreen:t,sensitivityScreenAuxData:n}){return Object(It.b)({component:13860,view_type:5,aux_data:n}),Object(c.jsx)(s.f,{dangerouslySetInlineStyle:{__style:{backdropFilter:"blur(30px)",background:"rgba(0,0,0,0.8)"}},display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:!0,width:"100%",zIndex:new s.r(Tt),children:Object(c.jsx)(s.f,{dangerouslySetInlineStyle:{__style:{paddingTop:260}},children:Object(c.jsxs)(s.s,{alignItems:"center",direction:"column",gap:8,maxWidth:500,children:[Object(c.jsx)(s.u,{align:"center",color:"white",children:v.a._("This board may contain sensitive content","boardPageContainer.sensitivityScreen.heading","Warning text on board that may have sensitive content")}),Object(c.jsxs)(s.s,{gap:6,children:[Object(c.jsx)(s.g,{color:"red",inline:!0,onClick:e,size:"lg",text:v.a._("Go back","boardPageContainer.sensitivityScreen.backButton","Text on button that lets user go back to previous page")}),Object(c.jsx)(s.g,{color:"white",inline:!0,onClick:t,size:"lg",text:v.a._("View anyway","boardPageContainer.sensitivityScreen.viewButton","Text on button that lets user past sensitivity screen")})]}),Object(c.jsx)(s.f,{paddingY:4,children:Object(c.jsx)(s.ab,{align:"center",color:"white",overflow:"normal",size:"md",children:Object(S.b)(v.a._('If you see anything that violates our {{communityGuidelines}}, please report it to us by clicking the "..." button at the bottom of any Pin',"boardPageContainer.sensitivityScreen.text","Text telling user how to report a Pin"),{communityGuidelines:Object(c.jsx)("a",{href:"https://policy.pinterest.com/en/community-guidelines",target:"_blank",rel:"noreferrer",children:Object(c.jsx)(s.ab,{color:"white",inline:!0,size:"md",underline:!0,children:v.a._("Community Guidelines","boardPageContainer.sensitivityScreen.communityGuidelines","Text that links to the community guidelines page")})})})})})]})})})}var Pt=n("q8wg");var Dt=n("1inl"),Bt=n("i6L0"),kt=n("oN2T");var Mt=n("eGqM"),Rt=n("i97C"),At=n("zpPL"),Lt=n("t3tn");function Nt(){const e=Object(F.a)(),t=Object(le.a)({name:"UserMetadataResource",options:{user:e}});Object(i.useEffect)(()=>function(e){const t=At.a.instance;if(t&&""===t.getState().ui.views.boardPinView&&e&&e.data){const{profile_pin_rep_view_type:n}=e.data;n?t.dispatch(Object(Lt.a)(n)):t.dispatch(Object(Lt.a)("regular"))}}(t))}var Ft=n("6b3J"),Ut=n("ANjH"),Ht=n("NrS9"),zt=n("vZlu"),qt=n("sxkF"),Gt=n("mHb8");const Wt=()=>{};t.a=Object(Ut.compose)(me.l,Object(C.a)(18,e=>{var t;return{board_id:e.board.id,pin_count:null!==(t=e.board.sectionless_pin_count)&&void 0!==t?t:0,chrome_push_subscription:Object(Ht.b)()}}))((function({board:e,experience:t,initialModalType:n,match:{params:{slug:r}},refreshBoardData:a=Wt,refreshSectionData:d=Wt,setPlacementExtraContext:l,section:u,showPulsar:h}){var p,g;const m=Object(o.useDispatch)(),j=Object(ze.a)(),{hasScrolledToBottom:O,isScrolledToThreshold:x}=Object(Mt.a)(),y=Object(F.a)(),{anyEnabled:_}=Object(z.d)("web_board_notes"),w=Object(Gt.c)(y,e),C=Object(De.a)({board:e,viewer:y});Object(i.useEffect)(()=>{let t="other";w?t="own":Object(Gt.b)(y,e)&&(t="collaborator"),l({board_ownership:t})},[t]),Object(i.useEffect)(()=>(C&&m(Object(zt.d)(!1)),()=>{m(Object(zt.d)(!0))}),[m,C]);const{showOneToast:S}=Object(be.b)(),I=Object(me.h)(),T=Object(o.useSelector)(({history:e})=>0===e.previous.length);Nt();const{handleShowMergeSectionsConfirmationModal:E,mergeConfirmationModalProps:P,onConfirm:D}=Object(Rt.a)({board:e}),k=function(){const e=Object(o.useDispatch)(),{showBlockingActionToast:t}=Object(Bt.a)();return({board:n,targetBoard:i})=>{Object(b.b)(7172,{objectId:n.id,merge_flow:"menu"}),e(Object(kt.k)(n.id,i.id)).then(()=>{t({actionType:"merge",board:i})}).catch(e=>{Dt.a.showError(e.message||v.a._("Failed to merge boards","Error message when failed to merge boards","Error message when failed to merge boards"))})}}(),M={board_id:e.id,reason:(null===(p=e.sensitivity_screen)||void 0===p?void 0:p.reason)||""},[R,A]=Object(i.useState)(!(null===(g=e.sensitivity_screen)||void 0===g||!g.show_warning)),[L,N]=Object(i.useState)(null),[U,H]=Object(i.useState)(n||null),[G,Y]=Object(i.useState)(null),[K,V]=Object(i.useState)(e&&Object(qt.b)(y,e)||"custom"),[X,Z]=Object(i.useState)(!1),Q=()=>H(q.a.boardArchiveConfirmation),J=()=>{const e=y.isAuth?"/"+y.username:"/";I.replace(e)},$=e=>j(()=>{H(q.a.editSection),N(e)}),ee=()=>H(q.a.collaboratorsAndPermissions),te="custom"!==K;return Object(c.jsx)(Pt.a,{view:5,viewParameter:Object(B.a)({board:e,viewer:y}),objectId:e.id,children:Object(c.jsxs)(i.Fragment,{children:[Object(c.jsx)(pt,{board:e,handleBoardEditClick:()=>{Object(b.b)(101,{element:10845,component:13216,view:5,viewParameter:3069}),H(q.a.boardEdit)},handleFollowersClick:()=>{H(q.a.followers)},handleSectionEditClick:()=>$(),handleShowBoardArchiveConfirmation:Q,handleShowBoardUnarchiveConfirmation:()=>H(q.a.boardUnarchiveConfirmation),handleShowCollabAndPermissionsModal:ee,handleShowCreatePincodeModal:()=>j(()=>{Object(b.b)(101,{element:10781,component:13217,view:5,viewParameter:3069}),H(q.a.pincode)}),handleShowMergeModal:()=>j(()=>{H(q.a.mergeBoard)}),section:u,showPulsar:h}),C&&Object(c.jsx)(s.f,{marginBottom:6,children:Object(c.jsx)(vt,{boardId:e.id,sectionId:null==u?void 0:u.id})}),U!==q.a.jumpstartBoard&&Object(c.jsx)(W,{board:e,currentView:K,handleContentViewChange:e=>V(e),handleSetCurrentModal:H,handleShowEditSectionModal:$,handleShowMergeSectionsConfirmationModal:E,isOwnBoard:w,isOwnerOrCollaborator:C,isPinGridSorted:te,refreshBoardData:a,refreshSectionData:d,section:u}),Object(c.jsx)(f,{boardId:e.id,handleShowArchiveConfirmation:Q,handleShowGroupPinsModal:(e,t)=>{H(q.a.groupPins),Y({clusterId:e,suggestedSectionName:t})}}),C&&Object(c.jsx)(wt,{handleAddBoardNote:_&&!u?()=>{(async()=>{var t;const n=null===(t=e.owner)||void 0===t?void 0:t.username;if(n){const t=(await ce.a.create("BoardNoteResource",{slug:r,username:n}).callCreate()).resource_response.data;I.push(e.url?`${e.url}_tools/notes/${t.id}`:"")}})()}:null,handleAddSection:()=>j(()=>{Object(b.b)(101,{element:10779,component:13217,view:5,viewParameter:3069}),H(q.a.simpleCreateSection)}),handleCreatePin:()=>j(()=>{Object(b.b)(101,{element:10780,component:13217,view:5,viewParameter:3069}),I.push({pathname:"/pin-builder/",state:{board:e,boardSection:u}})}),handleCreateStoryPin:()=>j(()=>{I.push({pathname:"/story-pin-builder/"})}),surface:u?"section":"board"}),U&&Object(c.jsx)(ft.a,{actions:{completeCreateSectionAction:t=>j(()=>{H(null),(t=>{S(({onHide:n})=>Object(c.jsx)(Ct,{boardUrl:e.url,onHide:n,slug:t.slug}))})(t)}),onBoardArchiveChange:()=>{a(),m(Object(kt.j)())},onBoardDelete:J,onBoardLeave:e=>{m(Object(kt.j)()),J()},onBoardMerge:t=>{k({board:e,targetBoard:t}),J()},onBoardSectionDelete:()=>{var t;(N(null),H(null),u)&&I.replace(null!==(t=e.url)&&void 0!==t?t:"")},onBoardSectionSave:({title:t,slug:n})=>{if(N(null),H(null),u){var i;const t=`${null!==(i=e.url)&&void 0!==i?i:""}${n}/`;I.replace(t)}},onCollaboratorInviteClick:ee,onConfirmMergeSection:D},board:e,boardSection:u||L,currentModal:U,groupPinsData:G,mergeConfirmationModalProps:P,onClearModal:()=>H(null)}),T&&!Object(Gt.c)(y,e)&&!u&&(x||O)&&!X&&Object(c.jsx)(Ft.a,{onDismiss:()=>{Z(!0)},boardId:e.id}),Object(c.jsx)(Ot.a,{placementId:18}),Object(c.jsx)(xt.a,{placementId:18}),R&&Object(c.jsx)(Et,{handleGoBack:()=>{Object(b.b)(101,{component:13860,element:73,view:5,...M}),T&&I.replace("/"),I.goBack()},hideSensitivityScreen:()=>{m(Object(kt.i)(e.id)),Object(b.b)(101,{component:13860,element:12448,view:5,...M}),A(!1)},sensitivityScreenAuxData:M})]})})}))},Q7uW:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("n6mq"),o=n("nKUr");function r(e){const{htmlFor:t,errorMessage:n}=e;return Object(o.jsx)(i.y,{htmlFor:t,children:Object(o.jsx)(i.f,{marginTop:1,children:Object(o.jsx)(i.ab,{color:"red",size:"md",children:n})})})}},QAzJ:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c}));var i=n("q1tI"),o=n("hlDC");function r(e){const t=Object(o.b)(),n=t.v2GetGroup(e)||"",r=function(e){return e.startsWith("enabled")||e.startsWith("employee")}(n),a=(e=>{const t=Object(i.useRef)(!1),n=Object(i.useRef)(!1);return Object(i.useEffect)(()=>{t.current=!0,n.current&&e()},[]),()=>{t.current?e():n.current=!0}})(()=>{t.v2ActivateExperiment(e)});return e=>(null!=e&&e.dangerouslySkipActivation||a(),{group:n,anyEnabled:r})}function a(e,t=!0){const n=r(e);return t?n():{group:"",anyEnabled:!1}}function s(e,t=!0){const n=r(e),{group:i,anyEnabled:o}=n({dangerouslySkipActivation:!0});return t?{group:i,anyEnabled:o}:{group:"",anyEnabled:!1}}function c(e,t=!0){const n=r(e),{group:i,anyEnabled:o}=n({dangerouslySkipActivation:!0});return t?{group:i,anyEnabled:o,customActivate:()=>{n()}}:{group:"",anyEnabled:!1,customActivate:()=>{}}}},QCnb:function(e,t,n){e.exports=n("+wdc")},QIf8:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("Ye/N"),o=n("M1Uz"),r=n("vvax"),a=n("n6mq"),s=n("nKUr");function c(e){const{boardImage:t,boardName:n,boardUrl:c,onHide:d}=e,l=Object(s.jsx)(a.ab,{children:Object(r.b)(i.a._("Now following {{ boardName }}","BoardFollowButton.FollowingToast.nowFollowing","Toast text displayed when a user follows a board"),{boardName:Object(s.jsx)(a.ab,{weight:"bold",children:n},"boardName")})});return Object(s.jsx)(o.a,{onHide:d,text:l,href:c,imageUrl:t})}},QIuh:function(e,t,n){function i(e,t){return{x:e.x+t.x,y:e.y+t.y}}function o(e,t){return{x:e.x-t.x,y:e.y-t.y}}Object.defineProperty(t,"__esModule",{value:!0}),t.add=i,t.subtract=o,t.getSourceClientOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset,r=e.initialSourceClientOffset;return t&&n&&r?o(i(t,r),n):null},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset;return t&&n?o(t,n):null}},QIyF:function(e,t,n){var i=n("Kz5y");e.exports=function(){return i.Date.now()}},QNmZ:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("q1tI"),s=n("+k3R"),c=n("SFi7"),d=n("dJ9d"),l=n("QWfI"),u=n("qFZT"),h=n("2S0S"),b=n("Gytx");t.default=function(e,t){return void 0===t&&(t={}),s.default("DragLayer","collect[, options]",e,t),h("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),h(l.isPlainObject(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(n){var i=n,s=t.arePropsEqual,l=void 0===s?b:s,p=i.displayName||i.name||"Component",f=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCurrentlyMounted=!1,e.ref=a.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();b(t,e.state)||e.setState(t)}},e}return o(s,t),s.prototype.getDecoratedComponentInstance=function(){return h(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},s.prototype.shouldComponentUpdate=function(e,t){return!l(e,this.props)||!b(t,this.state)},s.prototype.componentDidMount=function(){this.isCurrentlyMounted=!0,this.handleChange()},s.prototype.componentWillUnmount=function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)},s.prototype.render=function(){var e=this;return a.createElement(c.Consumer,null,(function(t){var n=t.dragDropManager;return void 0===n?null:(e.receiveDragDropManager(n),e.isCurrentlyMounted?a.createElement(i,r({},e.props,e.state,{ref:d.isRefable(i)?e.ref:null})):null)}))},s.prototype.receiveDragDropManager=function(e){if(void 0===this.manager){this.manager=e,h("object"==typeof e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",p,p);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}},s.prototype.getCurrentState=function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)},s.displayName="DragLayer("+p+")",s.DecoratedComponent=n,s}(a.Component);return u(f,n)}}},QSJg:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},QWfI:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e},t.noop=function(){},t.isPlainObject=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},QWk2:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("q1tI"),o=n("B/xd");function r(e){return function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!i.isValidElement(t)){var r=t;return e(r,n),r}var a=t;!function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}(a);var s=n?function(t){return e(t,n)}:e;return o.default(a,s)}}n("1IOU"),t.default=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var o=r(i);t[n]=function(){return o}}})),t}},R5Y4:function(e,t){var n=Math.ceil,i=Math.max;e.exports=function(e,t,o,r){for(var a=-1,s=i(n((t-e)/(o||1)),0),c=Array(s);s--;)c[r?s:++a]=e,e+=o;return c}},"S8b/":function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n("hUD8"),r=n("/Ecc"),a=n("yBr6"),s=n("lh2y"),c=n("QSJg"),d=function(){function e(e){var t=this;this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){return a.getNodeClientOffset(t.sourceNodes.get(e))},this.endDragNativeItem=function(){t.isDraggingNativeItem()&&(t.actions.endDrag(),t.registry.removeSource(t.currentNativeHandle),t.currentNativeHandle=null,t.currentNativeSource=null)},this.isNodeInDocument=function(e){return!!document&&document.body.contains(e)||!!t.window&&t.window.document.body.contains(e)},this.endDragIfSourceWasRemovedFromDOM=function(){var e=t.currentDragSourceNode;t.isNodeInDocument(e)||t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragStartCapture=function(){t.clearCurrentDragSourceNode(),t.dragStartSourceIds=[]},this.handleTopDragStart=function(e){var n=t.dragStartSourceIds;t.dragStartSourceIds=null;var i=a.getEventClientOffset(e);t.monitor.isDragging()&&t.actions.endDrag(),t.actions.beginDrag(n||[],{publishSource:!1,getSourceClientOffset:t.getSourceClientOffset,clientOffset:i});var o=e.dataTransfer,r=s.matchNativeItemType(o);if(t.monitor.isDragging()){if(o&&"function"==typeof o.setDragImage){var c=t.monitor.getSourceId(),d=t.sourceNodes.get(c),l=t.sourcePreviewNodes.get(c)||d;if(l){var u=t.getCurrentSourcePreviewNodeOptions(),h={anchorX:u.anchorX,anchorY:u.anchorY},b={offsetX:u.offsetX,offsetY:u.offsetY},p=a.getDragPreviewOffset(d,l,i,h,b);o.setDragImage(l,p.x,p.y)}}try{o.setData("application/json",{})}catch(f){}t.setCurrentDragSourceNode(e.target),t.getCurrentSourcePreviewNodeOptions().captureDraggingState?t.actions.publishDragSource():setTimeout((function(){return t.actions.publishDragSource()}),0)}else if(r)t.beginDragNativeItem(r);else{if(o&&!o.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=function(){t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(t.dragEnterTargetIds=[],t.enterLeaveCounter.enter(e.target)&&!t.monitor.isDragging()){var n=e.dataTransfer,i=s.matchNativeItemType(n);i&&t.beginDragNativeItem(i)}},this.handleTopDragEnter=function(e){var n=t.dragEnterTargetIds;(t.dragEnterTargetIds=[],t.monitor.isDragging())&&(t.altKeyPressed=e.altKey,r.isFirefox()||t.actions.hover(n,{clientOffset:a.getEventClientOffset(e)}),n.some((function(e){return t.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){t.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var n=t.dragOverTargetIds;if(t.dragOverTargetIds=[],!t.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));t.altKeyPressed=e.altKey,t.actions.hover(n||[],{clientOffset:a.getEventClientOffset(e)}),(n||[]).some((function(e){return t.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())):t.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){t.isDraggingNativeItem()&&e.preventDefault(),t.enterLeaveCounter.leave(e.target)&&t.isDraggingNativeItem()&&t.endDragNativeItem()},this.handleTopDropCapture=function(e){t.dropTargetIds=[],e.preventDefault(),t.isDraggingNativeItem()&&t.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),t.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var n=t.dropTargetIds;t.dropTargetIds=[],t.actions.hover(n,{clientOffset:a.getEventClientOffset(e)}),t.actions.drop({dropEffect:t.getCurrentDropEffect()}),t.isDraggingNativeItem()?t.endDragNativeItem():t.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.context=e.getContext(),this.enterLeaveCounter=new o.default(this.isNodeInDocument)}return Object.defineProperty(e.prototype,"window",{get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0},enumerable:!0,configurable:!0}),e.prototype.setup=function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}},e.prototype.teardown=function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))},e.prototype.connectDragPreview=function(e,t,n){var i=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){i.sourcePreviewNodes.delete(e),i.sourcePreviewNodeOptions.delete(e)}},e.prototype.connectDragSource=function(e,t,n){var i=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var o=function(t){return i.handleDragStart(t,e)},r=function(e){return i.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",o),t.addEventListener("selectstart",r),function(){i.sourceNodes.delete(e),i.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",r),t.setAttribute("draggable","false")}},e.prototype.connectDropTarget=function(e,t){var n=this,i=function(t){return n.handleDragEnter(t,e)},o=function(t){return n.handleDragOver(t,e)},r=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",i),t.addEventListener("dragover",o),t.addEventListener("drop",r),function(){t.removeEventListener("dragenter",i),t.removeEventListener("dragover",o),t.removeEventListener("drop",r)}},e.prototype.addEventListeners=function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.removeEventListeners=function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.getCurrentSourceNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return i({dropEffect:this.altKeyPressed?"copy":"move"},t||{})},e.prototype.getCurrentDropEffect=function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect},e.prototype.getCurrentSourcePreviewNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return i({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})},e.prototype.isDraggingNativeItem=function(){var e=this.monitor.getItemType();return Object.keys(c).some((function(t){return c[t]===e}))},e.prototype.beginDragNativeItem=function(e){this.clearCurrentDragSourceNode(),this.currentNativeSource=s.createNativeDragSource(e),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])},e.prototype.setCurrentDragSourceNode=function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)},e.prototype.clearCurrentDragSourceNode=function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)},e.prototype.handleDragStart=function(e,t){this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t)},e.prototype.handleDragEnter=function(e,t){this.dragEnterTargetIds.unshift(t)},e.prototype.handleDragOver=function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)},e.prototype.handleDrop=function(e,t){this.dropTargetIds.unshift(t)},e}();t.default=d},SFi7:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n("q1tI"),c=n("yCO0"),d=n("+k3R"),l=n("dJ9d"),u=n("2S0S"),h=n("qFZT");function b(e,t,n){return{dragDropManager:c.createDragDropManager(e,t,n)}}t.context=s.createContext({dragDropManager:void 0}),t.Consumer=t.context.Consumer,t.Provider=t.context.Provider,t.createChildContext=b,t.DragDropContextProvider=function(e){var n=e.children,i=a(e,["children"]),o="manager"in i?{dragDropManager:i.manager}:b(i.backend,i.context,i.debugMode);return s.createElement(t.Provider,{value:o},n)},t.DragDropContext=function(e,n,i){d.default("DragDropContext","backend",e);var a=b(e,n,i);return function(e){var n=e,i=n.displayName||n.name||"Component",c=function(c){function d(){var e=null!==c&&c.apply(this,arguments)||this;return e.ref=s.createRef(),e.getManager=function(){return a.dragDropManager},e}return o(d,c),d.prototype.getDecoratedComponentInstance=function(){return u(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},d.prototype.render=function(){return s.createElement(t.Provider,{value:a},s.createElement(n,r({},this.props,{ref:l.isRefable(n)?this.ref:null})))},d.DecoratedComponent=e,d.displayName="DragDropContext("+i+")",d}(s.Component);return h(c,e)}}},SLVX:function(e,t,n){function i(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return i}))},Sbkd:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("q1tI"),o=n("mvLR");function r(){const e=Object(i.useRef)([]),t=Object(i.useRef)({});return Object(i.useEffect)(()=>()=>{[...Object.keys(t.current).map(e=>t.current[e]),...e.current].forEach(e=>e())},[]),function(n,i){if(i){const e=t.current[i];e&&(e(),delete t.current[i])}const{cancel:r,promise:a}=Object(o.a)(n);return i?t.current[i]=r:e.current.push(r),a}}},Sihc:function(e,t,n){n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var i=n("Pqnw"),o=n("uVIr"),r=n("VqlB"),a=n("eOdZ"),s=n("oN2T"),c=n("KFEb"),d=n("Wer7");function l(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u,initialPinIds:h=[]}){let b=0;"RECOMMENDATION"===n?b=1:"EDITED_RECOMMENDATION"===n&&(b=2);const p={board_id:e,initial_pins:u&&!u.all?u.pinIds:h,name:t,name_source:b};return t=>a.a.create("BoardSectionResource",p).callCreate({showError:!1}).then(({resource_response:{data:n}})=>{t(l(e,n)),t(Object(o.a)({feedId:e,feedType:c.a.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t(Object(s.c)(e,"pin_count")),t(Object(d.f)("BoardSectionsRepinResource",{board_id:e}));const{all:a,pinIds:h}=u||{all:!1,pinIds:[]};return a?new Promise((i,o)=>t(Object(r.a)({inverseSelection:!0,selectedPinIds:h,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}})).then(()=>i(n)).catch(o)):(h.length>0&&t(Object(i.a)(c.a.BOARD_PINS,e)),n)})}},"T+9/":function(e,t,n){var i=n("q1tI"),o=n("i8i4"),r=n("/MKj"),a=n("ZbwW"),s=n("D2p8"),c=n("U4JR");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class u extends i.Component{constructor(e){super(e),d(this,"trackImpression",()=>{try{this.node=Object(o.findDOMNode)(this),this.node instanceof HTMLElement&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}}),d(this,"logImpression",e=>{const{carousel_data:t,closeupImpressionType:n,closeupNavigationType:i,componentType:o,contextLogData:r,elementType:a,impressionAuxFields:s,impressionType:d,loggingId:u,objectIdStr:h,slotIndex:b,trackCarousel:p,viewData:f,viewParameter:g,viewType:m}=this.props,j=l[d],v=j.idType,O=e.forcedExit&&"removed"===e.forcedExit?0:void 0,x={endTime:e.endTime,[v]:u,slotIndex:b,time:e.startTime,renderDuration:e.endTime-e.startTime,type:n,...s,forcedExit:O};if(p||Object(c.b)(j.eventType,{closeup_navigation_type:i,component:o,element:a,eventData:{[j.impressionType]:[x]},objectIdStr:h,view:m,viewData:f||{},viewParameter:g,...r}),t&&p){const{carousel_slots:e,index:n=0,id:i}=t;Object(c.b)(7352,{component:o,eventData:{pinCarouselSlotImpressions:[{...x,carouselDataId:Number(i),carouselSlotId:(null==e?void 0:e[n])&&Number(e[n].id),slotIndex:n}]},objectIdStr:h,view:m,viewData:f||{},viewParameter:g,...r})}}),this.impressionsFramework=e.impressionsFramework||s.c}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){this.node instanceof HTMLElement&&this.impressionsFramework.stop(this.node)}render(){return i.Children.only(this.props.children)}}t.a=Object(r.connect)((function({pins:e},{loggingId:t}){const n=e[t||""]||{};return{carousel_data:Object(a.a)(n)}}),()=>({}))(u)},TKJ6:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("7nh8");t.setClientOffset=function(e,t){return{type:i.INIT_COORDS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}},TO8r:function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},TPjH:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=n.getRegistry(),o=i.addTarget(e,t);return[o,function(){return i.removeTarget(o)}]}},TSYQ:function(e,t,n){var i;!function(){var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i)&&i.length){var a=o.apply(null,i);a&&e.push(a)}else if("object"===r)for(var s in i)n.call(i,s)&&i[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}()},TT16:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isRef=function(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("current")}},U4JR:function(e,t,n){n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var i=n("m2Wt"),o=n("h4v/"),r=n("ajUs"),a=n("zpPL");const s=()=>a.a.instance.getState(),c=()=>{const{advertiser:e,adminUser:t,viewer:n}=s(),i={};return e&&e.id&&(i.advertiser_id=e.id),t&&n&&n.username&&(i.sterling_on_steroids_ldap=t,i.viewed_user=n.username),i},d=(e,{element:t,eventData:n,component:o,objectId:a,view:d,viewParameter:l,viewData:u,durationNs:h,pairId:b,clientTrackingParams:p,...f})=>{const g=i.a.fromEventType(e);return g.setElement(t),g.updateEventData(n),g.setComponent(o),a&&g.setObjectIdStr(a),g.setDurationNs(h),g.updateAuxData({...f,...c()}),g.setViewType(d),g.setViewParameter(l),g.setViewData(u),g.setPairId(b),g.setClientTrackingParams(p||(e=>{const{pins:t,location:n}=s(),i=t&&e&&t[e];return i?Object(r.a)(i,n)||i.tracking_params+"~0":void 0})(a)),g};function l(e,t={}){o.a.getInstance().addEvent(d(e,t))}const u={flushContextEvents:()=>o.a.getInstance().flushEvents(!0),logContextEvent:({aux_data:e,clientTrackingParams:t,component:n,duration_ns:i,element:o,event_data:r,event_type:a,object_id_str:s,pair_id:c,view_data:d,view_parameter:u,view_type:h})=>{l(a,{...e,element:o,eventData:r,component:n,objectId:s,view:h,viewParameter:null!=u?u:void 0,viewData:d,durationNs:i,pairId:c,clientTrackingParams:t})}}},U4W0:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(t.HandlerRole||(t.HandlerRole={}))},UJTY:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("q1tI"),o=n("/acK"),r=n("493B");t.useDragLayer=function(e){var t=o.useDragDropManager().getMonitor(),n=r.useCollector(t,e),a=n[0],s=n[1];return i.useEffect((function(){return t.subscribeToOffsetChange(s)})),i.useEffect((function(){return t.subscribeToStateChange(s)})),a}},V08O:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));const i=(e,t)=>((e,t,n)=>({x:Math.floor(e*Math.cos(n)),y:Math.floor(t*Math.sin(n))}))(t/2,e/2,2*Math.random()*Math.PI),o=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,r=e=>["@-webkit-keyframes","@keyframes"].map(t=>e.map(e=>t+" "+e).join("\n")).join("\n")},V711:function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("8cMa"),a=n("JW66"),s=n("Ye/N"),c=n("rrvb"),d=n("0BOE"),l=n("jdx6"),u=n("Wer7"),h=n("w70y"),b=n("n6mq"),p=n("ANjH"),f=n("oN2T"),g=n("nKUr");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j({board:e,hovered:t,searchQuery:n}){const i=e.privacy===a.a.BoardPrivacy.SECRET;return Object(g.jsxs)(b.f,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:[Object(g.jsx)(b.f,{flex:"grow",children:Object(g.jsx)(b.ab,{weight:"bold",children:Object(l.b)(n,e.name)})}),Object(g.jsxs)(b.f,{direction:"row",display:"flex",flex:"none",children:[i&&Object(g.jsx)(r.a,{type:"secret"}),e.is_collaborative&&Object(g.jsx)(r.a,{type:"group"})]})]})}class v extends i.Component{constructor(e){super(e),m(this,"getSections",()=>{const{searchQuery:e}=this.state,{boardResource:{data:{all_boards:t}}}=this.props;return e.length>=2?[{items:Object(d.a)(t,e)}]:[{items:t}]}),m(this,"createBtnDisabled",()=>{const{boardResource:{data:{all_boards:e}}}=this.props,{searchQuery:t}=this.state;return e.some(e=>{var n;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===t.toLowerCase()})}),m(this,"handleBoardCreate",e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:n,onBoardCreate:i}=this.props;n(),i?i(e):t({name:e,privacy:"public"}).then(e=>{const{onBoardChosen:t}=this.props;t(e)})}),m(this,"handleBoardSelected",e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})}),m(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),m(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return Object(g.jsx)(j,{board:e,hovered:t,searchQuery:n})}),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t,isBoardlessPinsBoard:n,isStoryPin:i,viewer:o}=this.props,{searchQuery:r,selectedBoard:a}=this.state;let d=s.a._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?d=n?s.a._("Profile","BoardPickerFlyout.displayBoarName.boardlessPins","Title indicating the pin is saved to profile"):t.name:a&&(d=a.name),Object(g.jsxs)(b.f,{children:[Object(g.jsx)(b.T,{accessibilityLabel:s.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&Object(g.jsx)(c.a,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:d,isStoryPin:i,onCreate:this.handleBoardCreate(o),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:r,sections:this.getSections()})]})}}t.a=Object(p.compose)(Object(o.connect)((function(e){const{advertiser:t,viewer:n}=e,i=n.isAuth&&t&&t.owner_user_id!==n.id;return{advertiser_id:i?t.id:null,username:i?t.owner_user_id:null,viewer:n}}),(function(e){return{invalidateBoardPickerBoardsResource:()=>{e(Object(u.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},createBoard:t=>e(Object(f.g)(t))}})),Object(h.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username,...e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{}}),allowStale:!1}))(v)},VH7y:function(e,t,n){e.exports=n("bY5B")()},VOtZ:function(e,t,n){var i=n("juv8"),o=n("MvSz");e.exports=function(e,t){return i(e,o(e),t)}},VPyJ:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("q1tI"),o=n("1dBE"),r=n("nKUr");const{Provider:a,Consumer:s,useHook:c}=Object(o.c)("ShowBoardlessPins");function d({children:e}){const[t,n]=Object(i.useState)(!1);return Object(r.jsx)(a,{value:{showBoardlessPinsModal:t,setShowBoardlessPinsModal:n},children:e})}t.b=c},VVkO:function(e,t,n){function i(e,t){const{url:n}=e,{slug:i}=t;return`${null!=n?n:""}${i}/`}n.d(t,"a",(function(){return i}))},ViqK:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("FDmi"),r=n("qD10"),a=n("n6mq"),s=n("nKUr");function c(e){const{imageUrl:t,name:n,title:c,subtitle:d,accessory:l,linkURL:u,isDim:h}=e,b={__style:{opacity:h?.5:1}};return Object(s.jsx)(i.Fragment,{children:n&&c&&Object(s.jsxs)(a.f,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4,children:[Object(s.jsx)(a.f,{marginEnd:2,dangerouslySetInlineStyle:b,children:Object(s.jsx)(r.a,{to:u||"",children:Object(s.jsx)(o.a,{outline:!0,size:"md",name:n,src:t})})}),Object(s.jsxs)(a.f,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:b,children:[Object(s.jsx)(r.a,{to:u||"",children:Object(s.jsx)(a.ab,{color:"darkGray",size:"lg",truncate:!0,weight:"bold",children:c})}),Object(s.jsx)(a.ab,{truncate:!0,size:"sm",color:"gray",children:d})]}),l&&Object(s.jsx)(a.f,{marginStart:4,children:l})]})})}},VqlB:function(e,t,n){n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var i=n("3z7j"),o=n("Pqnw"),r=n("uVIr"),a=n("MhBu"),s=n("eOdZ"),c=n("oN2T"),d=n("KFEb"),l=n("1inl"),u=n("Ye/N");function h(e){l.a.showError(function(e){switch(e.api_error_code){case 2171:case 2172:case 2173:return u.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}const b=e=>Object(o.a)(e.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,e.sectionId||e.boardId);function p(e,t){const{source:n,target:o}=e;o.boardId!==n.boardId?(t(Object(c.c)(n.boardId,"pin_count")),t(Object(c.c)(o.boardId,"pin_count"))):n.sectionId&&o.sectionId||t(Object(c.c)(o.boardId,"pin_count")),n.sectionId&&t(Object(i.a)(n.sectionId)),o.sectionId&&t(Object(i.a)(o.sectionId))}function f(e){return t=>{const{selectedPinIds:n,source:i,target:o}=e;t(Object(a.a)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(r.a)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:n,itemType:"pin"})),p(e,t)}}function g(e){return t=>function(e,t){const{inverseSelection:n,selectedPinIds:i,source:o,target:c}=e;if(o.boardId===c.boardId&&(o.sectionId||null)===(c.sectionId||null))return Promise.reject();if(n){const e={board_id:o.boardId,new_board_id:c.boardId,old_section_id:o.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:i};return s.a.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(b(o)),t(b(c))])).catch(h)}{const e=(e,n)=>{t(Object(a.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:i,itemType:"pin"})),t(Object(r.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:i,itemType:"pin"}))};e(o,c);const n=()=>e(c,o);if(c.boardId===o.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:i};return s.a.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),h(e)})}{const e={section_id:o.sectionId,pins:i};return s.a.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),h(e)})}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:i};return s.a.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),h(e)})}}}(e,t).then(()=>p(e,t))}},Vzit:function(e,t,n){function i(e){return{type:"EXPERIENCE_FETCH_ALL",payload:{isFetchingAll:!0,targeting:e}}}function o(e){return{type:"EXPERIENCE_FETCH_ALL_COMPLETE",payload:{eligibleExperiences:e,isFetchingAll:!1}}}function r(){return{type:"EXPERIENCE_FETCH_ALL_MULTI",payload:{isFetchingAllMulti:!0}}}function a(e){return{type:"EXPERIENCE_FETCH_ALL_MULTI_COMPLETE",payload:{experiencesMulti:e}}}function s(e,t={},n){return{type:"EXPERIENCE_FETCH",payload:{extraContext:t,placementId:e,targeting:n}}}function c(e,t,n={}){return{type:"EXPERIENCE_FETCH_COMPLETE",payload:{eligibleExperiences:e,extraContext:n,placementId:t}}}function d(e,t){return{type:"PLACEMENT_EXPERIMENTS_TRIGGER",payload:{placementId:e,extraContext:t}}}function l(e,t,n=!1,i){return{type:"EXPERIENCE_VIEWED",payload:{placementId:e,experienceId:t,isBackendExperience:n,targeting:i}}}function u(e,t,n=!1,i=!1,o={},r=!1,a){return{type:"EXPERIENCE_COMPLETED",payload:{placementId:e,experienceId:t,preventRemoval:n,isBackendExperience:i,extraContext:o,completeOnUnmount:r,targeting:a}}}function h(e,t,n=!1,i=!1,o){return{type:"EXPERIENCE_DISMISSED",payload:{placementId:e,experienceId:t,preventRemoval:n,isBackendExperience:i,targeting:o}}}function b(e,t){return{type:"EXPERIENCE_REMOVE",payload:{placementId:e,experienceId:t}}}function p(e,t={},n){return{type:"PLACEMENT_MOUNT",payload:{placementId:e,extraContext:t,targeting:n}}}function f(e){return{type:"PLACEMENT_UNMOUNT",payload:{placementId:e}}}function g(e){return{type:"SAVE_TARGETING",payload:{targeting:e}}}n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"k",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"i",(function(){return b})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return g}))},WFqU:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("yLpj"))},Wer7:function(e,t,n){function i(e,t={}){return{type:"RESOURCE_INVALIDATE",payload:{name:e,options:t}}}function o(e,t={},n={}){return{type:"RESOURCE_FETCH",payload:{name:e,options:t,headers:n}}}function r(e,t={},n={},i={}){return{type:"RESOURCE_PREFETCH",payload:{name:e,options:t,headers:i}}}function a(e,t={}){return{type:"RESOURCE_PREFETCH_READ",payload:{name:e,options:t}}}function s(e,t={},n={}){return{type:"RESOURCE_FETCH_MORE",payload:{name:e,options:t,headers:n}}}function c(e,t={}){return{type:"RESOURCE_FETCH_CREATE",payload:{name:e,options:t}}}function d(e,t={},n,i,o,r,a=!1){return{type:"RESOURCE_FETCH_COMPLETE",payload:{auxData:i,data:n,isPrefetch:a,name:e,nextBookmark:r,options:t},error:o}}function l(e,t={},n,i,o,r){return{type:"RESOURCE_FETCH_MORE_COMPLETE",payload:{auxData:i,data:n,name:e,nextBookmark:r,options:t},error:o}}n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return l}))},WgLT:function(e,t,n){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},WjpJ:function(e,t,n){var i=n("HLqC")();e.exports=i},WwFo:function(e,t,n){var i=n("juv8"),o=n("7GkX");e.exports=function(e,t){return e&&i(t,o(t),e)}},X6C7:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("QWfI"),o=function(){function e(e){this.isDisposed=!1,this.action=i.isFunction(e)?e:i.noop}return e.isDisposable=function(e){return e&&i.isFunction(e.dispose)},e._fixup=function(t){return e.isDisposable(t)?t:e.empty},e.create=function(t){return new e(t)},e.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},e.empty={dispose:i.noop},e}();t.Disposable=o},XRfM:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return h})),n.d(t,"h",(function(){return b})),n.d(t,"f",(function(){return p}));var i=n("Ye/N");const o=function(e,t){const n=t||0,i=Math.pow(10,n),o=+(n?e*i:e).toFixed(8),r=Math.floor(o),a=o-r,s=a>.5-1e-8&&a<.5+1e-8?r%2==0?r:r+1:Math.round(o);return n?s/i:s},r={USD:"$",GBP:"£",CAD:"$",EUR:"€",AUD:"A$",NZD:"NZ$",SEK:"kr",NOK:"kr",DKK:"kr"},a=e=>{try{(0).toLocaleString([e])}catch(t){return!1}return!0};function s(e,t,n,i,o,r,s){const c=function(e,t,n,i,o="symbol"){const r={maximumFractionDigits:e,minimumFractionDigits:t};return n&&(r.style=n,"currency"===n&&(r.currency=i,r.currencyDisplay=o)),r}(n,i,o,r,s);return t.toLocaleString([a(e)?e:"en-US"],c)}function c(e,t,n){let r,a;const c=n&&n.style||void 0,d=n&&n.shortform||!1,l=n&&n.uplimit||void 0,u=n&&n.currency||void 0;if(l&&t>l)return l+"+";if("currency"===c?(r=void 0===n||void 0===n.maximum_fraction_digits?2:n.maximum_fraction_digits,a=void 0===n||void 0===n.minimum_fraction_digits?2:n.minimum_fraction_digits):(r=void 0===n||void 0===n.maximum_fraction_digits?0:n.maximum_fraction_digits,a=void 0===n||void 0===n.minimum_fraction_digits?0:n.minimum_fraction_digits),d&&t>999&&(r=void 0===n||void 0===n.shortform_maximum_fraction_digits?2:n.shortform_maximum_fraction_digits,a=0),r<a)return String(t);let h=t,b="";const p=[{"100M":{value:1e8,localeKey:i.a._("億","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.")}},{"10k":{value:1e4,localeKey:i.a._("万","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.")}}],f=[{b:{value:1e9,localeKey:i.a._("b","Abbreviation for one billion.","Abbreviation for one billion.")}},{m:{value:1e6,localeKey:i.a._("m","Abbreviation for one million.","Abbreviation for one million.")}},{k:{value:1e3,localeKey:i.a._("k","Abbreviation for one thousand.","Abbreviation for one thousand.")}}],g=/^zh|ja|ko/.test(e);if(d&&t>999){const e=g?p:f;for(let n=0;n<e.length;n+=1){const i=Object.keys(e[n])[0],a=e[n][i].value;if(t>=a){h=o(t/a*Math.pow(10,r))/Math.pow(10,r),b=e[n][i].localeKey;break}}}return s(e,h,r,a,c,u||void 0)+b}const d={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour"},l=function(e,t,n,i=!0){const o=function(e){switch(e){case d.YEAR:return{year:"numeric"};case d.LONG:return{year:"numeric",month:"long",day:"numeric"};case d.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case d.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case d.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case d.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case d.MONTH_DAY:return{month:"long",day:"numeric"};case d.SHORT_MONTH:return{month:"short"};case d.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case d.DAY:return{day:"numeric"};case d.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case d.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case d.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case d.TIME:return{hour:"numeric",minute:"2-digit"};case d.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case d.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}}(n);i&&(o.timeZone="UTC");return new Intl.DateTimeFormat(e,o).format(t)},u=function(e){return 1.1.toLocaleString(e).substring(1,2)},h=function(e,t){return","===u(t)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},b=function(e,t){return","===u(t)&&e?e.replace(",","."):e},p=function(e){switch(e){case"zh":return i.a._("Chinese","locale.languageName","Language name");case"cs":return i.a._("Czech","locale.languageName","Language name");case"da":return i.a._("Danish","locale.languageName","Language name");case"nl":return i.a._("Dutch","locale.languageName","Language name");case"en":return i.a._("English","locale.languageName","Language name");case"fi":return i.a._("Finnish","locale.languageName","Language name");case"fr":return i.a._("French","locale.languageName","Language name");case"de":return i.a._("German","locale.languageName","Language name");case"el":return i.a._("Greek","locale.languageName","Language name");case"hu":return i.a._("Hungarian","locale.languageName","Language name");case"id":return i.a._("Indonesian","locale.languageName","Language name");case"it":return i.a._("Italian","locale.languageName","Language name");case"ja":return i.a._("Japanese","locale.languageName","Language name");case"ko":return i.a._("Korean","locale.languageName","Language name");case"nb":return i.a._("Norwegian","locale.languageName","Language name");case"pl":return i.a._("Polish","locale.languageName","Language name");case"pt":return i.a._("Portuguese","locale.languageName","Language name");case"ro":return i.a._("Romanian","locale.languageName","Language name");case"ru":return i.a._("Russian","locale.languageName","Language name");case"sk":return i.a._("Slovak","locale.languageName","Language name");case"es":return i.a._("Spanish","locale.languageName","Language name");case"sv":return i.a._("Swedish","locale.languageName","Language name");case"tr":return i.a._("Turkish","locale.languageName","Language name");case"uk":return i.a._("Ukrainian","locale.languageName","Language name");default:return e}},f={DateFormatType:d,formatDate:l,ngettext:function(e,t,n,o){const r=+function(e){return i.a.getPluralFunction(e)}(e)(o);let a;return a="en-US"===e&&1===r?n:t,i.a._(a,"",r)},prettyNumberFormat:c,numberFormat:s,currencySymbols:r,localizeCurrencyValue:h,unlocalizeCurrencyValue:b};t.c=f},XYm9:function(e,t,n){var i=n("+K+b");e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},"Xnm/":function(e,t,n){},Y8Sn:function(e,t,n){n.d(t,"i",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b}));const i=e=>!!e&&!!e.video_list,o=({story_pin_data_id:e})=>!!e,r=e=>{var t;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null===(t=e.rich_metadata)||void 0===t?void 0:t.products)&&e.rich_metadata.products.length>0||!1},a=e=>!!e.promoter&&!e.is_downstream_promotion,s=e=>!!e.video_status&&5!==e.video_status,c=e=>!!e.creator_class,d=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,o={...n,...i};return!!o[e]&&!o[e].paused},l=e=>["email","messages","deep_linking"].includes(e),u=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,o={...n,...i};for(const r in o){const{paused:t}=o[r];if(r!==e&&!t)return!1}return!0},h=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,o={...n,...i};return o[e]&&o[e].currentTime},b=()=>{let e=800,t=400;return"undefined"!=typeof window&&(e=window.innerHeight,t=window.innerWidth),{windowHeight:e,windowWidth:t}}},YGxj:function(e,t,n){n.d(t,"a",(function(){return u}));var i=n("q1tI"),o=n("c4Fo"),r=n("BcvT"),a=n("n6mq"),s=n("nKUr");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.PureComponent{constructor(...e){super(...e),c(this,"onScroll",()=>{const{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),c(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const{anchor:e,text:t,thumbnails:n,idealDirection:i}=this.props,o=n.slice(-3);return Object(s.jsx)(a.J,{anchor:e,color:"white",idealDirection:i,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:Object(s.jsxs)(a.f,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%",children:[Object(s.jsx)(a.f,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:Object(s.jsx)(a.ab,{color:"darkGray",weight:"bold",children:t})}),Object(s.jsx)(a.f,{display:"flex",marginEnd:-2,paddingX:2,children:o.map(e=>Object(s.jsx)(a.f,{height:60,width:50,paddingX:1,children:Object(s.jsx)(a.C,{rounding:2,height:60,children:Object(s.jsx)(a.x,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i.Component{constructor(...e){super(...e),l(this,"state",{paused:!1}),l(this,"handlePulsarClick",(e,t)=>{e?this.setState({paused:!0}):t()})}componentWillUnmount(){clearTimeout(this.timer)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}getText(e,t,n){return t&&e.text.replace("{boardName}",t),n?n(e):e.text}render(){const{anchor:e,customWrapper:t,experienceIds:n,boardTextOverride:c,flyoutSize:l,fontSize:u,idealDirection:h,useMasonryFlyout:b,noClickToDismiss:p,onClickComplete:f,onClickDismiss:g,placementId:m,positionRelativeToAnchor:j,shouldTimeoutDismiss:v,showCaret:O,textAlign:x,textOverflow:y,textOverrideFn:_,textWeight:w,customizedComplete:C,pulsarZIndex:S}=this.props,I=t||(({children:e})=>b?Object(s.jsx)(a.z,{children:e}):e),T="blue";return Object(s.jsx)(o.a,{experienceIds:n,placementId:m,type:8,children:({complete:t,dismiss:n,display_data:o})=>(this.setDefaultPulsarTooltip(o),o.has_pulsar||o.has_tooltip?(v&&o.disappearTime&&o.disappearTime>0&&(this.timer=setTimeout(()=>(n(),null),o.disappearTime)),Object(s.jsxs)(i.Fragment,{children:[o.has_pulsar&&Object(s.jsx)(r.a,{anchor:e,onTouch:()=>this.handlePulsarClick(o.has_tooltip,t),paused:this.state.paused,zIndex:S&&S.index()}),o.has_tooltip&&(!o.has_pulsar||this.state.paused)&&(o.thumbnail_urls?Object(s.jsx)(d,{anchor:e,dismiss:n,idealDirection:h||"down",text:o.text,thumbnails:o.thumbnail_urls}):Object(s.jsx)(I,{children:Object(s.jsx)(a.J,{anchor:e,color:T,idealDirection:h||"down",onDismiss:p?()=>{}:n,positionRelativeToAnchor:!b&&j,shouldFocus:!1,showCaret:O,size:l,children:Object(s.jsxs)(a.f,{column:12,padding:3,children:[Object(s.jsx)(a.ab,{align:"right"===x?"end":x,color:"white",overflow:y,size:u,weight:w||"bold",children:this.getText(o,c,_)}),o.sub_text&&Object(s.jsx)(a.f,{paddingY:2,children:Object(s.jsx)(a.ab,{color:"white",size:u,children:o.sub_text})}),(o.dismiss_button_text||o.complete_button_text)&&Object(s.jsxs)(a.f,{display:"flex",alignItems:"center",marginTop:2,children:[o.dismiss_button_text&&Object(s.jsx)(a.f,{marginEnd:1,column:6,children:Object(s.jsx)(a.g,{color:T,onClick:()=>{g&&g(),n()},size:"md",text:o.dismiss_button_text})}),o.complete_button_text&&Object(s.jsx)(a.f,{column:o.dismiss_button_text?6:12,children:C?Object(s.jsx)(a.Z,{fullHeight:!0,onTap:()=>{t(),f&&f()},rounding:2,children:Object(s.jsx)(a.f,{display:"flex",color:"white",padding:2,rounding:2,justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}},children:Object(s.jsx)(a.ab,{color:"blue",weight:"bold",children:o.complete_button_text})})}):Object(s.jsx)(a.g,{color:"white",size:"md",text:o.complete_button_text,onClick:()=>{t(),f&&f()}})})]})]})})}))]})):(t(),null))})}}l(u,"defaultProps",{fontSize:"lg",positionRelativeToAnchor:!0})},"Ye/N":function(e,t,n){Error;const i={_:e=>(process&&process.env,e),set(e){Object.assign(this,e)}};t.a=i},Yo6N:function(e,t,n){n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var i=n("q1tI"),o=n("qD10"),r=n("n6mq"),a=n("nKUr");function s({action:e,alignCenter:t}){const{title:n,description:i,button:s}=e,c=n&&n.text,d=i&&i.text,l=s&&s.text||"",u=s&&s.link||"",h=s&&s.link?s.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"";return s&&l&&u.startsWith("http")?Object(a.jsxs)(r.f,{children:[Object(a.jsx)(r.f,{marginBottom:1,children:Object(a.jsx)(r.ab,{align:t?"center":"start",weight:"bold",children:""!==l?l:"Visit"})}),Object(a.jsx)(r.f,{marginBottom:1,children:Object(a.jsx)(o.a,{className:"underlineLink",to:u,children:Object(a.jsx)("span",{style:{textDecoration:"underline"},children:Object(a.jsx)(r.ab,{align:t?"center":"start",truncate:!0,children:h})})})})]}):Object(a.jsxs)(r.f,{children:[!!c&&Object(a.jsx)(r.f,{marginBottom:1,children:Object(a.jsx)(r.ab,{align:t?"center":"start",weight:"bold",children:c})}),!!d&&Object(a.jsx)(r.f,{marginBottom:1,children:Object(a.jsx)(r.ab,{align:t?"center":"start",children:d})})]})}const c={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},d={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function l({inModal:e,notice:t}){const{title:n,description:i,actions:o=[]}=t,l=i&&i.text||"",u=i&&i.text_tags||[],h=1===o.length,b=f(l,u);return Object(a.jsxs)(r.f,{rounding:2,padding:6,dangerouslySetInlineStyle:{__style:e?d:c},children:[!!n&&!e&&Object(a.jsx)(r.f,{marginBottom:2,display:"flex",children:Object(a.jsx)(r.u,{size:"md",children:n})}),!!l&&Object(a.jsx)(r.f,{marginBottom:4,children:Object(a.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:Object(a.jsx)(r.ab,{overflow:"normal",align:e?"center":"start",children:b})})}),!!o.length&&Object(a.jsx)(r.f,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:e?"column":"row",children:o.map(t=>Object(a.jsx)(r.f,{column:e||h?12:6,paddingY:1,paddingX:2,children:Object(a.jsx)(s,{action:t,alignCenter:e||h})},JSON.stringify(t)))})]})}var u=n("EC51");function h({notice:e}){const{actions:t=[],description:n,footer:i}=e,o=f(n&&n.text||"",n&&n.text_tags||[]),s={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return Object(a.jsxs)(r.f,{width:"100%",display:"flex",direction:"column",alignItems:"center",marginBottom:3,children:[Object(a.jsx)(r.f,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",width:656,rounding:8,children:Object(a.jsxs)(r.f,{height:"100%",width:"100%",padding:10,children:[Object(a.jsx)("span",{style:s,children:o}),Object(a.jsx)(r.f,{marginTop:6,children:t.map(e=>{var t;const n=null===(t=e.button)||void 0===t?void 0:t.link;var i,o,c;return n&&n.startsWith("tel")?Object(a.jsxs)(r.f,{children:[Object(a.jsx)("span",{style:{fontWeight:"600",...s},children:null===(i=e.title)||void 0===i?void 0:i.text}),Object(a.jsx)("span",{style:s,children:null===(o=e.description)||void 0===o?void 0:o.text})]}):Object(a.jsx)(u.a,{href:n||"",children:Object(a.jsx)(r.f,{display:"inlineBlock",children:Object(a.jsx)(r.f,{alignItems:"center",color:"navy",display:"flex",justifyContent:"center",height:44,rounding:"pill",width:117,children:Object(a.jsx)(r.ab,{color:"white",weight:"bold",children:(null===(c=e.button)||void 0===c?void 0:c.text)||""})})})})})})]})}),!!i&&Object(a.jsx)(r.f,{paddingY:2,width:540,children:Object(a.jsx)(u.a,{inline:!0,target:"blank",href:i.link,children:Object(a.jsx)(r.ab,{align:"center",color:"gray",size:"sm",children:Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:i.text}})})},i.link)})]})}var b=n("hZxF"),p=n("U4JR");function f(e,t){const n=[];let i=0;for(let o=0;o<t.length;o+=1){const s=t[o];if(5===s.tag_type&&s.link){const t=e.substring(s.offset,s.offset+s.length),o=Object(a.jsx)(r.ab,{inline:!0,weight:"bold",children:Object(a.jsx)(u.a,{inline:!0,target:"blank",href:s.link,children:t},t)});n.push(Object(a.jsx)("span",{children:e.substring(i,s.offset)})),n.push(o),i=s.offset+s.length}}return i>0&&n.push(Object(a.jsx)("span",{children:e.substring(i)})),0===n.length?[Object(a.jsx)("span",{children:e})]:n}function g({inModal:e,notices:t,viewType:n,query:o,sensitivity:r}){return Object(b.a)(()=>{n&&Object(p.b)(120,{component:13367,view:n,entered_query:o,advisory_details:null==r?void 0:r.advisory_details,advisory_level:null==r?void 0:r.advisory,severity_level:null==r?void 0:r.severity})}),Object(a.jsx)(i.Fragment,{children:t.map(t=>2===t.style?Object(a.jsx)(h,{notice:t}):Object(a.jsx)(l,{notice:t,inModal:e}))})}},YuQ1:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("LTlA");t.NONE=[],t.ALL=[],t.NONE.__IS_NONE__=!0,t.ALL.__IS_ALL__=!0,t.areDirty=function(e,n){return e!==t.NONE&&(e===t.ALL||void 0===n||i.intersection(n,e).length>0)}},ZCpW:function(e,t,n){var i=n("lm/5"),o=n("O7RO"),r=n("IOzZ");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}},ZVOf:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return l}));var i=n("eOdZ"),o=n("/X16");function r(e,t){return i.a.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function a(e,t){return{type:o.a.USER_FOLLOW,payload:{id:e,value:t}}}function s(e,t=null){return n=>{r(e,t).callCreate().catch(()=>n(a(e,!1))),n(a(e,!0))}}function c(e,t=null){return async n=>{n(a(e,!0)),await r(e,t).callCreate().catch(t=>{throw n(a(e,!1)),t})}}function d(e,t=null){return n=>{r(e,t).callDelete().catch(()=>n(a(e,!0))),n(a(e,!1))}}function l(e,t=null){return async n=>{n(a(e,!1)),await r(e,t).callDelete().catch(t=>{throw n(a(e,!0)),t})}}},ZWtO:function(e,t,n){var i=n("4uTw"),o=n("9Nap");e.exports=function(e,t){for(var n=0,r=(t=i(t,e)).length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}},ZbwW:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("EDqd");function o(e){const t=(((e||{}).rich_metadata||{}).products||[])[0]||{};return t&&t.additional_images&&t.additional_images.length>0?Object(i.a)(e.images,t,e.carousel_data&&e.carousel_data.index):e&&e.carousel_data}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a}));const i={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},o={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function r(e){return null!=e&&(!!e.notice||!!e.notices&&e.notices.length>0)}function a(e){return!!e&&e.severity===o.ABUSIVE}},a9a9:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=n("zpPL");const o=e=>i.a.instance.dispatch(function(e){return{type:"SPAMMY_CLICKTHROUGH_WARNING_SHOW",payload:e}}(e)),r=()=>i.a.instance.dispatch({type:"SPAMMY_CLICKTHROUGH_WARNING_DISMISS"})},"aK+E":function(e,t,n){n.d(t,"a",(function(){return r}));const i=new Set(["bookmarks","client_tracking_params","in_nux","invite_code","no_fetch_context_on_resource","original_referrer","source","top_level_source","top_level_source_depth"]),o=e=>!i.has(e)&&!e.startsWith("__track__"),r=e=>e?Object.keys("object"==typeof e&&e||{}).filter(e=>"string"==typeof e).filter(o).sort().map(t=>`${t}=${JSON.stringify(null==e[t]?null:e[t])}`).join(","):""},aS9Y:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("Jld5");t.createDragDropManager=function(e,t,n){return new i.default(e,t,n)}},aUfZ:function(e,t,n){var i=n("P9b8"),o=n("sZWH"),r=n.n(o);t.a=Object(i.DragDropContext)(r.a)},alwl:function(e,t,n){var i=n("eUgh"),o=n("ZWtO"),r=n("ut/Y"),a=n("l9OW"),s=n("1LK5"),c=n("sEf8"),d=n("IWTy"),l=n("zZ0H"),u=n("Z0cm");e.exports=function(e,t,n){t=t.length?i(t,(function(e){return u(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[l];var h=-1;t=i(t,c(r));var b=a(e,(function(e,n,o){return{criteria:i(t,(function(t){return t(e)})),index:++h,value:e}}));return s(b,(function(e,t){return d(e,t,n)}))}},"b/K5":function(e,t,n){n.d(t,"a",(function(){return m}));var i=n("q1tI"),o=n("n6mq"),r=n("nKUr");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],c=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),d=e=>e*(Math.PI/180);class l extends i.PureComponent{constructor(...e){super(...e),a(this,"animationTimer",null),a(this,"canvasRemovalTimer",null),a(this,"containerRef",Object(i.createRef)()),a(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;const{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),n=2.5*e,i=document.createElement("canvas");return i.style.position="absolute",i.style.left=0-(n-t)/2+"px",i.style.top=0-(n-e)/2+"px",i.style.pointerEvents="none",i.style.width=n+"px",i.style.height=n+"px",i.style.overflow="visible",i.width=n,i.height=n,i}),a(this,"explode",()=>{const e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;const n=e.getContext("2d");t.prepend(e);const i=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(c(10,30)),color:s[Math.floor(Math.random()*s.length)],degree:Number(c(0,360).toFixed(1)),speed:Math.round(c(0,25)),friction:.9,opacity:Number(c(0,.5).toFixed(1)),yVel:0,gravity:.04})),o=(e,t,n,i)=>{window.requestAnimationFrame(()=>o(e,t,n,i)),t.clearRect(0,0,n,i),e.forEach((e,n)=>{e.x+=e.speed*Math.cos(d(e.degree)),e.y+=e.speed*Math.sin(d(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};o(i,n,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},(this.props.delay||0)+800)})}componentDidUpdate(e){const{delay:t,startAnimation:n}=this.props,{startAnimation:i}=e;n&&i!==n&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return Object(r.jsx)(o.f,{ref:this.containerRef,position:"relative",children:this.props.children})}}a(l,"defaultProps",{delay:0});var u=l,h=n("Ye/N"),b=n("vvax");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=e=>({opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}),g=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"});class m extends i.PureComponent{constructor(...e){super(...e),p(this,"state",{isInitialized:!1}),p(this,"containerRef",Object(i.createRef)()),p(this,"pinDestinationRef",Object(i.createRef)())}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(e,t){const{isInitialized:n}=this.state,{onDismiss:i}=this.props;n&&i&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(i,2600))}render(){const{firstRepin:e,pin:t,pinImageRef:n,selectedBoardName:a}=this.props,{description:s="",images:c}=t,{height:d=0,width:l=0,url:p=""}=(null==c?void 0:c["236x"])||{},{isInitialized:m}=this.state,{mask:j,imageContainer:v}=((e,t,n,i)=>{var o,r,a;let s,c,d={};const l=null===(o=n.current)||void 0===o?void 0:o.getBoundingClientRect(),u=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect(),h=null===(a=i.current)||void 0===a?void 0:a.getBoundingClientRect();if(u&&l&&h){d={left:l.left-u.left,top:l.top-u.top};const e={x:h.left-l.left,y:h.top-l.top},t={x:(h.width-l.width)/2,y:(h.height-l.height)/2};s=`translate(${e.x}px, ${e.y}px)`,c=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:d.left,top:d.top,width:e?null==h?void 0:h.width:null==l?void 0:l.width,height:e?null==h?void 0:h.height:null==l?void 0:l.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?s:"none",transform:e?s:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:null==l?void 0:l.width,height:null==l?void 0:l.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?c:"none",transform:e?c:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(m,this.containerRef,n,this.pinDestinationRef);return Object(r.jsx)(i.Fragment,{children:Object(r.jsxs)(o.f,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef,children:[Object(r.jsx)(o.f,{maxHeight:335,overflow:"hidden",dangerouslySetInlineStyle:{__style:j},children:Object(r.jsx)(o.f,{dangerouslySetInlineStyle:{__style:v},children:Object(r.jsx)(o.x,{alt:null!=s?s:"",src:p||"",naturalHeight:d||1,naturalWidth:l||1})})}),Object(r.jsx)(o.f,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:(O=m,{pointerEvents:"none",opacity:O?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1})},children:Object(r.jsxs)(o.f,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:f(m)},children:[Object(r.jsx)(u,{delay:1250,startAnimation:m,children:Object(r.jsx)(o.C,{rounding:2,width:270,height:180,children:Object(r.jsxs)(o.f,{display:"flex",height:"100%",width:"100%",children:[Object(r.jsx)(o.f,{ref:this.pinDestinationRef,color:"transparent",marginEnd:1,flex:"grow",height:"100%"}),Object(r.jsxs)(o.f,{display:"flex",width:80,direction:"column",children:[Object(r.jsx)(o.f,{color:"lightGray",flex:"grow",marginBottom:1}),Object(r.jsx)(o.f,{color:"lightGray",flex:"grow"})]})]})})}),Object(r.jsx)(o.f,{paddingX:2,dangerouslySetInlineStyle:{__style:g(m)},children:Object(r.jsx)(o.u,{align:"center",children:e?Object(b.b)(h.a._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message","First board create confirmation message"),{selectedBoardName:null!=a?a:""}):Object(b.b)(h.a._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message","Board create confirmation message"),{selectedBoardName:null!=a?a:""})})})]})})]})});var O}}p(m,"defaultProps",{firstRepin:!1})},b2z7:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},bCCX:function(e,t,n){(function(e,i){var o,r=n("SLVX");o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:i;var a=Object(r.a)(o);t.a=a}).call(this,n("yLpj"),n("3UD+")(e))},bVL4:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("TKJ6"),o=n("LTlA"),r=n("QLaP"),a=n("7nh8"),s={type:a.INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};t.default=function(e){return function(t,n){void 0===t&&(t=[]),void 0===n&&(n={publishSource:!0});var c=n.publishSource,d=void 0===c||c,l=n.clientOffset,u=n.getSourceClientOffset,h=e.getMonitor(),b=e.getRegistry();e.dispatch(i.setClientOffset(l)),function(e,t,n){r(!t.isDragging(),"Cannot call beginDrag while dragging.");for(var i=0,o=e;i<o.length;i++){var a=o[i];r(n.getSource(a),"Expected sourceIds to be registered.")}}(t,h,b);var p=function(e,t){for(var n=null,i=e.length-1;i>=0;i--)if(t.canDragSource(e[i])){n=e[i];break}return n}(t,h);if(null!==p){var f=null;l&&(!function(e){r("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(u),f=u(p)),e.dispatch(i.setClientOffset(l,f));var g=b.getSource(p).beginDrag(h,p);!function(e){r(o.isObject(e),"Item must be an object.")}(g),b.pinSource(p);var m=b.getSourceType(p);return{type:a.BEGIN_DRAG,payload:{itemType:m,item:g,sourceId:p,clientOffset:l||null,sourceClientOffset:f||null,isSourcePublic:!!d}}}e.dispatch(s)}}},bVT4:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e){var t=null;return function(){return null==t&&(t=e()),t}},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.union=function(e,t){var n=new Set,i=function(e){return n.add(e)};e.forEach(i),t.forEach(i);var o=[];return n.forEach((function(e){return o.push(e)})),o}},"bY+3":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("2S0S"),o=!1,r=function(){function e(e){this.targetId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.targetId=e},e.prototype.getHandlerId=function(){return this.targetId},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.canDrop=function(){if(!this.targetId)return!1;i(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}},e.prototype.isOver=function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=r},bY5B:function(e,t,n){var i=n("WgLT");function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,r,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return n.PropTypes=n,n}},bxss:function(e,t,n){n.d(t,"a",(function(){return l}));var i=n("/MKj"),o=n("hZxF"),r=n("vZlu");function a({children:e}){const t=Object(i.useDispatch)();return Object(o.a)(()=>(t(Object(r.b)(!1)),()=>{t(Object(r.b)(!0))})),e}var s=n("n6mq"),c=n("nKUr");const d=new s.r(1e3);function l({anchor:e,children:t,color:n,idealDirection:i,onDismiss:o,positionRelativeToAnchor:r,showCaret:l,shouldFocus:u,size:h}){return Object(c.jsx)(a,{children:Object(c.jsx)(s.f,{zIndex:d,children:Object(c.jsx)(s.J,{anchor:e,color:n,idealDirection:i,onDismiss:o,positionRelativeToAnchor:r,showCaret:l,shouldFocus:u,size:h,children:t})})})}},c4Fo:function(e,t,n){var i=n("q1tI"),o=n("clxp"),r=n("zXAL"),a=n("nKUr");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=()=>null;class d extends i.Component{constructor(...e){super(...e),s(this,"view",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:i,targeting:o}=this.props;o?i.viewExperience(t,n,!1,o):i.viewExperience(t,n)}),s(this,"complete",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:i,preventRemoval:o,targeting:r}=this.props;r?i.completeExperience(t,n,o,!1,{},!1,r):o?i.completeExperience(t,n,o):i.completeExperience(t,n)}),s(this,"dismiss",e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:i,preventRemoval:o,targeting:r}=this.props;r?i.dismissExperience(t,n,o,!1,r):o?i.dismissExperience(t,n,o):i.dismissExperience(t,n)})}componentDidMount(){if(this.props.disableAutoView)return;const e=this.getExperience(this.props);e&&this.shouldRenderExperience(e)&&this.view(e)}componentDidUpdate(e){if(this.props.disableAutoView)return;const t=this.getExperience(e),n=this.getExperience(this.props);n&&this.shouldRenderExperience(n)&&(t&&t.experience_id===n.experience_id||this.view(n))}getExperience(e){return e.experienceClient.experienceForPlacement}shouldRenderExperience(e){if(e){const{type:t,experience_id:n}=e;if(this.props.experienceIds&&this.props.experienceIds.includes(n))return!0;if(!this.props.experienceIds){if(this.props.type&&this.props.type===t)return!0;if(this.props.transitionType&&this.props.transitionType===t)return!0;if(this.props.predicate&&this.props.predicate(e))return!0}}return!1}render(){const{children:e,disableAutoView:t}=this.props,n=this.getExperience(this.props);if(n&&this.shouldRenderExperience(n)&&e){const{placement_id:i,experience_id:r}=n;return Object(a.jsx)(o.a,{name:`Experience(${i}:${r})`,children:"function"==typeof e?e({...n,complete:()=>this.complete(n),dismiss:()=>this.dismiss(n),...t?{view:()=>this.view(n)}:{}}):e})}return Object(a.jsx)(c,{})}}t.a=Object(r.a)(d)},clxp:function(e,t,n){var i=n("q1tI"),o=n("7w6Q"),r=n("3h4M");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),a(this,"state",{error:null,info:null}),a(this,"resetError",()=>{this.setState({error:null,info:null})})}componentDidCatch(e,t){try{const t=this.props.name,n=this.props.type||"secondary";Object(r.b)({errorBoundary:t,errorBoundaryType:n,message:e.message,name:"React ErrorBoundary Exception",stack:e.stack}),o.a.increment("react.error_boundary",.1,{component:void 0,name:this.props.name})}catch(n){o.a.increment("react.error_boundary.error",1,{name:this.props.name})}this.setState({error:e,info:t})}render(){const{renderErrorState:e}=this.props,{error:t,info:n}=this.state;return t&&n?e?e({error:t,info:n,resetError:this.resetError}):null:this.props.children}}t.a=s},d7JY:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("n6mq"),o=n("nKUr");function r({children:e}){return Object(o.jsx)(i.f,{display:"flex",justifyContent:"center",children:e})}},d90F:function(e,t,n){var i=n("ESls");n.d(t,"a",(function(){return i.a}))},dH2W:function(e,t,n){n.r(t),n.d(t,"default",(function(){return l}));var i=n("q1tI"),o=n("Ye/N"),r=n("HoRl"),a=n("E8d4"),s=n("pLLR"),c=n("n6mq"),d=n("nKUr");function l({height:e,onCtaDidLoad:t,width:l}){const[u,h]=Object(i.useState)(null),{locale:b}=Object(s.d)(),p=Object(r.default)(b);Object(i.useEffect)(()=>{p&&"none"!==p&&(e=>{const t=Object(i.lazy)(()=>n("JBUN")("./"+e));h(t)})(p)},[p]),Object(i.useEffect)(()=>{u&&t()},[u]);const f=o.a._("Open Pinterest and tap the camera icon for ideas","PincodeCTA.title","Text informing users how to use Pincodes — may be displayed or used as accessibility label for an image"),g=Object(d.jsx)(c.ab,{align:"center",children:f});return"none"===p?g:u?Object(d.jsx)(a.a,{fallback:g,children:Object(d.jsx)(u,{height:e,title:f,width:l})}):Object(d.jsx)(c.T,{accessibilityLabel:o.a._("Loading Pincode Call to Action","PincodeCTA.loading","Accessibility label for loading spinner for the Pincode call-to-action"),show:!0})}},dJ9d:function(e,t,n){function i(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.isRefForwardingComponent=i,t.isRefable=function(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||i(e);var t}},dMCU:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("/MKj"),o=n("v/Q4"),r=n("aOj9"),a=n("nKUr");function s(e){const t=t=>{const n=Object(i.useDispatch)(),{isAuth:s,isLimitedLogin:c}=Object(o.a)(),d=Object(r.e)(),l=!s||c?e=>e=>{e&&e.stopPropagation(),d()}:e=>e;return Object(a.jsx)(e,{authAction:l,dispatch:n,isAuth:s,isLimitedLogin:c,...t})};return t.displayName=`WithAuthenticatedAction(${String(e.displayName||e.name)})`,t}},dt0z:function(e,t,n){var i=n("zoYe");e.exports=function(e){return null==e?"":i(e)}},dtqy:function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("5S2N"),a=n("Sp3T"),s=n("ANjH"),c=n("U4JR"),d=n("nKUr");t.a=Object(s.compose)(Object(o.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:o}=i||{};return void 0!==n?{carouselSlotCurrentIndex:o||n||0}:{}}),(function(e){return function(t){const[n,o]=Object(i.useState)(!1),s=Object(a.a)(),{pinId:l,onDelete:u,onSubmit:h,carouselSlotCurrentIndex:b}=t;return Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(e,{...t,handlePinEditButtonClick:e=>s(()=>{e&&e.stopPropagation();const{component:n,onToggleModal:i}=t;i&&i(!0),Object(c.b)(101,{element:3,...n?{component:n}:{}}),o(!0)})}),n&&Object(d.jsx)(r.a,{carouselSlotCurrentIndex:b,onDelete:u,onHide:()=>{o(!1),t.onToggleModal&&t.onToggleModal(!1)},onSubmit:h,pinId:l})]})}}))},e0nq:function(e,t,n){function i(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function r(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function a(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}))},eGqM:function(e,t,n){var i=n("q1tI"),o=n("DzJC"),r=n.n(o);t.a=function(e=1400){const[t,n]=Object(i.useState)(!1),[o,a]=Object(i.useState)(!1),s=r()(()=>{if(window&&window.scrollY){const i=window.scrollY>=e;if(i&&!t?n(!0):!i&&t&&n(!1),document&&document.body){window.innerHeight+window.scrollY+1>=document.body.offsetHeight&&a(!0)}}},50);return Object(i.useEffect)(()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}),[s]),{hasScrolledToBottom:o,isScrolledToThreshold:t}}},eIuQ:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s}));var i=n("Ye/N");function o(e){return e?i.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):i.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function r(e){return e?i.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):i.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}function a(e){return i.a._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}function s(e){return e?i.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):i.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}},eUgh:function(e,t){e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}},eiom:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isDisposed=!1,this.disposables=e}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),e.dispose())}return t},e.prototype.clear=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(n=0;n<e;n++)t[n].dispose()}},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(n=0;n<e;n++)t[n].dispose()}},e}();t.CompositeDisposable=i},fJfT:function(e,t,n){n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return j}));var i=n("TPPM"),o=n("ajUs"),r=n("eOdZ"),a=n("gxu6"),s=n("T0g9");var c={open(e,t,n,o,r){const c=Math.round(1e3*Math.random())+"",d=Math.round(1e3*Math.random())+"";a.b("offsite_"+c,d);const l={token:c+"-"+d,url:e,csr:void 0,pin:void 0,client_tracking_params:o,aux_data:r?JSON.stringify(r):void 0};t?l.pin=t:n&&(l.csr=n),Object(i.a)("/offsite/?"+Object(s.a)(l),!0)}};var d=n("zwad"),l=n("a9a9"),u=n("Y8Sn"),h=n("078/");const b=()=>{window&&window.focus(),document.activeElement&&document.activeElement.blur()},p=({isExternalLink:e,event:t})=>!e&&(t.metaKey||t.ctrlKey),f=({location:e,pin:t,surface:n})=>!Object(u.f)(t)&&(({location:e,pinId:t,surface:n})=>{const i=Boolean(n),o=h.a.includes(n),r=e.pathname.includes(t);return i&&!o||r})({location:e,pinId:t.id,surface:n}),g=async({isMounted:e,pin:t,location:n,spamCheckCallback:i,href:a})=>{const s=r.a.create("OffsiteLinkResource",{check_only:!0,client_tracking_params:Object(o.a)(t,n),pin_id:null==t?void 0:t.id,url:a}),c=await s.callGet({showError:!1});if(!c.resource_response.error&&e){const e=c.resource_response.data||{},{message:t,redirect_status:n,url:o}=e;i({blocked:["blocked","suspicious","porn"].includes(n),message:t,redirectStatus:n,sanitized_url:o})}},m=({event:e,onHistoryChange:t,href:n,history:o,target:r})=>{const a=d.a.getUrlClass(n);a===d.a.UrlClass.TRUSTED_DIFFERENT_ORIGIN||"blank"===r?Object(i.a)(n,"blank"===r):o&&a===d.a.UrlClass.SAME_ORIGIN&&(o.push(d.a.normalizeUrl(n)),t&&t({event:e}))},j=({href:e,pinId:t,pin:n,location:i,auxData:a,spamCheck:s})=>{"undefined"!=typeof window&&window.Windows?function({url:e,pinId:t,pin:n,location:i,auxData:a}){const s={check_only:!0,client_tracking_params:n?Object(o.a)(n,i):void 0,pin_id:n?n.id:t,url:e,aux_data:JSON.stringify(a)};r.a.create("OffsiteLinkResource",s).callGet().then(r=>{if(r&&r.resource_response&&!r.resource_response.error){const{resource_response:e}=r,{redirect_status:t,url:n}=e.data;if(!["blocked","suspicious","porn"].includes(t)){if(window.Windows.Foundation&&window.Windows.System&&window.Windows.System.Launcher&&window.Windows.System.Launcher.launchUriAsync){const e=new window.Windows.Foundation.Uri(n);window.Windows.System.Launcher.launchUriAsync(e)}return}}if(n){const r=Object(o.a)(n,i);c.open(e,t,null,r,a)}else c.open(e,t)})}({url:e,pinId:t,pin:n,location:i,auxData:a}):n?(({spamCheck:e,auxData:t,location:n,pin:i,pinId:r,href:a})=>{null!=e&&e.blocked?Object(l.b)(e):c.open(a,r,null,Object(o.a)(i,n),t)})({spamCheck:s,auxData:a,location:i,pin:n,pinId:t,href:e}):c.open(e,t)}},fNcP:function(e,t,n){n.d(t,"a",(function(){return Ue}));var i=n("/MKj"),o=n("0rqM"),r=n("Ye/N"),a=n("M1Uz"),s=n("vvax"),c=n("n6mq"),d=n("nGHF"),l=n("oN2T"),u=n("nKUr");function h({shouldArchive:e,board:t,onClose:n,onConfirm:h}){const b=Object(i.useDispatch)(),{showOneToast:p}=Object(d.b)();return Object(u.jsx)(o.a,{confirmButtonLabel:e?r.a._("Archive","BoardPage.ModalContents.BoardModalManager","button label on confirming board archive"):r.a._("Unarchive","BoardUnarchiveConfirmation.BoardEditConfirmation.buttonLabel","button label on confirming board unarchive"),heading:e?r.a._("Archive this board?","BoardPage.ModalContents.BoardModalManager","modal heading for board archive confirmation"):r.a._("Unarchive this board?","BoardUnarchiveConfirmation.BoardEditConfirmation.heading","modal heading for board unarchive confirmation"),message:Object(s.b)(e?r.a._("If you archive {{ boardName }}, you won’t be able to save Pins to it. We’ll hide it from your profile and stop using it for recommendations. (Don’t worry: You can unarchive your board to undo this!)","BoardPage.ModalContents.BoardModalManager","Confirmation message when archiving a board"):r.a._("If you unarchive {{ boardName }}, it will show up on your profile and you’ll be able to save new Pins to it.","BoardUnarchiveConfirmation.BoardEditConfirmation.message","Confirmation message when unarchiving a board"),{boardName:Object(u.jsx)(c.ab,{inline:!0,weight:"bold",children:t.name},t.name)}),onCancel:n,onConfirm:()=>{b(e?Object(l.a)(t.id):Object(l.m)(t.id)),h(),n(),p(({onHide:n})=>{var i;return Object(u.jsx)(a.a,{imageUrl:null!==(i=t.image_cover_url)&&void 0!==i?i:"",onHide:n,text:e?Object(s.b)(r.a._("Archived {{ boardName }}","board.BoardPage.ModalContents.BoardArchiveConfirmation","Toast text on complete archiving board"),{boardName:t.name}).join(""):Object(s.b)(r.a._("Unarchived {{ boardName }}","BoardUnarchiveConfirmation.handleConfirmUnarchive.message","Toast text on completing unarchiving board"),{boardName:t.name}).join("")})})}})}var b=n("OQKm"),p=n("qdVQ"),f=n("q1tI"),g=n("TgLd"),m=n("/MAO");function j({fetchMore:e,followers:t,followersCount:n,isFetching:i,onDismiss:o}){return Object(u.jsx)(g.b,{accessibilityModalLabel:r.a._("Board Followers","boardFollowersList.modal.accessibilityLabelForModal","Accessibility label for modal"),heading:Object(u.jsx)(c.f,{display:"flex",justifyContent:"center",padding:8,children:Object(u.jsx)(c.u,{size:"md",accessibilityLevel:1,children:Object(s.b)(r.a.ngettext("{{ followersCount }} Follower","{{ followersCount }} Followers",n,"Label for the number of people following a board","Label for the number of people following a board"),{followersCount:n.toLocaleString()})})}),onDismiss:o,size:"sm",children:Object(u.jsx)(c.f,{maxHeight:600,paddingX:6,overflow:"auto",children:t&&t.length>0?Object(u.jsxs)(f.Fragment,{children:[t.map(e=>Object(u.jsx)(m.a,{showFollow:!0,showName:!0,size:"medium",subtitle:"",user:e},e.id)),n-t.length>0?Object(u.jsx)(c.f,{display:"flex",justifyContent:"center",padding:5,marginBottom:2,children:Object(u.jsx)(c.g,{disabled:i,inline:!0,onClick:e,size:"lg",text:r.a._("See more","BoardFollowerList.SeeMore","Button to load more items in the board follower list")})}):null]}):Object(u.jsx)(c.f,{marginBottom:8,children:Object(u.jsx)(c.T,{accessibilityLabel:r.a._("Loading board followers","BoardModalManager.Spinner","Spinner which shows when loading board followers"),show:!0})})})})}var v=n("JW66"),O=n("w70y");function x({boardId:e,followersCount:t,onDismiss:n}){const{data:i=[],fetchMore:o,isFetching:r}=Object(O.a)({name:"BoardFollowersResource",options:{board_id:e,page_size:v.a.MAX_FETCH_NUM_FOLLOWERS_PER_PAGE}});return Object(u.jsx)(j,{fetchMore:o,followers:i,followersCount:t,isFetching:r,onDismiss:n})}var y=n("weYu"),_=n("fhMV");const w="236x",C="474x",S="736x",I=e=>t=>t.replace(/pinimg\.com\/\d+x\d*\//,`pinimg.com/${e}/`),T=e=>[w,C,S].map((t,n)=>`${I(t)(e)} ${n+1}x`).join(", ");function E({boardId:e,customizable:t}){const n=Object(O.a)({name:"BoardFeedResource",options:{board_id:e,field_set_key:"images_only_item",filter_section_pins:!1,page_size:t?60:4}}),i=!n.isLoaded,o=(n.data||[]).filter(({type:e})=>"pin"===e).map(({images:e})=>e["236x"]);return Object(u.jsx)(_.a,{getDownloadImageURL:I("1200x"),getMainImageURL:I(C),getThumbnailImageSrcSet:T,id:e,images:o,isLoadingImages:i,customizable:t})}function P({onCompleteBulkDelete:e,onClearModal:t,pinCountToDelete:n}){const i=1===n?r.a._("Delete this Pin"):r.a._("Delete these Pins"),o=1===n?r.a._("Are you sure you want to permanently delete this Pin?"):r.a._("Are you sure you want to permanently delete these Pins?");return Object(u.jsx)(g.b,{accessibilityModalLabel:r.a._("delete Pins","accessibility label for bulk delete modal","accessibility label for bulk delete modal"),footer:Object(u.jsxs)(c.f,{children:[Object(u.jsx)(c.f,{marginBottom:2,children:Object(u.jsx)(c.g,{text:r.a._("Cancel"),onClick:t})}),Object(u.jsx)(c.g,{text:r.a._("Delete"),color:"red",onClick:()=>{e(),t()}})]}),heading:i,onDismiss:t,children:Object(u.jsx)(c.f,{paddingX:8,children:Object(u.jsx)(c.ab,{children:o})})})}var D=n("V711");function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class k extends f.Component{constructor(...e){super(...e),B(this,"state",{chosenBoardId:null}),B(this,"filterCurrentBoard",e=>{const{currentBoardId:t}=this.props;return e.filter(e=>e.id!==t)}),B(this,"handleChosenBoardChange",e=>{this.setState({chosenBoardId:e.id})}),B(this,"handleConfirm",()=>{const{onCopyToBoard:e,onClearModal:t}=this.props,{chosenBoardId:n}=this.state;n&&(e(n),t())})}render(){const{onClearModal:e,pinCountToCopy:t}=this.props,{chosenBoardId:n}=this.state,i=1===t?r.a._("Pick another board for this Pin"):r.a._("Pick another board for these Pins");return Object(u.jsx)(g.b,{accessibilityModalLabel:r.a._("Copy your pins to a different board","BoardPage.ModalContents.BulkEditBoardPicker.accessibilityModalLabel","Accessiblilty modal label"),heading:i,onDismiss:e,footer:Object(u.jsxs)(c.f,{display:"flex",marginStart:-1,marginEnd:-1,justifyContent:"end",children:[Object(u.jsx)(c.f,{paddingX:1,children:Object(u.jsx)(c.g,{onClick:e,text:r.a._("Cancel")})}),Object(u.jsx)(c.f,{paddingX:1,children:Object(u.jsx)(c.g,{disabled:!n,onClick:this.handleConfirm,text:r.a._("Copy"),color:"red"})})]}),children:Object(u.jsx)(c.f,{padding:8,minHeight:400,children:Object(u.jsx)(D.a,{filterAllBoards:this.filterCurrentBoard,onBoardChosen:this.handleChosenBoardChange})})})}}n("Xnm/");var M=n("y9Ij"),R=n("4+TC"),A=n("yjg8");function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N=()=>{},F={__style:{zIndex:1}};class U extends f.PureComponent{constructor(...e){super(...e),L(this,"state",{isHovered:!1}),L(this,"hover",()=>this.setState({isHovered:!0})),L(this,"unhover",()=>this.setState({isHovered:!1})),L(this,"handlePinClick",({event:e})=>{const{save:t,unsave:n,saved:i}=this.props;e.preventDefault(),e.stopPropagation(),i?n():t()})}render(){const{children:e,boardName:t,saved:n}=this.props,{isHovered:i}=this.state;return Object(u.jsxs)(c.f,{position:"relative",children:[Object(u.jsx)(c.f,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:Object(u.jsx)(c.Z,{accessibilityLabel:r.a._("Save this Pin","jumpstartBoardPinWrapper.tapArea.accessibilityLabel","Accessibility label describing purpose of tap area"),fullHeight:!0,fullWidth:!0,onMouseEnter:this.hover,onMouseLeave:this.unhover,onTap:this.handlePinClick,children:(i||n)&&Object(u.jsx)(c.f,{position:"absolute",top:!0,paddingX:4,paddingY:4,width:A.e,dangerouslySetInlineStyle:F,children:n?Object(u.jsxs)(c.f,{display:"flex",justifyContent:"center",alignItems:"center",children:[Object(u.jsx)(c.f,{flex:"grow",children:Object(u.jsx)(R.a,{isNewlySaved:!0,url:null,name:t})}),Object(u.jsx)("div",{className:"jumpstart-undo-icon",children:Object(u.jsx)(c.w,{accessibilityLabel:r.a._("Undo","Undo saving a pin to a board","Undo saving a pin to a board"),bgColor:"transparentDarkGray",icon:"refresh",iconColor:"white",onClick:N})})]}):Object(u.jsx)(c.f,{display:"flex",justifyContent:"end",children:Object(u.jsx)(c.f,{children:Object(u.jsx)(M.b,{onClick:N,saved:n,variant:"lego"})})})})})}),Object(u.jsx)("div",{style:{pointerEvents:"none"},children:e})]})}}var H=n("5Ai/"),z=n("82UD"),q=n("U4JR");function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class W extends f.PureComponent{constructor(...e){super(...e),G(this,"scollRef",Object(f.createRef)()),G(this,"clickLogging",e=>{const{board:t}=this.props;Object(q.b)(101,{component:13380,element:10599,reason:e,board_id:t.id})}),G(this,"handleSave",()=>{this.clickLogging("save")}),G(this,"handleDelete",()=>{this.clickLogging("delete")}),G(this,"renderPin",({data:e,itemIdx:t})=>{const{board:n}=this.props;return Object(u.jsx)(H.a,{pin:e,target:{board:n},onSave:this.handleSave,onDelete:this.handleDelete,eventContext:{viewType:5,viewParameter:3173,element:10599},children:({save:i,unsave:o,saved:r})=>{var a;return Object(u.jsx)(U,{save:i,unsave:o,saved:r,boardName:null!==(a=n.name)&&void 0!==a?a:"",children:Object(u.jsx)(z.a,{attributionOption:"hide",blockClickEvents:!0,pin:e,pinId:e.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},surface:"JumpstartBoard",trackingParameters:{slotIndex:t,viewParameter:3173,viewType:5}})})}})})}render(){const{resource:e}=this.props;return Object(u.jsxs)(c.f,{maxHeight:600,maxWidth:V,overflow:"auto",ref:this.scollRef,padding:4,children:[e.isLoaded&&e.data&&Object(u.jsx)(c.D,{comp:this.renderPin,columnWidth:A.e,gutterWidth:24,items:e.data,scrollContainer:()=>this.scollRef.current,loadItems:e.fetchMore}),Object(u.jsx)(c.T,{accessibilityLabel:r.a._("Loading pins","Loading indicator","Loading indicator"),show:e.isFetching})]})}}function Y({board:e}){const t=Object(O.a)({name:"BoardContentRecommendationResource",options:{type:"board",id:e.id,__track__referrer:21}});return Object(u.jsx)(W,{board:e,resource:t})}var K=n("EC67");const V=1112;function X({board:e,onDismiss:t}){const n=Object(K.h)(),i=Object(K.i)(),o=()=>{const e={...i&&i.state||{}};e.newBoard&&(delete e.newBoard,n.replace({...i,state:e})),t()};return Object(u.jsx)(g.b,{accessibilityModalLabel:r.a._("add pins to empty board modal","accessibility label for modal","accessibility label for modal"),allowScroll:!0,heading:r.a._("Save some Pins to your new board","jumpstartBoardModal.heading","heading for modal to add Pins to an empty board"),onDismiss:o,size:V,footer:Object(u.jsx)(c.f,{display:"flex",justifyContent:"end",children:Object(u.jsx)(c.g,{color:"red",onClick:o,text:r.a._("Done","done adding pins to empty board","done adding pins to empty board"),accessibilityLabel:r.a._("Done","done adding pins to empty board","done adding pins to empty board"),inline:!0})}),children:Object(u.jsx)(Y,{board:e})})}var Z=n("9WJf"),Q=n("6A0I"),J=n("VqlB"),$=n("qyR9"),ee=n("ANjH"),te=n("0BOE");function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ie extends f.Component{constructor(...e){super(...e),ne(this,"getSections",e=>{const{board:t,boardsResource:{data:{all_boards:n}},canMoveToOtherBoards:i,sectionsResource:{data:o}}=this.props,a=n.filter(e=>e.id!==t.id);return e.length>=2?[o.length?{items:Object(te.a)([t],e),customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}}:{items:[]},{items:Object(te.a)(o,e,"title"),customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}},i?{items:Object(te.a)(a,e)}:{items:[]}]:[o.length?{title:r.a._("Current board","title in move pins flow","title in move pins flow"),items:[t,...o],customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}}:{items:[]},i?{title:r.a._("Other boards","heading text for a list of a user's other boards in the move pins flow","heading text for a list of a user's other boards in the move pins flow"),items:a}:{items:[]}]}),ne(this,"isDisabled",e=>e.id===this.props.selectedRowId)}render(){const{board:e,boardsResource:{error:t,isLoaded:n},boardSavedTo:i,onRowSelected:o,onSectionCreate:a,pinId:s,sectionsResource:{error:c,isLoaded:d},selectedRowId:l}=this.props;return Object(u.jsx)($.a,{boardSavedTo:i,createButtonLabel:r.a._("Add section","Button for creating a board section","Button for creating a board section"),disabledRowId:l,hasLoadError:!!t||!!c,isLoaded:n&&d,getSections:this.getSections,onCreate:a,onSelected:o,pinId:s},e.id)}}var oe=Object(ee.compose)(Object(O.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})}),Object(O.b)({name:"BoardPickerBoardsResource",key:"boardsResource",options:{field_set_key:"board_picker",onlyFetchBoards:!0}}))(ie);function re({board:e,boardSavedTo:t,onMove:n,onSectionedBoardSelect:i,onSectionCreate:o,selectedRowId:a,showOtherBoards:s}){const d=s&&!e.section_count?r.a._("Choose board"):r.a._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section");return Object(u.jsxs)(c.f,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:"absolute",rounding:2,width:330,dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[Object(u.jsx)(c.f,{paddingY:3,paddingX:3,children:Object(u.jsx)(c.u,{size:"sm",children:d})}),Object(u.jsx)(oe,{board:e,boardSavedTo:t,canMoveToOtherBoards:s,onRowSelected:t=>{if("board_section"===t.type){n(e,t)}else if("board"===t.type){const o=t;o&&o.id!==e.id&&(o.section_count||0)>0?i(o):n(o,null)}},onSectionCreate:o,selectedRowId:a})]})}var ae=n("8BbR"),se=n("WjpJ"),ce=n.n(se);function de({previewPin:e,extraPinCount:t,showFullImage:n}){if(!e)return Object(u.jsx)(ae.a,{height:214,pin:null,rounded:!0,width:142});const{description:i,images:o={},dominant_color:r}=e,a=o["474x"],s=Math.min(217*a.height/a.width,450),c=n?s:214,d=n?217:142;return Object(u.jsx)(ae.a,{additionalPinCount:t,height:c,pin:{description:i,dominantColor:r,imageUrl:a.url},rounded:!0,width:d})}function le({pins:e}){const t=e.length>0&&e.length<=2?e.length:4,n=ce()(0,t).map(n=>Object(u.jsx)("div",{style:{padding:3,display:"inline-block"},children:Object(u.jsx)(de,{previewPin:e[n],extraPinCount:3===n?Math.max(e.length-t,0):0,showFullImage:1===e.length})},n));return Object(u.jsx)(c.f,{display:0===e.length||e.length>2?"inlineBlock":"flex",alignItems:"center",justifyContent:"center",width:296,height:440,children:n})}var ue=n("6SCp"),he=n("B6Tf"),be=n("Wer7");function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class fe extends f.Component{constructor(e){var t;super(e),pe(this,"showSuccessToast",()=>{const{movedBoard:e,movedSection:t}=this.state,{board:n,inSelectAll:i,toastManagerContext:o}=this.props;if(i)o.showOneToast(({onHide:e})=>Object(u.jsx)(a.a,{duration:he.a,onHide:e,text:r.a._("Got it! Hang tight while we move all those Pins...","Toast message for bulk pins move.","Toast message for bulk pins move.")}));else if(e){var c;const i=t?Object(s.b)(r.a._("Moved to {{sectionName}} in {{boardName}}","Toast for successfully moving pins to a section within a board","Toast for successfully moving pins to a section within a board"),{sectionName:t.title,boardName:e.name}).join(""):Object(s.b)(r.a._("Moved to {{boardName}}","Toast for successfully moving pins to a different board","Toast for successfully moving pins to a different board"),{boardName:e.name}).join(""),d=t?`${null!==(c=e.url)&&void 0!==c?c:""}${t.slug}`:e.url;o.showOneToast(({onHide:e})=>{var t;return Object(u.jsx)(a.a,{duration:he.a,href:d,imageUrl:null!==(t=n.image_cover_url)&&void 0!==t?t:"",onHide:e,text:i})})}}),pe(this,"handleMove",(e,t)=>{const{board:n,boardSection:i,inSelectAll:o,onCompleteMove:r,movePins:a,selectedPinIds:s}=this.props,c={boardId:n.id,sectionId:i&&i.id||null},d={boardId:e.id,sectionId:t&&t.id||null};if(c.boardId===d.boardId&&c.sectionId===d.sectionId)return;const l=d.sectionId||d.boardId;this._setBoardSavedTo(l,he.b.LOADING),a({inverseSelection:o,selectedPinIds:s,source:c,target:d}).then(()=>{this._setBoardSavedTo(l,he.b.SUCCESS),this.setState({movedBoard:e,movedSection:t}),r()})}),pe(this,"handleSectionedBoardSelect",e=>{this.setState({initialBoardName:"",selectedBoard:e})}),pe(this,"handleSectionCreateComplete",e=>{const{onCompleteMove:t,toastManagerContext:n}=this.props;t();const i=Object(s.b)(r.a._("Moved to {{sectionName}} in {{boardName}}","moveSectionModal.handleSectionCreate.toast","Toast for successfully moving pins to a section within a board"),{sectionName:e.title,boardName:e.board.name});n.showOneToast(({onHide:t})=>{var n;return Object(u.jsx)(a.a,{duration:he.a,href:`${null!==(n=e.board.url)&&void 0!==n?n:""}${e.slug}`,imageUrl:" ",onHide:t,text:i.join("")})})}),pe(this,"handleShowCreate",e=>{this.setState({initialBoardName:e,showCreate:!0})}),pe(this,"handleHideCreate",()=>{const{onClearModal:e,sectionCount:t}=this.props;0===t?e():this.setState({initialBoardName:"",showCreate:!1})});const{board:n,viewer:i,showCreateOnly:o}=e;this.state={boardSavedTo:null,initialBoardName:"",movedBoard:null,movedSection:null,selectedBoard:e.board,showCreate:o||(null===(t=n.owner)||void 0===t?void 0:t.id)!==i.id&&0===n.section_count}}componentWillUnmount(){const{invalidateResource:e,viewer:t}=this.props,{movedBoard:n,movedSection:i}=this.state;n&&(i||e("BoardFeedResource",Object(ue.a)(n,t)),this.showSuccessToast())}_setBoardSavedTo(e,t){this.setState({boardSavedTo:{board:e,state:t}})}render(){const{board:e,boardSection:t,inSelectAll:n,onClearModal:i,selectedPinIds:o,selectedPins:a,shouldShowOtherBoards:s}=this.props,{boardSavedTo:d,initialBoardName:l,selectedBoard:h,showCreate:b}=this.state,p=n?330:660;return Object(u.jsx)(g.b,{accessibilityModalLabel:r.a._("Choose the section or board you want to move pins to","moveSectionModal.modal.accessibilityLabelForModal","Accessibility label for modal"),onDismiss:i,size:p,children:Object(u.jsxs)(c.f,{color:"white",display:"flex",height:540,rounding:2,width:p,children:[!n&&Object(u.jsx)(c.f,{dangerouslySetInlineStyle:{__style:{marginTop:60}},marginBottom:6,paddingX:2,children:Object(u.jsx)(le,{pins:a})}),b?Object(u.jsx)(Q.a,{board:h,completeCreateSectionAction:this.handleSectionCreateComplete,initialName:l,onClearModal:this.handleHideCreate,pinImport:{all:n,pinIds:o},showTitle:!0}):Object(u.jsx)(re,{board:h,boardSavedTo:d,onMove:this.handleMove,onSectionCreate:this.handleShowCreate,onSectionedBoardSelect:this.handleSectionedBoardSelect,selectedRowId:t&&t.id||e&&e.id,showOtherBoards:s})]})})}}var ge=Object(ee.compose)(Object(i.connect)((e,t)=>{var n;return{selectedPins:t.selectedPinIds.reduce((t,n)=>{const i=e.pins[n];return i?t.concat([i]):t},[]),shouldShowOtherBoards:Object(Z.a)({action:2,board:t.board})||!t.selectedPinIds.some(t=>{const{pins:n,viewer:i}=e,o=i,r=n[t];return r&&r.pinner&&r.pinner.id&&r.pinner.id!==o.id}),sectionCount:null!==(n=(e.boards.content[t.board.id]||{}).section_count)&&void 0!==n?n:0,viewer:e.viewer}},(e,t)=>({invalidateResource:Object(ee.bindActionCreators)(be.f,e),movePins:Object(ee.bindActionCreators)(J.a,e)})),d.c)(fe),me=n("A6Hx"),je=n("t9Ac"),ve=n("Pv/+"),Oe=n("zpPL");function xe(e){const{viewer:t}=Oe.a.instance&&Oe.a.instance.getState()||{};return(null==t?void 0:t.isAuth)&&(e||{}).id===t.id}var ye=n("1inl"),_e=n("4TDQ"),we=n("NXrh");function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Se extends f.Component{constructor(...e){super(...e),Ce(this,"state",{section:null}),Ce(this,"handleSectionChange",e=>{this.setState({section:e})}),Ce(this,"handleSubmit",()=>{const{onSubmit:e}=this.props,{section:t}=this.state;t&&e(t)})}render(){const{board:e,boardSection:t,onCancel:n}=this.props,{section:i}=this.state;return Object(u.jsx)(g.b,{size:"md",accessibilityModalLabel:r.a._("Move Pins","BoardPage.ModalContents.SectionMergeModal","accessibility label for merging modal"),onDismiss:()=>{n()},heading:i?r.a._("Move Pins and delete section?","title for board section merging modal","title for board section merging modal"):r.a._("Move all Pins to...","title for board section merging modal","title for board section merging modal"),footer:Object(u.jsx)(c.f,{display:"flex",justifyContent:"end",children:Object(u.jsxs)(c.h,{children:[Object(u.jsx)(c.g,{inline:!0,onClick:n,text:r.a._("Cancel"),size:"lg"}),Object(u.jsx)(c.g,{color:"red",disabled:!i,inline:!0,onClick:this.handleSubmit,text:r.a._("Move Pins and delete section","button for merging a board section","button for merging a board section"),size:"lg"})]})}),children:Object(u.jsx)(c.f,{padding:8,minHeight:400,children:Object(u.jsx)(we.b,{board:e,mergingFromSectionId:t.id,onSectionChange:this.handleSectionChange,selectedSectionId:i?i.id:null})})})}}var Ie=n("uVIr"),Te=n("MhBu"),Ee=n("eOdZ"),Pe=n("KFEb"),De=n("Sihc");function Be(e,t,n){return i=>Ee.a.create("BoardSectionEditResource",{section_id:t,title:n}).callCreate({showError:!1}).then(t=>{const n=t.resource_response.data;return i(function(e,t){return n=>{const i=t.board;i&&i.id!==e?(n(Object(ve.b)(e,t.id)),n(Object(Te.a)({feedId:e,feedType:Pe.a.BOARD_SECTIONS,itemIds:[t.id],itemType:"board_section"})),n(Object(l.c)(e,"pin_count")),n(Object(De.b)(i.id,t)),n(Object(Ie.a)({feedId:i.id,feedType:Pe.a.BOARD_SECTIONS,itemIds:[t.id],itemType:"board_section"})),n(Object(l.c)(e,"pin_count"))):n({type:"SECTION_UPDATED",payload:{boardId:e,section:t}})}}(e,n)),i(Object(be.f)("BoardSectionsRepinResource",{board_id:e})),n})}var ke=n("vVEi");function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Re extends f.Component{constructor(...e){super(...e),Me(this,"state",{deleting:!1,editMode:"main",title:this.props.boardSection.title}),Me(this,"handleSaveSection",e=>{if(e.preventDefault(),this.saveDisabled())return;const{board:t,boardSection:n,dispatch:i,onSaveSection:o}=this.props,{title:a}=this.state;i(Be(t.id,n.id,a.trim())).then(o).catch(e=>this.setState({titleErrorMessage:e.message||r.a._("Invalid section name","error message of section name input field","error message of section name input field")}))}),Me(this,"saveDisabled",()=>this.state.title===this.props.boardSection.title||""===this.state.title.trim()),Me(this,"handleChangeTitle",({value:e})=>{this.setState({title:e,titleErrorMessage:void 0})}),Me(this,"handleDeleteSectionButtonClick",()=>{this.setState({editMode:"confirmDelete"})}),Me(this,"handleMergeButtonClick",()=>{this.setState({editMode:"merge"})}),Me(this,"handleBackToMainMenu",()=>{this.setState({editMode:"main"})}),Me(this,"handleDeleteSection",()=>{const{board:e,boardSection:t,dispatch:n,onDeleteSection:i,toastManagerContext:o}=this.props;if(this.state.deleting)return;const{id:s}=t;this.setState({deleting:!0}),n(Object(ve.a)(e.id,s)).then(()=>{i(),o.showToast(({onHide:e})=>Object(u.jsx)(a.a,{onHide:e,text:r.a._("Section deleted!","Toast for successfully deleting a board section","Toast for successfully deleting a board section")}))}).catch(e=>ye.a.showError(e.message||r.a._("Failed to delete the section","error message for failed to delete section","error message for failed to delete section")))}),Me(this,"handleMergeSection",e=>{var t;const{board:n,boardSection:i,dispatch:o,showBlockingActionToast:a,onDeleteSection:s}=this.props;this.state.deleting||(this.setState({deleting:!0}),Object(q.b)(7173,{objectId:i.id,merge_flow:"menu"}),o(Object(_e.a)(n.id,i.id,null!==(t=e.id)&&void 0!==t?t:"")).then(s).then(()=>{a({actionType:"merge",board:n,section:e})}).catch(e=>ye.a.showError(e.message||r.a._("Failed to merge the section","error message for failed to merge section","error message for failed to merge section"))))})}componentDidMount(){window.requestAnimationFrame(()=>{const e=this._textField;e&&(e.focus(),e.select())})}render(){const{board:e,boardSection:t,onClearModal:n}=this.props,{title:i,titleErrorMessage:a,editMode:s}=this.state,d=xe(t.user)||Object(Z.a)({action:10,board:e}),l=e.section_count>1&&(xe(t.user)||Object(Z.a)({action:13,board:e}));return"confirmDelete"===s?Object(u.jsx)(o.a,{confirmButtonLabel:r.a._("Delete section","button for deleting a board section","button for deleting a board section"),onCancel:this.handleBackToMainMenu,onConfirm:this.handleDeleteSection,message:r.a._("Once you delete a section and all its Pins, you can't undo it!")}):"merge"===s?Object(u.jsx)(Se,{board:e,boardSection:t,onCancel:this.handleBackToMainMenu,onSubmit:this.handleMergeSection}):Object(u.jsx)(g.b,{accessibilityModalLabel:r.a._("Edit your section"),size:"md",onDismiss:n,heading:r.a._("Edit your section"),footer:Object(u.jsxs)(c.f,{justifyContent:"between",display:"flex",children:[Object(u.jsx)(c.m,{span:6,children:(d||l)&&Object(u.jsxs)(c.f,{display:"flex",marginStart:-1,marginEnd:-1,children:[d&&Object(u.jsx)(c.f,{paddingX:1,children:Object(u.jsx)(c.g,{onClick:this.handleDeleteSectionButtonClick,inline:!0,text:r.a._("Delete","Delete button","Delete button")})}),l&&Object(u.jsx)(c.f,{paddingX:1,children:Object(u.jsx)(c.g,{inline:!0,onClick:this.handleMergeButtonClick,text:r.a._("Merge","button for merging a board section","button for merging a board section")})})]})}),Object(u.jsx)(c.m,{span:6,children:Object(u.jsxs)(c.f,{display:"flex",justifyContent:"end",children:[Object(u.jsx)(c.f,{marginEnd:3,children:Object(u.jsx)(c.g,{text:r.a._("Cancel"),onClick:n,inline:!0})}),Object(u.jsx)(c.g,{type:"submit",color:"red",text:r.a._("Save"),inline:!0,disabled:this.saveDisabled(),onClick:({event:e})=>{this.handleSaveSection(e)}})]})})]}),children:Object(u.jsx)("form",{onSubmit:this.handleSaveSection,children:Object(u.jsx)(c.f,{display:"flex",direction:"column",padding:8,children:Object(u.jsx)(c.cb,{errorMessage:a,id:"title",label:r.a._("Name"),onChange:this.handleChangeTitle,ref:e=>{this._textField=e},size:"lg",value:i})})})})}}var Ae=Object(ee.compose)(Object(i.connect)(),ke.d,d.c)(Re);function Le({source:e,target:t,onConfirm:n,onCancel:i}){return Object(u.jsx)(g.b,{accessibilityModalLabel:r.a._("Move Pins and delete section?","title for board section merging confirmation","title for board section merging confirmation"),heading:r.a._("Move Pins and delete section?","title for board section merging confirmation","title for board section merging confirmation"),onDismiss:i,footer:Object(u.jsx)(c.f,{display:"flex",justifyContent:"end",children:Object(u.jsxs)(c.h,{children:[Object(u.jsx)(c.g,{inline:!0,onClick:i,text:r.a._("Cancel")}),Object(u.jsx)(c.g,{color:"red",inline:!0,onClick:n,text:r.a._("Move Pins and delete section","button for merging a board section","button for merging a board section")})]})}),children:Object(u.jsx)(c.f,{padding:8,children:Object(u.jsx)(c.ab,{children:Object(s.b)(r.a._("You're about to move all Pins from your {{ sourceName }} section to your {{ targetName }} section.","helper text for section merge confirmation modal","helper text for section merge confirmation modal"),{sourceName:Object(u.jsx)(c.ab,{inline:!0,weight:"bold",children:e.title},"source"),targetName:Object(u.jsx)(c.ab,{inline:!0,weight:"bold",children:t.title},"target")})})})})}var Ne=n("pC0d"),Fe=n("juW8");function Ue({actions:e,board:t,boardSection:n,bulkEditSelectedPins:i,currentModal:o,groupPinsData:r,inSelectAll:a,onClearModal:s,mergeConfirmationModalProps:c}){var d,l;const{completeCreateSectionAction:f,completeMoveAction:g,onBoardArchiveChange:m,onBoardDelete:j,onBoardLeave:v,onBoardSectionDelete:O,onBoardSectionSave:_,onCollaboratorInviteClick:w,onConfirmMergeSection:C,onCopyPinsToBoard:S,onDeletePins:I,onBoardMerge:T}=e;switch(o){case Fe.a.boardArchiveConfirmation:return m?Object(u.jsx)(h,{shouldArchive:!0,board:t,onClose:s,onConfirm:m}):null;case Fe.a.boardUnarchiveConfirmation:return m?Object(u.jsx)(h,{shouldArchive:!1,board:t,onClose:s,onConfirm:m}):null;case Fe.a.boardEdit:return Object(u.jsx)(p.a,{boardId:t.id,onBoardArchiveChange:m,onBoardDelete:j,onBoardLeave:v,onClose:s,onCollaboratorInviteClick:w});case Fe.a.bulkDelete:return I?Object(u.jsx)(P,{pinCountToDelete:i&&i.length||0,onCompleteBulkDelete:I,onClearModal:s}):null;case Fe.a.bulkCopy:return S?Object(u.jsx)(k,{currentBoardId:t.id,onCopyToBoard:S,onClearModal:s,pinCountToCopy:i&&i.length||0}):null;case Fe.a.collaboratorsAndPermissions:return Object(u.jsx)(b.a,{board:t,onDismiss:s});case Fe.a.editSection:return n?Object(u.jsx)(Ae,{board:t,boardSection:n,onClearModal:s,onDeleteSection:O,onSaveSection:_}):null;case Fe.a.mergeBoard:return T?Object(u.jsx)(y.a,{onCancel:s,onSubmit:T,sourceBoardId:t.id}):null;case Fe.a.createSection:case Fe.a.moveSection:return!!i&&!!g&&Object(u.jsx)(ge,{board:t,boardSection:n,inSelectAll:a,selectedPinIds:i,showCreateOnly:o===Fe.a.createSection,onClearModal:s,onCompleteMove:g});case Fe.a.sectionMergeConfirm:return c&&C?Object(u.jsx)(Le,{onCancel:s,onConfirm:C,source:c.source,target:c.target}):null;case Fe.a.followers:return Object(u.jsx)(x,{boardId:t.id,onDismiss:s,followersCount:null!==(d=t.follower_count)&&void 0!==d?d:0});case Fe.a.pincode:return Object(u.jsx)(me.a,{onHide:s,objectId:t.id,children:Object(u.jsx)(E,{boardId:t.id,customizable:!(null===(l=t.owner)||void 0===l||!l.is_partner)})});case Fe.a.jumpstartBoard:return Object(u.jsx)(X,{board:t,onDismiss:s});case Fe.a.simpleCreateSection:return f?Object(u.jsx)(je.a,{selectedBoard:t,onClose:s,onSectionCreate:f}):null;case Fe.a.groupPins:return Object(u.jsx)(Ne.a,{boardId:t.id,clusterId:null==r?void 0:r.clusterId,suggestedSectionTitle:(null==r?void 0:r.suggestedSectionName)||"",onDismiss:s});default:return null}}},fOPN:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_SOURCE="dnd-core/ADD_SOURCE",t.ADD_TARGET="dnd-core/ADD_TARGET",t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",t.REMOVE_TARGET="dnd-core/REMOVE_TARGET",t.addSource=function(e){return{type:t.ADD_SOURCE,payload:{sourceId:e}}},t.addTarget=function(e){return{type:t.ADD_TARGET,payload:{targetId:e}}},t.removeSource=function(e){return{type:t.REMOVE_SOURCE,payload:{sourceId:e}}},t.removeTarget=function(e){return{type:t.REMOVE_TARGET,payload:{targetId:e}}}},fc1g:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));const i=e=>({type:"MOST_RECENT_PIN",payload:{id:e}}),o=e=>({type:"MOST_RECENT_PIN_IMAGE",payload:{image_signature:e}})},fevN:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("q1tI"),o=n("Ye/N"),r=n("rYoy"),a=n("n6mq"),s=n("nKUr");const c=Object(i.lazy)(()=>n.e("SendObjectWrapperCommon").then(n.bind(null,"geGc")));function d(e){return Object(s.jsx)(r.a,{fallback:Object(s.jsx)(a.f,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:2,children:Object(s.jsx)(a.T,{accessibilityLabel:o.a._("Loading sharing","Accessibility label for loading sharing UI","Accessibility label for loading sharing UI"),show:!0})}),children:Object(s.jsx)(c,{...e})})}},fhMV:function(e,t,n){n.d(t,"a",(function(){return P}));var i=n("q1tI"),o=n("Ye/N"),r=n("dH2W"),a=n("nKUr");const s="M0 111c0 47 29.3 87.2 70.6 103.4-1-8.8-2-22.3.3-32l13-55s-3.4-6.7-3.4-16.5c0-15.6 9-27 20-27 9.6 0 14.2 7 14.2 15.5 0 9.6-6 23.8-9.2 37-2.7 11 5.5 20 16.4 20 19.7 0 35-20.7 35-50.8 0-26.5-19.2-45-46.5-45-31.5 0-50 23.6-50 48 0 9.6 3.6 19.8 8.2 25.4 1 1.2 1 2 .7 3.3l-3 12.5c-.5 2-1.6 2.5-3.8 1.5-13.8-6.4-22.5-26.7-22.5-43 0-35 25.6-67 73.5-67 38.5 0 68.4 27.3 68.4 64 0 38.2-24.2 69-57.7 69-11.3 0-21.8-5.8-25.4-12.7L92 188c-2.6 9.6-9.3 21.7-14 29 10.5 3.3 21.6 5 33 5 61.3 0 111-49.7 111-111S172.3 0 111 0 0 49.7 0 111z",c="#e60023",d="0 0 222 222";function l({size:e}){return Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:d,children:Object(a.jsx)("path",{d:s,fill:c,fillRule:"evenodd"})})}var u=n("n6mq");function h({getThumbnailImageSrcSet:e,images:t,onTouch:n}){return Object(a.jsx)(u.f,{display:"flex",justifyContent:"start",maxHeight:328,overflow:"auto",padding:1,wrap:!0,children:["logo"].concat(t).map((t,i)=>Object(a.jsx)(u.f,{padding:1,children:Object(a.jsx)(u.j,{children:Object(a.jsx)(u.Z,{fullWidth:!1,onTap:()=>n("logo"===t?"logo":i-1),rounding:2,children:Object(a.jsx)(u.C,{rounding:"circle",width:85,height:85,children:"logo"===t?Object(a.jsx)(l,{size:85}):Object(a.jsx)(u.x,{alt:o.a._("Pincode Hero Image","accessibility label for the Pincode hero image","accessibility label for the Pincode hero image"),color:t.dominant_color||"#b5b5b5",fit:"cover",naturalHeight:t.height,naturalWidth:t.width,src:t.url,srcSet:e&&e(t.url)})})})})},"logo"===t?t:t.url))})}var b=n("w70y");const p="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`\n  <svg xmlns="http://www.w3.org/2000/svg" width="${f||222}" height="${f||222}" x="${g||0}" y="${g||0}" viewBox="0 0 222 222">\n    <path d="${s}" fill="#e60023" fill-rule="evenodd" />\n  </svg>`.trim());var f,g;const m=600;function j(e,t,n){return`\n    <image id="image"\n      x="${100+("right"===t?300:0)}"\n      y="${100+("bottom"===n?300:0)}"\n      width="${m/("row"===t?1:2)}"\n      height="${m/("column"===n?1:2)}"\n      xmlns:xlink="http://www.w3.org/1999/xlink"\n      xlink:href="${e}"\n      preserveAspectRatio="xMidYMid slice"\n    />`}function v(e,t){const n=function(e){switch(e.length){case 0:case 1:return;case 2:return[j(e[0],"left","column"),j(e[1],"right","column")].join("");case 3:return[j(e[0],"left","column"),j(e[1],"right","top"),j(e[2],"right","bottom")].join("");default:return[j(e[0],"left","top"),j(e[1],"right","top"),j(e[2],"left","bottom"),j(e[3],"right","bottom")].join("")}}(t);return n?e.replace(/<image[^>]*>/,n):e}class O extends i.Component{constructor(...e){var t,n,i;super(...e),i=()=>{const{pincodeImageResource:e,onFetchingChange:t}=this.props;t(e.isFetching)},(n="handleFetchChange")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{pincodeImageResource:e}=this.props;e.isFetching||this.handleFetchChange()}componentDidUpdate(e){this.props.pincodeImageResource.isFetching!==e.pincodeImageResource.isFetching&&this.handleFetchChange()}render(){const{className:e,imageUrls:t,size:n,pincodeImageResource:{data:i,isLoaded:r}}=this.props,s=n,c=n;return Object(a.jsxs)(u.f,{display:"flex",justifyContent:"center",alignItems:"center",width:s,height:c,children:[r&&!!i&&Object(a.jsx)("div",{className:e,dangerouslySetInnerHTML:{__html:v(i,t)},style:{width:s,height:c}}),Object(a.jsx)(u.T,{accessibilityLabel:o.a._("Loading Pincode Image","accessibility label for loading the Pincode image","accessibility label for loading the Pincode image"),show:!i})]})}}var x=Object(b.b)({name:"PincodeImageResource",key:"pincodeImageResource",options:({id:e,imageUrls:t})=>({object_id:e,hero_image_url:t[0]||p})})(O),y=n("U4JR");function _(e){return new Promise((t,n)=>{const i=new XMLHttpRequest;i.ontimeout=n,i.onreadystatechange=()=>{if(4!==i.readyState)return;if(200!==i.status)return void n();const e=new FileReader;e.onloadend=()=>{const i=e.result;"string"==typeof i?t(i.split(/,/)[1]):n()},e.readAsDataURL(i.response)},i.open("GET",e,!0),i.timeout=3e4,i.responseType="blob",i.send()})}function w(e,t){if(!(e instanceof Element))return Promise.resolve(e);if(e instanceof window.SVGImageElement)return function(e,t){const n=e.href.baseVal;if(n.startsWith("data:"))return Promise.resolve();const i=t?t(n):n;return Promise.resolve(i).then(_).then(e=>`data:${function(e){const t=e.match(/\.([^\.\/]*?)$/);switch(t&&t[1]){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}}(i)};base64,${e}`).then(t=>new Promise((n,i)=>{e.onerror=i,e.href.baseVal=t,window.requestAnimationFrame(n)}))}(e,t);const n=Array.from(e.childNodes);return Promise.all(n.map(e=>w(e,t)))}function C(e,t){return new Promise((n,i)=>{const o=document.createElement("div");o.innerHTML=e.innerHTML,w(o,t).then(()=>{const t=new Image;t.onload=()=>{window.requestAnimationFrame(()=>n(t))},t.onerror=i;const r=o&&o.querySelector("svg");r&&(/^[0-9]+$/.test(r.getAttribute("width")||"")||r.setAttribute("width",""+e.scrollWidth),/^[0-9]+$/.test(r.getAttribute("height")||"")||r.setAttribute("height",""+e.scrollHeight));const a=o.innerHTML.replace(/(xmlns="[^"]+"[^>]*)\ xmlns="[^"]+"/,"$1");t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a.trim())})})}function S(e,t){return new Promise((n,i)=>{(function(e){return new Promise((t,n)=>{if(e.toBlob)return void e.toBlob(t);let i="";try{i=e.toDataURL("image/png")}catch(s){n()}const o=window.atob(i.split(",")[1]),r=o.length,a=new Uint8Array(r);for(let e=0;e<r;e+=1)a[e]=o.charCodeAt(e);t(new window.Blob([a],{type:"image/png"}))})})(e).then(e=>window.URL.createObjectURL(e)).then(e=>{const i=document.createElement("a");i.download=t,i.href=e,i.style.display="none",window.document.body.appendChild(i),window.requestAnimationFrame(()=>{const t=()=>{window.requestAnimationFrame(()=>{window.URL.revokeObjectURL(e),i.removeAttribute("href"),i.removeEventListener("click",t),window.document.body.removeChild(i),n()})};i.addEventListener("click",t),i.click()})}).catch(i)})}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T="pincodeMain",E="pincodeCTA";class P extends i.PureComponent{constructor(...e){super(...e),I(this,"state",{ctaIsLoaded:!1,errorFlyoutIsOpen:!1,isDownloading:!1,isFetchingPincodeImage:!1,isPickingHeroImage:!1,pickedImageIndex:0}),I(this,"getCustomHeroImages",()=>{const{images:e,customizable:t}=this.props,{pickedImageIndex:n}=this.state;if(!t)return e;const i="logo"!==n&&e[n];return i?[i]:[]}),I(this,"normalizeUrl",e=>{const{getMainImageURL:t}=this.props;return(e=>e.replace(/^https:\/\/[^\/]{2,}\.pinimg.com\//,"https://i.pinimg.com/"))((t||(e=>e))(e))}),I(this,"handleFetchChange",e=>{this.setState({isFetchingPincodeImage:e})}),I(this,"handleCancelButtonClick",()=>this.setState({isPickingHeroImage:!1})),I(this,"handleEditButtonClick",()=>this.setState({isPickingHeroImage:!0})),I(this,"handleSelectImage",e=>this.setState({isPickingHeroImage:!1,pickedImageIndex:e})),I(this,"downloadPincodeImage",()=>{const e=this.previewNode,{ctaIsLoaded:t,isFetchingPincodeImage:n,isDownloading:i}=this.state;if(!e||!t||n||i)return;const o=e.querySelector(".pincodeMain"),r=e.querySelector(".pincodeCTA");if(!o||!r)return;const{getDownloadImageURL:a,id:s}=this.props;Object(y.b)(7078,{component:13141,objectId:s}),this.setState({isDownloading:!0}),Promise.all([C(o,a),C(r)]).then(e=>{const[t,n]=e;return((e,t)=>{const n=document.createElement("canvas");n.width=3544,n.height=3544;const i=Math.round(.1*n.width),o=Math.round(.05*n.width),r=n.width-2*i,a=n.width-2*o,s=n.height-r,[c,d]=t.width/t.height>a/s?[a,a/t.width*t.height]:[s/t.height*t.width,s],l=n.getContext("2d");return l.fillStyle="#fff",l.fillRect(0,0,n.width,n.height),l.drawImage(e,i,0,r,r),l.drawImage(t,(n.width-c)/2,r+(n.height-r-d)/2,c,d),n})(t,n)}).then(e=>S(e,`pincode_${this.props.id}.png`)).then(()=>{this.setState({isDownloading:!1})}).catch(()=>{this.setState({errorFlyoutIsOpen:!0})})})}render(){const{id:e,isLoadingImages:t,images:n,getThumbnailImageSrcSet:i,customizable:s}=this.props,{ctaIsLoaded:c,errorFlyoutIsOpen:d,isFetchingPincodeImage:l,isDownloading:b,isPickingHeroImage:p}=this.state;return p?Object(a.jsx)(u.f,{width:350,color:"white",rounding:2,padding:4,children:Object(a.jsxs)(u.f,{children:[Object(a.jsx)(u.f,{paddingY:1,children:Object(a.jsx)(u.u,{size:"md",truncate:!0,children:o.a._("Change Image","Title of the Pincode hero image picker modal","Title of the Pincode hero image picker modal")})}),Object(a.jsx)(u.p,{}),Object(a.jsx)(h,{images:n,getThumbnailImageSrcSet:i,onTouch:this.handleSelectImage}),Object(a.jsx)(u.f,{padding:1,children:Object(a.jsx)(u.g,{text:o.a._("Cancel","Button to dismiss Pincode hero image picker","Button to dismiss Pincode hero image picker"),onClick:this.handleCancelButtonClick})})]})}):Object(a.jsx)(u.f,{width:350,color:"white",rounding:2,marginBottom:4,paddingX:4,children:Object(a.jsxs)(u.f,{children:[Object(a.jsx)(u.f,{ref:e=>{this.previewNode=e},children:Object(a.jsxs)(u.f,{color:"white",display:"flex",direction:"column",alignItems:"center",justifyContent:"center",width:"100%",height:320,children:[t?Object(a.jsx)(u.f,{width:"100%",height:230,display:"flex",justifyContent:"center",alignItems:"center",children:Object(a.jsx)(u.T,{accessibilityLabel:o.a._("Loading","accessibility label for loading spinner","accessibility label for loading spinner"),show:!0})}):Object(a.jsx)(x,{className:T,id:e,imageUrls:this.getCustomHeroImages().map(e=>this.normalizeUrl(e.url)),onFetchingChange:this.handleFetchChange,size:230}),Object(a.jsx)(u.f,{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:7,marginTop:2,children:Object(a.jsx)("div",{className:E,children:Object(a.jsx)(r.default,{onCtaDidLoad:()=>this.setState({ctaIsLoaded:!0}),width:300,height:78})})})]})}),Object(a.jsxs)(u.f,{marginTop:2,padding:1,children:[s&&n.length>0&&Object(a.jsx)(u.f,{paddingY:1,children:Object(a.jsx)(u.g,{text:o.a._("Change Image","Button to pick Pincode hero image","Button to pick Pincode hero image"),onClick:this.handleEditButtonClick})}),Object(a.jsxs)(u.f,{paddingY:1,children:[Object(a.jsx)(u.f,{ref:e=>{this.downloadButton=e},children:Object(a.jsx)(u.g,{text:o.a._("Download Pincode","Button to download the Pincode image","Button to download the Pincode image"),color:"red",onClick:this.downloadPincodeImage,disabled:t||!c||l||b})}),d&&Object(a.jsx)(u.J,{anchor:this.downloadButton,color:"red",idealDirection:"down",onDismiss:()=>this.setState({errorFlyoutIsOpen:!1}),size:"sm",shouldFocus:!1,children:Object(a.jsx)(u.f,{padding:3,children:Object(a.jsx)(u.ab,{color:"white",weight:"bold",children:Object(a.jsx)("span",{children:o.a._("Oops! Your browser does not support downloading Pincodes.","Error message shown when user attempts to download Pincode on a browser not supported","Error message shown when user attempts to download Pincode on a browser not supported")})})})})]})]})]})})}}},fpRd:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("q1tI").memo((function(e){var t=e.connect,n=e.src;if("undefined"!=typeof Image){var i=new Image;i.src=n,i.onload=function(){return t(i)}}return null}));i.displayName="DragPreviewImage",t.default=i},"g/XF":function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("JW66"),o=n("zwad"),r=n("n6mq"),a=n("nKUr");function s({url:e,description:t,color:n}){return n=n||i.a.DEFAULT_IMAGELESS_PIN_COLOR,Object(a.jsx)(r.f,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:n}},children:Object(a.jsxs)(r.f,{maxHeight:200,padding:4,overflow:"hidden",children:[e&&Object(a.jsx)(r.f,{marginBottom:2,children:Object(a.jsx)(r.ab,{color:"white",size:"sm",children:o.a.parse(e).hostname||e})}),Object(a.jsx)(r.f,{maxHeight:144,children:Object(a.jsx)(r.ab,{color:"white",overflow:"normal",weight:"bold",children:t})})]})})}},gONw:function(e,t,n){var i=n("q1tI"),o=n("n6mq"),r=n("nKUr");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),a(this,"state",{isHovering:!1}),a(this,"onHover",()=>{this.setState({isHovering:!0})}),a(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const{name:e,selected:t,image:n,inFlyoutExp:i}=this.props;return i?Object(r.jsxs)(o.f,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover,children:[Object(r.jsx)(o.f,{children:Object(r.jsx)(o.C,{height:40,width:40,rounding:2,children:this.state.isHovering&&n?Object(r.jsx)(o.x,{alt:"",color:"",fit:"cover",naturalHeight:n.height,naturalWidth:n.width,src:n.url}):Object(r.jsx)(o.f,{color:"lightGray",height:40,width:40})})}),Object(r.jsx)(o.f,{padding:2,children:Object(r.jsx)(o.u,{size:"sm",children:e})})]}):Object(r.jsxs)(o.f,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[Object(r.jsx)(o.f,{children:Object(r.jsx)(o.v,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})}),Object(r.jsx)(o.f,{marginStart:3,children:Object(r.jsx)(o.ab,{color:t?"darkGray":"gray",weight:"bold",children:e})})]})}}var c=n("Ye/N"),d=n("w70y"),l=n("U4JR"),u=n("seP0");t.a=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:n,image:a,minHeight:h,onBoardSelected:b})=>{const[p,f]=Object(i.useState)(-1),g=Object(u.c)(),{data:m=[],error:j,isLoaded:v}=Object(d.a)({name:"BoardTitleSuggestionsResource",options:{pin_id:n}}),O=(x=m,Object(i.useMemo)(()=>x&&x.length?x.map(e=>e.title):[],[x]));var x;Object(i.useEffect)(()=>{v&&t&&g&&(j?g.error():g.stop())},[v]);const y=()=>{f(-1)},_=(t,n)=>{const i=p===n;return Object(r.jsx)("li",{children:Object(r.jsx)(o.Z,{onMouseEnter:()=>(e=>{f(e)})(n),onMouseLeave:y,onTap:()=>(e=>{b(O[e],!1),Object(l.b)(101,{component:13025,element:23})})(n),children:Object(r.jsx)(s,{selected:i,name:t,inFlyoutExp:e,image:a})})},n)};return v?O&&O.length?e?Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:O.map(_)})}):t?Object(r.jsxs)(o.f,{children:[Object(r.jsx)(o.f,{marginTop:5,marginStart:6,marginBottom:3,children:Object(r.jsx)(o.ab,{children:c.a._("Suggested board names","text above suggested board names list","text above suggested board names list")})}),Object(r.jsx)("ul",{children:O.map(_)})]}):Object(r.jsxs)(o.f,{children:[Object(r.jsx)(o.f,{marginTop:2,paddingX:5,children:Object(r.jsx)(o.ab,{children:c.a._("Suggested board names")})}),Object(r.jsx)("ul",{children:O.map(_)})]}):null:Object(r.jsx)(o.f,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:h||"",children:Object(r.jsx)(o.T,{accessibilityLabel:c.a._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0})})}},gdcG:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("2WXK"),o=n("nKUr");function r(e){return function(t){const{isHovering:n,hoverHandlers:r}=Object(i.a)();return Object(o.jsx)(e,{...t,hoverHandlers:r,isHovering:n})}}},gqRH:function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("zwad"),r=n("fJfT"),a=n("EC67");function s(e){const{externalData:t,href:n,onHistoryChange:s,target:c}=e,[d,l]=Object(i.useState)(null),[u,h]=Object(i.useState)(!1),b=Object(a.h)(),p=Object(a.i)(),f=o.a.isOffsiteUrl(n);return Object(i.useEffect)(()=>(h(!0),()=>{h(!1)}),[]),Object(i.useEffect)(()=>{f&&null!=t&&t.pin&&null===d&&Object(r.f)({location:p,pin:t.pin,surface:t.surface})&&Object(r.a)({isMounted:u,pin:t.pin,location:p,spamCheckCallback:e=>l(e),href:n})},[t,n,f,u,p,d]),({event:e})=>{var i;Object(r.b)({isExternalLink:f,event:e})||(e.nativeEvent.preventDefault(),n&&(f?Object(r.c)({auxData:null==t?void 0:t.auxData,href:n,pinId:null==t||null===(i=t.pin)||void 0===i?void 0:i.id,pin:null==t?void 0:t.pin,location:p,spamCheck:d}):Object(r.d)({event:e,href:n,history:b,onHistoryChange:s,target:"blank"===c?"blank":null})))}}const c=({children:e,...t})=>e({handleClick:s(t)})},hUD8:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("bVT4"),o=function(){function e(e){this.entered=[],this.isNodeInDocument=e}return e.prototype.enter=function(e){var t=this,n=this.entered.length;return this.entered=i.union(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0},e.prototype.leave=function(e){var t=this.entered.length;return this.entered=i.without(this.entered.filter(this.isNodeInDocument),e),t>0&&0===this.entered.length},e.prototype.reset=function(){this.entered=[]},e}();t.default=o},hZxF:function(e,t,n){var i=n("q1tI");t.a=e=>{Object(i.useEffect)(e,[])}},hlDC:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n("1dBE");const{Provider:o,Consumer:r,useHook:a}=Object(i.c)("ExperimentContext")},"i/p3":function(e,t,n){var i=n("/MKj"),o=n("Ye/N"),r=n("qD10"),a=n("8BbR"),s=n("WjpJ"),c=n.n(s),d=n("ANjH"),l=n("U4JR"),u=n("gdcG"),h=n("n6mq"),b=n("nKUr");function p({pin:e}){var t,n,i,o,r;return Object(b.jsx)(h.C,{rounding:4,width:138,children:Object(b.jsx)(a.a,{height:207,pin:e&&{imageUrl:null!==(t=null===(n=e.images)||void 0===n||null===(i=n["474x"])||void 0===i?void 0:i.url)&&void 0!==t?t:"",dominantColor:null!==(o=e.dominant_color)&&void 0!==o?o:"",description:null!==(r=e.description)&&void 0!==r?r:""},width:138})})}t.a=Object(d.compose)(Object(i.connect)((e,t)=>{const n=e.stories[t.storyId];return n&&"board_ideas_preview_detailed"===n.story_type?{story:n}:{story:void 0}}),u.a)((function({collection:e,hoverHandlers:t,isHovering:n,story:i,url:a}){if(!i)return null;const s=i.objects.reduce((e,t)=>e.concat("pin"===t.type?[t]:[]),[]);return Object(b.jsx)("div",{className:"moreIdeasOnBoard",children:Object(b.jsx)(r.a,{to:`${a}?ideas_referrer=${i.referring_source}`,onClick:()=>Object(l.b)(101,{element:10600,view:"board_section"===e.type?164:5,objectId:e.id,viewParameter:3069}),children:Object(b.jsx)(h.Z,{fullWidth:!1,onMouseEnter:t.onMouseOver,onMouseLeave:t.onMouseLeave,rounding:4,children:Object(b.jsxs)(h.f,{alignItems:"start",color:n?"lightGray":"white",direction:"column",display:"flex",justifyContent:"start",marginEnd:-3,paddingX:3,paddingY:2,rounding:4,width:"100%",children:[Object(b.jsx)(h.f,{padding:2,children:Object(b.jsx)(h.u,{size:"sm",truncate:!0,children:"board_section"===e.type?o.a._("Find some ideas for this section:","Call-to-action text that upsells more ideas tab for an empty section","Call-to-action text that upsells more ideas tab for an empty section"):o.a._("Find some ideas for this board:","Call-to-action text that upsells more ideas tab for an empty board","Call-to-action text that upsells more ideas tab for an empty board")})}),Object(b.jsx)(h.f,{display:"flex",justifyContent:"between",padding:2,width:"100%",children:c()(0,5).map(e=>{const t=s[e];return Object(b.jsx)(h.f,{children:Object(b.jsx)(p,{pin:t})},""+(t?t.id:e))})})]})})})})}))},i6L0:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("/MKj"),o=n("OWXb"),r=n("nGHF"),a=n("vVEi");function s(){const e=Object(i.useDispatch)(),{showToast:t}=Object(r.b)();return{showBlockingActionToast:({actionType:n,board:i,section:r})=>{t(Object(a.f)("inProgress",n,i,r)),Object(a.c)({check:()=>e(Object(o.a)(i.id)).then(e=>!Object(a.e)({blockingActions:e,actionType:n,boardId:i.id,sectionId:r&&r.id})),checkDelay:a.a,checkInterval:a.b,onComplete:()=>t(Object(a.f)("completed",n,i,r))})}}}},i97C:function(e,t,n){n.d(t,"a",(function(){return u}));var i=n("q1tI"),o=n("/MKj"),r=n("1inl"),a=n("Ye/N"),s=n("4TDQ"),c=n("Sp3T"),d=n("i6L0"),l=n("U4JR");function u({board:e}){const[t,n]=Object(i.useState)(null),u=Object(o.useDispatch)(),{showBlockingActionToast:h}=Object(d.a)(),b=Object(c.a)(),p=Object(i.useCallback)(()=>b(()=>{if(!t)return;const{source:i,target:o}=t;n(null),Object(l.b)(7173,{objectId:i.id,merge_flow:"dnd"}),u(Object(s.a)(e.id,i.id,o.id)).then(()=>{h({actionType:"merge",board:e,section:o})}).catch(e=>{r.a.showError(e.message||a.a._("Failed to merge sections","useSectionMergeAction.errorMessage","Error message when failed to merge sections"))})}),[null==t?void 0:t.source,null==t?void 0:t.target]);return{handleShowMergeSectionsConfirmationModal:(e,t)=>b(()=>{n({source:e,target:t})}),mergeConfirmationModalProps:t,onConfirm:p}}},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return s}));var i=n("Ye/N"),o=n("dtqy"),r=n("n6mq"),a=n("nKUr");function s({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:s,shouldUseLegoStyles:c,onDelete:d}){const l=Object(a.jsx)(r.w,{accessibilityLabel:i.a._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return c?Object(a.jsx)(r.g,{size:"lg",color:"gray",text:i.a._("Saved","PinRepEditButton.SavedButton","saved button on pin"),onClick:d,accessibilityLabel:i.a._("Pin Saved Button","PinRepEditButton.SavedButtonLabel","saved button label on pin"),selected:!0}):n||o?Object(a.jsx)("div",{style:{...s||{}},children:l}):l}t.default=Object(o.a)(s)},jXQH:function(e,t,n){var i=n("TO8r"),o=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e}},jZXB:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("zir5");class o extends i.a{constructor(){super({},{},!1)}v2ActivateExperiment(e){return null}v2LogExperimentGroupOverride(e,t){}}},jaOL:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("fOPN");t.default=function(e,t){switch(void 0===e&&(e=0),t.type){case i.ADD_SOURCE:case i.ADD_TARGET:return e+1;case i.REMOVE_SOURCE:case i.REMOVE_TARGET:return e-1;default:return e}}},jdx6:function(e,t,n){n.d(t,"b",(function(){return c}));var i=n("8cMa"),o=n("JW66"),r=n("Ye/N"),a=n("n6mq"),s=n("nKUr");function c(e,t=""){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce((n,i,o)=>{if(n.length>0&&e&&e.length){const r=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(Object(s.jsx)("em",{style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"},children:t.substring(r,r+e.length)},o),i)}return[i]},[]):t}t.a=function(e){const{disabled:t,item:n,isSection:d,isSelectMode:l,isWithinSectionPicker:u,saveState:h,searchQuery:b,selected:p}=e,f=d?null:n,g=d?n:null,m=g&&g.title||f&&f.name||"";let j="",v=!1,O="",x=0;f&&({image_cover_url:j,is_collaborative:v,privacy:O,section_count:x=0}=f);const y=c(b,m),_=O===o.a.BoardPrivacy.SECRET,w=!t&&(p||!!h),C=!u&&"number"==typeof x&&x>0,S="number"==typeof x&&x>0?"boardWithSection":"boardWithoutSection",I=l?r.a._("Select","Board select button label","Board select button label"):r.a._("Save","Pin save button label","Pin save button label");return Object(s.jsxs)(a.f,{alignItems:"center",color:w?"lightGray":"white",display:"flex",paddingX:6,paddingY:2,"data-test-id":S,children:[f?Object(s.jsx)(a.f,{height:36,width:36,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none",children:j?Object(s.jsx)(a.x,{src:j,alt:m,fit:"cover",naturalWidth:1,naturalHeight:1}):Object(s.jsx)("span",{})}):Object(s.jsx)(a.f,{height:36,paddingX:2}),Object(s.jsxs)(a.f,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow",children:[Object(s.jsx)(a.ab,{color:t?"gray":"darkGray",size:"md",truncate:!0,weight:"bold",children:y}),(C||!w)&&Object(s.jsxs)(a.f,{alignItems:"center",display:"flex",children:[_&&Object(s.jsx)(i.a,{type:"secret"}),v&&Object(s.jsx)(i.a,{type:"group"}),C&&Object(s.jsx)(i.a,{type:"sections"})]}),!C&&w&&!h&&Object(s.jsxs)(a.f,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:[!l&&Object(s.jsx)(a.f,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}},children:Object(s.jsx)(a.v,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})}),Object(s.jsx)(a.ab,{color:"white",overflow:"normal",size:"md",weight:"bold",children:I})]}),!C&&w&&"loading"===h&&Object(s.jsx)(a.f,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:Object(s.jsx)(a.T,{accessibilityLabel:r.a._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0})})]})]})}},jirY:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("/ZYE"),o=n("H3Jb"),r=n("q1tI"),a=n("2S0S");t.useDrag=function(e){var t=r.useRef(e);t.current=e,a(null!=e.item,"item must be defined"),a(null!=e.item.type,"item type must be defined");var n=o.useDragSourceMonitor(),s=n[0],c=n[1];o.useDragHandler(t,s,c);var d=i.useMonitorOutput(s,t.current.collect||function(){return{}},(function(){return c.reconnect()})),l=r.useMemo((function(){return c.hooks.dragSource()}),[c]),u=r.useMemo((function(){return c.hooks.dragPreview()}),[c]);return r.useEffect((function(){c.dragSourceOptions=t.current.options||null,c.reconnect()}),[c]),r.useEffect((function(){c.dragPreviewOptions=t.current.previewOptions||null,c.reconnect()}),[c]),[d,l,u]}},juW8:function(e,t,n){n.d(t,"a",(function(){return i}));const i={addOrEditDate:"addOrEditDate",boardArchiveConfirmation:"boardArchiveConfirmation",boardEdit:"boardEdit",boardUnarchiveConfirmation:"boardUnarchiveConfirmation",bulkCopy:"bulkCopy",bulkDelete:"bulkDelete",collaboratorsAndPermissions:"collaboratorsAndPermissions",createSection:"createSection",editSection:"editSection",followers:"followers",groupPins:"groupPins",jumpstartBoard:"jumpstartBoard",mergeBoard:"mergeBoard",moveSection:"moveSection",pincode:"pincode",sectionMergeConfirm:"sectionMergeConfirm",sendBoard:"sendBoard",simpleCreateSection:"simpleCreateSection"}},jxrL:function(e,t,n){function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("X6C7")),i(n("1tpI")),i(n("eiom"))},"kT2/":function(e,t,n){var i=n("q1tI"),o=n("JW66"),r=n("Ye/N"),a=n("n6mq"),s=n("nKUr");const c=e=>{const t=e.split("\n");t.push("");const n=[];let i,o=[];return t.forEach(e=>{const t=e.indexOf("•");t>-1?(i||(i=""),o.push(e.substring(t+1).trim())):((i||o.length>0)&&n.push({heading:i,items:o}),i=e,o=[])}),n},d=e=>{let t="";return e.forEach((n,i)=>{const{heading:o,items:r}=n;o&&(t+=o),r&&r.length>0&&(t+="\n• "+r.join("\n• ")),i<e.length-1&&(t+="\n\n")}),t};t.a=function({header:e,helperText:t,listBlocks:n,onUpdate:l,placeholderListBlocks:u}){const h=d(u||[{heading:r.a._("What you'll need","storyboard.detailsList.placeholder","Placeholder text header for details list of story Pin"),items:[r.a._("Write a bullet list of tools, materials and anything else!","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin"),r.a._("Type it up or copy and paste.","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin")]}]),[b,p]=Object(i.useState)(n?d(n):"");return Object(s.jsx)(a.f,{children:Object(s.jsx)(a.bb,{id:"storyboard-details-list",helperText:t,label:e,onChange:({value:e})=>{p(e),l(c(e))},onBlur:()=>{""===b.trim()&&p("")},onKeyDown:({event:e,value:t})=>{const{keyCode:n,target:i,shiftKey:r}=e;if(i instanceof HTMLTextAreaElement){const{selectionStart:a,selectionEnd:s}=i;if(a===s){let s=0,d=0,u="";if(n===o.a.KeyCode.ENTER?"\n• "!==t.substring(a-3,a)||"\n"!==t.substring(a,a+1)&&a!==t.length?r||"\n"===t.substring(a-1,a)||(s=0,u="\n• "):(s=-3,u="\n"):n!==o.a.KeyCode.BACKSPACE&&n!==o.a.KeyCode.DELETE||("\n• "===t.substring(a-3,a)?s=-3:"\n•"===t.substring(a-2,a)?s=-2:"\n"===t.substring(a-1,a)&&"•"===t.substring(a,a+1)&&(s=-1,d=1)),0!==s||0!==d||""!==u){const n=t.substring(0,a+s)+u+t.substring(a+d);p(n);const o=a+s+u.length;setTimeout(()=>{i.selectionStart=o,i.selectionEnd=o},10),l(c(n)),e.preventDefault()}}}},placeholder:h,rows:7,value:b})})}},"ks/r":function(e,t,n){n.d(t,"a",(function(){return u}));var i=n("q1tI"),o=n("LT60"),r=n("L2iP"),a=n("N/FO"),s=n("n6mq"),c=n("nKUr");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(...e){super(...e),d(this,"state",{animation:null,visible:!1}),d(this,"setRef",e=>{this.element||(this.element=e,e.addEventListener("dragover",this.handleDragOver),e.addEventListener("dragleave",this.handleDragLeave))}),d(this,"handleDragOver",()=>{const{placement:e}=this.props;if(!this.state.animation){const t="top"===e?-1:1,n=Object(a.a)({window,duration:1/0,run:(e,n,i)=>{const o=n<500?.8:1.2000000000000002;window.scrollTo(0,window.scrollY+o*t*i)}});n.start(),this.setState({animation:n})}}),d(this,"handleDragLeave",()=>{const{animation:e}=this.state;e&&(e.cancel(),this.setState({animation:null}))}),d(this,"element",null),d(this,"visibleTimeout",null)}componentDidMount(){this.visibleTimeout=window.setTimeout(()=>this.setState({visible:!0}),500)}componentWillUnmount(){const e=this.element,{animation:t}=this.state;e&&(e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("dragleave",this.handleDragLeave)),t&&t.cancel(),this.visibleTimeout&&window.clearTimeout(this.visibleTimeout)}render(){const{height:e,placement:t}=this.props,{visible:n}=this.state;return Object(c.jsx)(s.f,{bottom:"bottom"===t,dangerouslySetInlineStyle:{__style:{zIndex:16777271,visibility:n?"visible":"hidden"}},height:e,left:!0,position:"fixed",right:!0,top:"top"===t,children:Object(c.jsx)("div",{ref:this.setRef,style:{width:"100%",height:"100%"}})})}}function u({noStickyHeader:e}){const t=e?0:r.a;return Object(c.jsx)(o.a,{children:Object(c.jsx)(s.z,{children:Object(c.jsxs)(s.f,{children:[Object(c.jsx)(l,{placement:"top",height:120+t}),Object(c.jsx)(l,{placement:"bottom",height:120})]})})})}},kugi:function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var i=n("zir5"),o=n("4xvr"),r=n("eOdZ");class a extends i.a{v2ActivateExperiment(e){return this._getGroupForExperiment(e,!0)}flush(){this._queuedResource&&this._queuedResource.flush()}v2LogExperimentGroupOverride(e,t){this._reportExperimentActivated(e,!1,t,t)}_getGroupForExperiment(e,t,n){void 0===t&&(t=!0);let i=this.active[e];return void 0===i&&t&&(i=this.triggerable[e],void 0!==i&&(this.active[e]=i,this._reportExperimentActivated(e,n,i))),i||null}_reportExperimentActivated(e,t,n,i){const a={add_to_experiment:!!t,experiment_name:e};if(i&&(a.override_group=i),n&&(a.experiment_group=n),this.useBatching)this._queuedResource||(this._queuedResource=new o.b("ActivateExperimentResource",e=>({experiments:e}))),this._queuedResource.enqueue(a);else{r.a.create("ActivateExperimentResource",a).callCreate({showError:!1})}}}},l9OW:function(e,t,n){var i=n("SKAX"),o=n("MMmD");e.exports=function(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}},lSCD:function(e,t,n){var i=n("NykK"),o=n("GoyQ");e.exports=function(e){if(!o(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},lXCh:function(e,t,n){},lh2y:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("Bfq7"),o=n("NFjV");t.createNativeDragSource=function(e){return new o.NativeDragSource(i.nativeTypesConfig[e])},t.matchNativeItemType=function(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(i.nativeTypesConfig).filter((function(e){return i.nativeTypesConfig[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}},lihF:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e=0),e+1}},"lm/5":function(e,t,n){var i=n("fmRc"),o=n("wF/u");e.exports=function(e,t,n,r){var a=n.length,s=a,c=!r;if(null==e)return!s;for(e=Object(e);a--;){var d=n[a];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++a<s;){var l=(d=n[a])[0],u=e[l],h=d[1];if(c&&d[2]){if(void 0===u&&!(l in e))return!1}else{var b=new i;if(r)var p=r(u,h,l,e,t,b);if(!(void 0===p?o(h,u,3,r,b):p))return!1}}return!0}},lnQP:function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("zUcL"),a=n("Ye/N"),s=n("Hz/G"),c=n("n6mq"),d=n("w70y"),l=n("nKUr");function u({label:e,path:t,selected:n}){return Object(l.jsx)(c.v,{accessibilityLabel:e,dangerouslySetSvgPath:{__path:t},color:n?"darkGray":"gray",size:24})}function h({selected:e}){return Object(l.jsx)(u,{label:a.a._("Dense","Label for selecting the dense pin density view","Label for selecting the dense pin density view"),path:"M16.00,20.00 L20.00,20.00 L20.00,16.00 L16.00,16.00 L16.00,20.00 Z M10.00,8.00 L10.00,4.00 L14.00,4.00 L14.00,8.00 L10.00,8.00 Z M4.00,8.00 L4.00,4.00 L8.00,4.00 L8.00,8.00 L4.00,8.00 Z M16.00,8.00 L16.00,4.00 L20.00,4.00 L20.00,8.00 L16.00,8.00 Z M4.00,14.00 L4.00,10.00 L8.00,10.00 L8.00,14.00 L4.00,14.00 Z M10.00,14.00 L10.00,10.00 L14.00,10.00 L14.00,14.00 L10.00,14.00 Z M16.00,14.00 L16.00,10.00 L20.00,10.00 L20.00,14.00 L16.00,14.00 Z M4.00,20.00 L4.00,16.00 L8.00,16.00 L8.00,20.00 L4.00,20.00 Z M10.00,20.00 L10.00,16.00 L14.00,16.00 L14.00,20.00 L10.00,20.00 Z",selected:e})}function b({selected:e}){return Object(l.jsx)(u,{label:a.a._("Regular","Label for selecting the regular pin density view","Label for selecting the regular pin density view"),path:"M13.00,20.00 L13.00,13.00 L20.00,13.00 L20.00,20.00 L13.00,20.00 Z M4.00,11.00 L4.00,4.00 L11.00,4.00 L11.00,11.00 L4.00,11.00 Z M13.00,11.00 L13.00,4.00 L20.00,4.00 L20.00,11.00 L13.00,11.00 Z M4.00,20.00 L4.00,13.00 L11.00,13.00 L11.00,20.00 L4.00,20.00 Z",selected:e})}var p=n("t3tn"),f=n("ANjH");class g extends i.Component{constructor(...e){var t,n,i;super(...e),i=({activeIndex:e})=>{const{viewType:t,component:n,pinView:i}=this.props,o=0===e?"regular":"dense";Object(s.a)({boardDensity:o,component:n,surface:i,viewType:t})},(n="handleItemChange")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidUpdate(){const{dispatch:e,metadata:t,pinView:n,updatedBoardPinDensity:i}=this.props;if(t&&t.data&&""===i){const{profile_pin_rep_view_type:i,board_pin_rep_view_type:o}=t.data;"board"===n&&e(i?Object(p.a)(i):Object(p.a)("regular")),"profile"===n&&e(o?Object(p.d)(o):Object(p.d)("regular"))}}render(){const{metadata:e,updatedBoardPinDensity:t}=this.props;if(!e||!e.data)return null;const n="dense"===t?1:0;return Object(l.jsx)("div",{className:"OwnBoardSelector",children:Object(l.jsx)(c.Q,{items:[Object(l.jsx)(b,{selected:"regular"===t}),Object(l.jsx)(h,{selected:"dense"===t})],onChange:this.handleItemChange,selectedItemIndex:n,responsive:!0})})}}var m=Object(f.compose)(Object(o.connect)((function({ui:e,viewer:t},{pinView:n}){return{updatedBoardPinDensity:e.views&&e.views[n+"PinView"],viewer:t}})),Object(d.b)({name:"UserMetadataResource",key:"metadata",options:e=>({user:{id:e.viewer.username}}),allowStale:!1}))(g),j=n("v/Q4"),v=n("sxkF");function O({board:e,currentView:t,inBoardOrganizationMode:n,onContentViewChange:o,onOrganizeClick:r,pinCount:s,showSortOptions:d}){const u=Object(j.a)();return Object(l.jsxs)(c.f,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,children:[Object(l.jsx)(c.f,{paddingX:1,flex:"grow",children:Object(l.jsx)(c.u,{children:a.a._("Pins","Heading for Pins outside of board sections on board page","Heading for Pins outside of board sections on board page")})}),d&&Object(v.c)(s)&&Object(l.jsx)(c.f,{paddingX:2,children:Object(l.jsx)(v.a,{currentView:t,onChange:o,board:e,viewer:u})}),s>=1&&Object(l.jsxs)(i.Fragment,{children:[s>=1&&Object(l.jsx)(m,{viewType:5,component:13183,pinView:"board"}),!n&&Object(l.jsx)(c.f,{paddingX:2,children:Object(l.jsx)(c.g,{text:a.a._("Organize","The board organization button","The board organization button"),onClick:r})})]})]})}var x=n("KFEb"),y=n("6SCp"),_=n("P2Et");const w=Object(f.compose)(Object(o.connect)((e,t)=>Object(_.b)(e.feeds[x.a.BOARD_PINS][t.board.id])),Object(d.b)({name:"BoardFeedResource",key:"resource",options:e=>Object(y.a)(e.board,e.viewer,e.currentView,e.currentFilter)}))(_.a);w.displayName="BoardSectionlessPinGrid";var C=w,S=n("qD10");var I=({children:e,shouldNavigate:t,to:n})=>t?Object(l.jsx)(S.a,{to:n,children:e}):e,T=n("eBDd");var E=e=>{const{numberOfSelectedPins:t}=e;return Object(l.jsx)(c.f,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:Object(l.jsx)(c.f,{color:"white",padding:3,rounding:"pill",children:Object(l.jsx)(c.ab,{weight:"bold",children:Object(T.a)(a.a.ngettext("Move {{ count }} Pin here","Move {{ count }} Pins here",t,"Call to action overlay on a section to move selected Pins","Call to action overlay on a section to move selected Pins"),{count:t})})})})},P=n("WjpJ"),D=n.n(P);const B=157,k=141,M=118,R=106;function A(e){return"dense"===e?2:3}function L(e){return(("dense"===e?M:R)+1)*A(e)-1}function N({isHovered:e,mode:t,pins:n}){const i=A(t),o="dense"===t,r=o?B:k,a=o?M:R,s=L(t);return Object(l.jsx)(c.C,{rounding:4,width:s,children:Object(l.jsxs)(c.f,{display:"flex",children:[Object(l.jsx)(c.f,{bottom:!0,dangerouslySetInlineStyle:{__style:e?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,top:!0}),D()(i).map(e=>{var t,o,s,d,u,h;const b=e===i-1,p=n[e];return Object(l.jsx)("div",{style:{paddingRight:!b&&1},children:Object(l.jsx)(c.C,{height:r,width:a,rounding:0,wash:!0,children:p&&Object(l.jsx)(c.x,{alt:null!==(t=p.description)&&void 0!==t?t:"",color:"transparent",fit:"cover",naturalHeight:null!==(o=null===(s=p.image_large_size_pixels)||void 0===s?void 0:s.height)&&void 0!==o?o:1,naturalWidth:null!==(d=null===(u=p.image_large_size_pixels)||void 0===u?void 0:u.width)&&void 0!==d?d:1,src:null!==(h=p.image_large_url)&&void 0!==h?h:""})})},e)})]})})}var F=n("0NP8");function U({children:e,mode:t}){return"dense"===t?Object(l.jsx)(c.ab,{weight:"bold",children:e}):Object(l.jsx)(c.u,{accessibilityLevel:2,size:"sm",truncate:!0,children:e})}function H({children:e,displayEditIcon:t,mode:n,mouseCursor:i,onEditClick:o,onTouch:r,pinCount:s,title:d}){const u=Object(l.jsxs)(c.f,{children:[Object(l.jsxs)(c.f,{position:"relative",children:[e,t&&Object(l.jsx)(c.f,{position:"absolute",bottom:!0,right:!0,children:Object(l.jsx)(c.f,{padding:2,children:Object(l.jsx)(c.w,{bgColor:"white",icon:"edit",iconColor:"darkGray",onClick:o,accessibilityLabel:a.a._("Edit","BoardSectionCard.SectionRep.EditIcon","accessibility label for the board section name edit button"),accessibilityHaspopup:!0,size:"sm"})})})]}),Object(l.jsx)(c.f,{alignItems:"start",display:"flex",justifyContent:"between",width:L(n),children:Object(l.jsxs)(c.f,{padding:2,flex:"grow",children:[Object(l.jsx)(U,{mode:n,children:d}),Object(l.jsx)(c.f,{marginTop:1,children:Object(l.jsx)(F.b,{count:s,size:"sm"})})]})})]});return r?Object(l.jsx)(c.Z,{fullWidth:!1,mouseCursor:i,onTap:r,rounding:4,children:u}):u}var z=e=>{var t;const{board:n,boardSection:r,canEdit:a,focused:s,hovered:d,inOrganizationMode:u,isDragging:h,isMergeTarget:b,onBlur:p,oneTapMovePinsHandler:f,onFocus:g,onMouseEnter:m,onMouseLeave:j,onShowEditSectionModal:v}=e,{slug:O,title:x,preview_pins:y=[]}=r,_=Object(o.useSelector)(({ui:e})=>e.views.boardPinView),w=f&&f.numberOfSelectedPins;let C;w&&f&&(C=()=>{f.moveToSection(r)});let S="pointer";h?S="grabbing":!w&&u&&(S="grab");const T=!!a&&!h&&(d||s),P=f&&f.numberOfSelectedPins>0&&!!w&&d&&!h&&Object(l.jsx)(E,{numberOfSelectedPins:f.numberOfSelectedPins});return Object(l.jsxs)(c.f,{alignItems:"center",color:"white",direction:"row",display:"flex",onBlur:p,onFocus:g,onMouseEnter:m,onMouseLeave:j,position:"relative",rounding:2,children:[Object(l.jsx)(I,{shouldNavigate:!u,to:`${null!==(t=n.url)&&void 0!==t?t:""}${O}/`,children:Object(l.jsx)(H,{displayEditIcon:T,mode:_,mouseCursor:S,onEditClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),v(r)},onTouch:C,pinCount:r.pin_count,title:x,children:Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)(N,{isHovered:d||b||s,mode:_,pins:y}),P]})})}),Object(l.jsx)("div",{className:"sectionHoverSurface"})]})},q=n("ks/r"),G=n("7pfs"),W=n("9X5u"),Y=n("rg+c"),K=n("9ip6");function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class X extends i.Component{constructor(...e){super(...e),V(this,"state",{dragDrop:null,sectionIds:this.props.sections.map(e=>e.id)}),V(this,"cancelHoverTimeout",()=>{const e=this.dragHoverTimeout;e&&clearTimeout(e.timeoutId),this.dragHoverTimeout=null}),V(this,"dragHoverTimeout",null),V(this,"isDragging",()=>!!this.state.dragDrop),V(this,"handleSectionDragBegin",e=>{this.setState({dragDrop:{previewIndex:e,sourceIndex:e,target:null}})}),V(this,"handleSectionDragHover",(e,t)=>{const{dragDrop:n}=this.state,i=this.props.allowReordering;if(!t||!n)return;const{previewIndex:o}=n,r=Object(K.a)({hoverRelativePosition:t,centerEnabled:e!==o&&i}),a={itemIndex:e,regionWithinItem:r};if(this.dragHoverTimeout&&Object(K.c)(a,this.dragHoverTimeout.hoverLocation))return;this.cancelHoverTimeout();const s="center"===r?"merge":"reorder",c={action:s,index:Object(K.b)({hoverLocation:a,sourceIndex:o})};c.index!==o?this.dragHoverTimeout={hoverLocation:a,timeoutId:setTimeout(()=>{this.dragHoverTimeout=null,"reorder"===s?this.setState({dragDrop:{...this.state.dragDrop,target:c,previewIndex:c.index},sectionIds:Object(x.c)(this.state.sectionIds,o,c.index)}):this.setState({dragDrop:{...this.state.dragDrop,target:c}})},"reorder"===s?200:20)}:n.target&&n.target.index!==c.index&&this.setState({dragDrop:{...n,target:c}})}),V(this,"handleSectionDragEnd",e=>{const{sections:t,onShowMergeSectionsConfirmationModal:n,onSectionReorder:i}=this.props,{dragDrop:o,sectionIds:r}=this.state,a=o&&o.target;if(this.cancelHoverTimeout(),!e||!o||!a||a.index===o.sourceIndex)return void this.setState({dragDrop:null,sectionIds:t.map(e=>e.id)});const{previewIndex:s,sourceIndex:c}=o,{action:d,index:l}=a;if(this.setState({dragDrop:null}),"merge"===d){const e=e=>{const n=r[e];return n&&t.find(({id:e})=>e===n)},i=e(s),o=e(l);i&&o&&n(i,o)}else i(c,l)}),V(this,"renderSection",(e,t)=>{const{allowReordering:n,board:i,canEdit:o,oneTapMovePinsHandler:r,onShowEditSectionModal:a,organizeMode:s}=this.props,{dragDrop:d}=this.state,u=d&&d.target;return Object(l.jsx)(c.f,{padding:2,children:Object(l.jsx)(G.a,{children:({focused:c,hovered:d,onBlur:h,onFocus:b,onMouseEnter:p,onMouseLeave:f})=>Object(l.jsx)(z,{allowReordering:n,board:i,boardSection:e,canEdit:o,focused:c,hovered:d,inOrganizationMode:s,isDragging:this.isDragging(),isMergeTarget:!!u&&"merge"===u.action&&t===u.index,onBlur:e=>{const t=e.currentTarget;setTimeout(()=>{t.contains(document.activeElement)||h()},0)},onFocus:b,onMouseEnter:p,onMouseLeave:f,oneTapMovePinsHandler:r,onShowEditSectionModal:a})})})})}componentDidUpdate(e){const{sections:t}=e,{sections:n}=this.props,i=e=>e.map(({id:e})=>e).join(",");if(t.length!==n.length&&i(t)!==i(n)){this.cancelHoverTimeout();const e=n.map(e=>e.id);this.setState({dragDrop:null,sectionIds:e})}}componentWillUnmount(){this.cancelHoverTimeout()}render(){const{allowReordering:e,connectDropTarget:t,isDragWithinBounds:n,sections:i}=this.props,{sectionIds:o}=this.state,r=this.isDragging(),a=i.reduce((e,t)=>({...e,[t.id]:t}),{}),s=Object(l.jsx)(c.f,{display:"flex",justifyContent:"center",marginStart:6,marginEnd:6,wrap:!0,children:o.map(e=>a[e]).filter(e=>!!e).map((t,i)=>Object(l.jsx)(c.f,{children:e?Object(l.jsx)(Y.b,{index:i,onDragBegin:this.handleSectionDragBegin,onDragEnd:this.handleSectionDragEnd,onDragHover:this.handleSectionDragHover,type:Y.a.Section,children:Object(l.jsx)("div",{style:{opacity:r&&!n?.5:1},children:this.renderSection(t,i)})}):Object(l.jsx)(c.f,{children:this.renderSection(t,i)})},t.id))});return Object(l.jsxs)(c.f,{width:"100%",children:[e&&t?t(Object(l.jsx)("div",{children:s})):s,r&&Object(l.jsx)(q.a,{})]})}}const Z=Object(W.a)(Y.a.Section)(X);function Q(e){const{allowReordering:t,fetchMore:n,isAtEnd:i,isFetching:o}=e;return Object(l.jsxs)(c.f,{width:"100%",children:[Object(l.jsx)(c.O,{isAtEnd:i,isFetching:o,fetchMore:n}),t?Object(l.jsx)(Z,{...e}):Object(l.jsx)(X,{...e}),o&&!i&&Object(l.jsx)(c.f,{position:"relative",paddingY:6,children:Object(l.jsx)(c.T,{accessibilityLabel:a.a._("Loading sections","loading state for board sections","loading state for board sections"),show:!0})})]})}var J=n("MaRn"),$=n("eOdZ");var ee=n("U4JR");class te extends i.Component{constructor(...e){var t,n,i;super(...e),i=(e,t)=>{const{board:n,dispatch:i,enableReordering:o,sections:r,viewParameter:a}=this.props;if(!o)return;const s=r[e].id,c=r[t].id,d=Object(x.c)(r,e,t).map(e=>e.id),l=d.indexOf(s),u=e=>e>=0&&e<d.length,h={boardId:n.id,sourceSectionId:s,targetSectionId:c,...u(l+1)?{sectionIdAfter:d[l+1]}:{},...u(l-1)?{sectionIdBefore:d[l-1]}:{}},b={objectId:s,view:5,viewParameter:a};var p;i((p=h,e=>{const{boardId:t,sectionIdBefore:n,sectionIdAfter:i,sourceSectionId:o,targetSectionId:r}=p;e(Object(J.a)({feedType:x.a.BOARD_SECTIONS,feedId:t,itemType:"board_section",sourceItemId:o,targetItemId:r}));const a={section_id:o,section_before:n||void 0,section_after:i||void 0};return $.a.create("BoardSectionsReorderResource",a).callUpdate({showError:!1})})).then(()=>Object(ee.b)(7133,b))},(n="handleSectionReorder")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{sectionsInvalidated:e,onLoadedAll:t,sectionsResource:{isFetching:n,refreshData:i,isAtEnd:o}}=this.props;e&&!n&&i(),o&&t()}componentDidUpdate(e){!this.props.sectionsInvalidated||e.sectionsInvalidated||this.props.isFetching||this.props.refreshData(),!e.sectionsResource.isAtEnd&&this.props.sectionsResource.isAtEnd&&this.props.onLoadedAll()}render(){const{board:e,enableReordering:t,inBoardOrganizationMode:n,oneTapMovePinsHandler:i,onShowEditSectionModal:o,onShowMergeSectionsConfirmationModal:r,sections:s,sectionsResource:d}=this.props,{isLoaded:u,isFetching:h,fetchMore:b,isAtEnd:p}=d;if(!u)return a.a._("Board sections loading spinner","BoardPage.BoardSections.loadingSpinner","Accessibility label for the spinner on board sections"),Object(l.jsx)(c.T,{accessibilityLabel:a.a._("Board sections loading spinner"),show:!0});const f=(e.access||[]).includes("write");return Object(l.jsx)(c.f,{justifyContent:"center",display:"flex",children:Object(l.jsx)(Q,{allowReordering:t,board:e,canEdit:f,fetchMore:b,isAtEnd:p,isFetching:h,oneTapMovePinsHandler:i,onSectionReorder:this.handleSectionReorder,onShowEditSectionModal:o,onShowMergeSectionsConfirmationModal:r,organizeMode:n,sections:s})})}}var ne=Object(f.compose)(Object(o.connect)((function(e,t){const{feeds:{[x.a.BOARD_SECTIONS]:n={}},sections:i}=e,{board:{id:o}}=t,r=n[o];return{sections:(r||[]).reduce((e,t)=>"board_section"===t.type&&i[t.id]?e.concat([i[t.id]]):e,[]),sectionsInvalidated:null===r}})),Object(d.b)({name:"BoardSectionsResource",key:"sectionsResource",options:e=>({board_id:e.board.id,redux_normalize_feed:!0})}))(te),ie=n("i/p3"),oe=n("79tv"),re=n("Sp3T"),ae=n("HJ6M");t.a=Object(o.connect)((function({boards:e,ui:t},{board:n}){const{views:{boardPinView:i}}=t,o=((e||{}).content||{})[n.id];return{boardPinView:i,sectionCount:(o?o.section_count:n.section_count)||0}}),()=>({}))((function({actions:e,board:t,boardPinView:n,bulkEditSelectedPins:o,currentFilter:a,currentView:s,displayActionBar:d,enableReordering:u,inBoardOrganizationMode:h,inSectionOrganizationMode:b,inSelectAll:p,isOwnBoard:f,isPinGridSorted:g,onBulkEditPinClick:m,onContentViewChange:v,oneTapMovePinsHandler:x,onPinDelete:y,onShowEditSectionModal:_,onShowMergeSectionsConfirmationModal:w,refreshFilteredFeed:S,sectionCount:I,viewParameter:T}){const[E,P]=Object(i.useState)(0===I),D=Object(re.a)(),B=Object(oe.a)(t.url),k=Object(j.a)(),{is_collaborative:M,pin_count:R}=t,A=(t.access||[]).includes("write"),L=f||t.collaborated_by_me,N=Boolean("number"==typeof R&&R>=2&&M&&L);return Object(l.jsxs)(c.f,{marginBottom:12,children:[Object(l.jsx)(r.a,{setMaxWidth:!1,children:Object(l.jsxs)(c.f,{children:[I>0&&(!a||a===ae.a)&&Object(l.jsx)(ne,{board:t,enableReordering:u,inBoardOrganizationMode:h,inSectionOrganizationMode:b,oneTapMovePinsHandler:x,onLoadedAll:()=>P(!0),onShowEditSectionModal:_,onShowMergeSectionsConfirmationModal:w,viewParameter:T}),d&&E&&L&&I>0&&Object(l.jsx)(O,{board:t,currentView:s,inBoardOrganizationMode:h,onContentViewChange:v,onOrganizeClick:()=>D(()=>{const{onBoardOrganizeClick:t}=e;Object(ee.b)(101,{component:69,element:400}),t(!0)}),pinCount:null!=R?R:0,showSortOptions:N})]})}),E&&Object(l.jsx)(c.f,{"data-test-id":"board-feed",dangerouslySetInlineStyle:{__style:{paddingBottom:"8px"}},paddingX:3,position:"relative",children:Object(l.jsx)(C,{board:t,bulkEditSelectedPins:o,currentFilter:a,currentView:s,denseViewSelected:A&&"dense"===n,inBoardOrganizationMode:h,inSectionOrganizationMode:b,inSelectAll:p,isOwnBoard:f,isPinGridSorted:g,onBulkEditPinClick:m,onPinDelete:y,refreshFilteredFeed:S,renderFooterStory:e=>!t.archived_by_me_at&&L&&Object(l.jsx)(c.f,{marginBottom:6,children:Object(l.jsx)(r.a,{children:Object(l.jsx)(ie.a,{collection:t,storyId:e,url:B})})}),viewParameter:T,viewer:k})})]})}))},mEMi:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("q1tI"),o=n("DzJC"),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.PureComponent{constructor(...e){super(...e),a(this,"setContainerRef",e=>{this.containerRef=e}),a(this,"fetchMoreIfNecessary",r()(()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:n},i)=>e+t+(i?i(t):2*t)>n)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},mHb8:function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const i=(e,t)=>{var n;const i="object"==typeof t.owner?null===(n=t.owner)||void 0===n?void 0:n.id:t.owner;return e.isAuth&&i===e.id},o=(e,t)=>Boolean(e.isAuth&&t.collaborated_by_me),r=(e,t)=>i(e,t)?3069:3070},mLS1:function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("Ye/N"),a=n("82UD"),s=n("DBaX"),c=n("n6mq"),d=n("nKUr");function l({handleTogglePinSelection:e,index:t,isSelected:n,pin:i}){return Object(d.jsx)(c.Z,{onTap:()=>{e(t)},rounding:s.c,children:Object(d.jsx)(a.a,{attributionOption:"hide",blockClickEvents:!0,pin:i,pinId:i.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:n?"selected":"no-selection",surface:"BoardCoverSelectablePin",trackingParameters:{slotIndex:t}})})}var u=({boardPins:e,coverPinIndex:t,fetchMore:n,isLoaded:i,handleTogglePinSelection:o})=>i?Object(d.jsx)(c.f,{paddingY:4,children:Object(d.jsx)(c.D,{columnWidth:152,comp:({data:e,itemIdx:n})=>Object(d.jsx)(l,{handleTogglePinSelection:o,index:n,isSelected:t===n,pin:e}),gutterWidth:16,items:e||[],loadItems:n})}):Object(d.jsx)(c.f,{padding:6,children:Object(d.jsx)(c.T,{show:!0,accessibilityLabel:r.a._("Loading","BoardCoverEdit.Accessibility.Label","accessibility label for loading spinner")})}),h=n("TgLd"),b=n("eOdZ"),p=n("Wrea"),f=n("yaUg"),g=n("pLLR");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j={border:0,top:120};class v extends i.Component{constructor(...e){super(...e),m(this,"state",{deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}}),m(this,"handleUpdateImage",()=>{const e=this.image;if(!e)return;const t=e.offsetHeight,n=e.offsetWidth;this.setState({isSpinnerShown:!1,startBgPos:{left:-(n-this.state.holderWidth)/2,top:-(t-this.state.holderHeight)/2}})}),m(this,"handleOnMouseUp",()=>{this.isDragging&&(this.isDragging=!1,this.setState({startBgPos:{left:this.getBgLeft(),top:this.getBgTop()},deltaX:0,deltaY:0}),this.props.updateImgCrop(this.getCropData()))}),m(this,"isDragging",!1)}componentDidMount(){this.holder&&this.setState({holderHeight:this.holder.offsetHeight,holderWidth:this.holder.offsetWidth})}componentDidUpdate(e){e.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})}getFrameBounds(){const{frameHeight:e,frameWidth:t}=this.props,{holderHeight:n,holderWidth:i}=this.state;return{left:i/2-t/2,width:t,height:e,top:n/2-e/2}}getBgLeft(){const{frameWidth:e}=this.props,t=this.getFrameBounds(),n=this.getImgScale(),i=this._getImageDimensions(),o=i.imgHeight*n,r=i.imgWidth*n;let a=0;return o&&r&&(a=this.state.startBgPos.left+this.state.deltaX,a+r-e<t.left&&(a=t.left-r+e),a>t.left&&(a=t.left)),a}getBgTop(){const{frameHeight:e}=this.props,t=this.getFrameBounds(),n=this.getImgScale(),i=this._getImageDimensions(),o=i.imgHeight*n,r=i.imgWidth*n;let a=0;return o&&r&&(a=this.state.startBgPos.top+this.state.deltaY,a+o-e<t.top&&(a=t.top-o+e),a>t.top&&(a=t.top)),a}getImgScale(){const{frameHeight:e,frameWidth:t}=this.props,{imgHeight:n,imgWidth:i}=this._getImageDimensions(),o=this.getFrameBounds();if(n&&i){let r=n/i;return r=r>=o.height/o.width?t/i:e/n,r}return 1}getImageBounds(){const{imgHeight:e,imgWidth:t}=this._getImageDimensions();let n={};if(e&&t){const i=this.getImgScale();n={width:i*t,height:i*e}}return n}getBgBounds(){return{left:this.getBgLeft(),top:this.getBgTop()}}getCropData(){const{frameHeight:e,frameWidth:t}=this.props,n=this.getFrameBounds(),i=this.getBgBounds(),o=this.getImgScale();return{cropX:Math.round(-(i.left-n.left)/o),cropY:Math.round(-(i.top-n.top)/o),height:Math.round(e/o),width:Math.round(t/o),scale:o}}handleOnMouseDown(e){0===e.button&&(e.stopPropagation(),this.isDragging=!0,this.originX=e.pageX,this.originY=e.pageY)}handleOnMouseMove(e){this.isDragging&&this.setState({deltaX:e.pageX-(this.originX||0),deltaY:e.pageY-(this.originY||0)})}_getImageDimensions(){var e,t,n;const{pin:i}=this.props,o=null===(e=i.images)||void 0===e?void 0:e["236x"];return{imgHeight:null!==(t=null==o?void 0:o.height)&&void 0!==t?t:1,imgWidth:null!==(n=null==o?void 0:o.width)&&void 0!==n?n:1}}render(){var e,t;const{boardName:n,frameHeight:i,frameWidth:o,hideCoverNavigation:a,isFirst:s,isLast:l,isRTL:u,pin:h,showNextPin:b,showPrevPin:p}=this.props,{isSpinnerShown:g}=this.state,{imgHeight:m,imgWidth:v}=this._getImageDimensions(),O=this.getFrameBounds(),x=this.getImageBounds(),y=this.getBgBounds();let _="";return m&&v&&(_="in"),Object(d.jsxs)("div",{className:"ImageCrop",children:[Object(d.jsxs)("div",{className:"holder",ref:e=>{this.holder=e},children:[Object(d.jsx)("div",{className:"bg",style:y,children:Object(d.jsx)("img",{alt:Object(f.a)(r.a._("Board cover for {{ boardName }}"),{boardName:n}),className:_,onLoad:this.handleUpdateImage,ref:e=>{this.image=e},src:null===(e=h.images)||void 0===e||null===(t=e["236x"])||void 0===t?void 0:t.url,style:x})}),Object(d.jsxs)("div",{className:"mask",children:[Object(d.jsx)("span",{style:{top:0,left:0,right:0,height:O.top}}),Object(d.jsx)("span",{style:{top:O.top,left:O.left+o,right:0,height:i}}),Object(d.jsx)("span",{style:{top:i+O.top,left:0,right:0,bottom:0}}),Object(d.jsx)("span",{style:{top:O.top,left:0,width:O.left,height:i}})]}),Object(d.jsx)("div",{className:"frame",style:O}),Object(d.jsx)("div",{className:"drag",onMouseDown:e=>{this.handleOnMouseDown(e)},onMouseMove:e=>{this.handleOnMouseMove(e)},onMouseUp:()=>{this.handleOnMouseUp()},role:"presentation"}),Object(d.jsx)("div",{className:"spinner",style:{display:g?"":"none"}})]}),s||a?null:Object(d.jsx)(c.f,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:{...j,left:u?void 0:100,right:u?100:void 0}},children:Object(d.jsx)(c.w,{icon:"arrow-back",accessibilityLabel:r.a._("Previous","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:p})}),l||a?null:Object(d.jsx)(c.f,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:{...j,left:u?100:void 0,right:u?void 0:100}},children:Object(d.jsx)(c.w,{icon:"arrow-forward",accessibilityLabel:r.a._("Next","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:b})})]})}}function O(e){const{isRTL:t}=Object(g.d)();return Object(d.jsx)(v,{...e,isRTL:!!t})}var x=n("w70y");function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return e.reduce((e,t)=>("pin"===t.type&&e.push(t),e),[])}function w({boardFeedResource:{data:e},coverPinId:t}){return Math.max(0,_(e||[]).findIndex(e=>e.id===t))}class C extends i.Component{constructor(...e){super(...e),y(this,"state",{coverPinIndex:w(this.props),imgCropData:null,selectedCoverPin:null,previousBoardFeedResourceData:null}),y(this,"handleSave",()=>{var e,t,n;const{boardId:i,dispatch:o}=this.props,{coverPinIndex:r,imgCropData:a}=this.state,s=(this.pins||[])[r];if(!s)return;const c=null===(e=s.images)||void 0===e?void 0:e["236x"],d=null==c?void 0:c.url,l=a?{crop_x:a.cropX,crop_y:a.cropY,height:a.height,width:a.width,scale:a.scale}:{crop_x:0,crop_y:0,height:null==c?void 0:c.height,width:null==c?void 0:c.width,scale:1},u={board_id:i,url:d,pin_id:s.id,pin_image_url:d,...l},h={height:null!==(t=null==c?void 0:c.height)&&void 0!==t?t:0,width:null!==(n=null==c?void 0:c.width)&&void 0!==n?n:0,x:a?a.cropX:0,y:a?a.cropY:0};b.a.create("BoardResource",u).callUpdate().then(()=>{this.props.onSave(null!=d?d:""),o(Object(p.a)(i,{custom_cover:!0,scale:a?a.scale:1,pin_id:s.id,crop:h,image_url:null!=d?d:""}))})}),y(this,"updateImgCrop",e=>this.setState({imgCropData:e})),y(this,"handleShowNextPin",()=>{const{boardFeedResource:{isAtEnd:e,isFetching:t,fetchMore:n}}=this.props,i=(this.pins||[]).length;i&&this.setState(({coverPinIndex:e})=>({coverPinIndex:(e+1)%i}),()=>{this.pins&&this.state.coverPinIndex+5>=this.pins.length&&!e&&!t&&n()})}),y(this,"handleShowPrevPin",()=>{const e=(this.pins||[]).length;e&&this.setState(({coverPinIndex:t})=>({coverPinIndex:(t||e)-1}))}),y(this,"handleTogglePinSelection",e=>{const t=this.pins||[];this.setState({coverPinIndex:e,selectedCoverPin:t[e]})}),y(this,"handleCoverEditBackButtonClick",()=>{this.setState({selectedCoverPin:null})}),y(this,"renderBoardCoverMasonry",()=>{const{coverPinIndex:e,selectedCoverPin:t}=this.state,{boardName:n,boardFeedResource:i,frameHeight:o,frameWidth:r}=this.props,a=this.pins||[],{data:s,fetchMore:c,isLoaded:l}=i;return t?Object(d.jsx)(O,{boardName:n,frameHeight:null!=o?o:236,frameWidth:null!=r?r:236,isFirst:!e,isLast:e===a.length-1,pin:t,showNextPin:this.handleShowNextPin,showPrevPin:this.handleShowPrevPin,updateImgCrop:this.updateImgCrop,hideCoverNavigation:!0}):Object(d.jsx)(u,{boardPins:s,coverPinIndex:e,fetchMore:c,handleTogglePinSelection:this.handleTogglePinSelection,isLoaded:l})}),y(this,"renderCoverEditHeader",()=>Object(d.jsx)(c.s,{alignItems:"center",justifyContent:"center",height:80,children:Object(d.jsx)(c.f,{width:"100%",padding:4,children:Object(d.jsxs)(c.s,{alignItems:"center",justifyContent:"between",children:[Object(d.jsx)(c.w,{accessibilityLabel:r.a._("Navigate to cover picker","BoardEdit.back.button","Cover picker navigate back button"),icon:"arrow-back",iconColor:"darkGray",onClick:this.handleCoverEditBackButtonClick}),Object(d.jsx)(c.u,{size:"md",children:r.a._("Move and scale to crop","BoardEdit.Heading.Experiment.Text","edit board heading")}),Object(d.jsx)(c.w,{accessibilityLabel:r.a._("Cancel change board cover","BoardCoverEdit.icon.cancel","Cancel board cover edit"),icon:"cancel",iconColor:"darkGray",onClick:this.props.onCancel})]})})}))}static getDerivedStateFromProps(e,t){const n=e.boardFeedResource.data,{previousBoardFeedResourceData:i}=t;return!i&&n?{previousBoardFeedResourceData:n,coverPinIndex:w(e)}:{previousBoardFeedResourceData:n}}componentDidUpdate(e){const t=this.props.boardFeedResource.data,n=e.boardFeedResource.data;(t&&n!==t&&t.length||t&&n&&t.length!==n.length)&&t.forEach(e=>{if("pin"===e.type){(new Image).src=e.url}})}get pins(){const{boardFeedResource:{data:e}}=this.props;return e?_(e):void 0}render(){const{heading:e,onCancel:t}=this.props,{coverPinIndex:n,selectedCoverPin:i}=this.state,o=(this.pins||[])[n];return Object(d.jsx)(h.b,{accessibilityModalLabel:r.a._("Change Board Cover","accessible label for modal to change board cover image","accessible label for modal to change board cover image"),size:"lg",heading:i?this.renderCoverEditHeader():e,onDismiss:t,footer:i&&Object(d.jsx)(c.f,{display:"flex",justifyContent:"end",children:Object(d.jsx)(c.f,{padding:2,children:Object(d.jsx)(c.g,{disabled:!o,inline:!0,onClick:this.handleSave,text:r.a._("Done","BoardCoverEdit.Button.Submit.Exp","Button for saving board cover edit")})})}),children:this.renderBoardCoverMasonry()})}}function S(e){const t=Object(o.useDispatch)(),n=Object(x.a)({name:"BoardFeedResource",options:{board_id:e.boardId,field_set_key:"images_only_item",filter_section_pins:!1,page_size:50}});return Object(d.jsx)(C,{...e,boardFeedResource:n,dispatch:t})}var I=n("0rqM");const T=({label:e,labelId:t})=>t?Object(d.jsx)(c.y,{htmlFor:t,children:Object(d.jsx)(c.ab,{size:"sm",children:e})}):Object(d.jsx)(c.ab,{size:"sm",children:e});function E(e){const{children:t,label:n,labelId:o}=e;return Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(c.f,{marginBottom:2,children:Object(d.jsx)(T,{label:n,labelId:o})}),t]})}const P=138;function D({coverPin:e,handleShowBoardCoverEditModal:t}){const[n,o]=Object(i.useState)(!1),{isRTL:a}=Object(g.d)();return Object(d.jsx)(E,{label:r.a._("Board cover","BoardForm.BoardFormCoverButton","Form label for updating board cover"),children:Object(d.jsx)(c.f,{width:P,position:"relative",children:Object(d.jsx)(c.Z,{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onTap:t,rounding:4,children:null!=e&&e.custom_cover?Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(c.C,{height:P,rounding:4,width:P,children:Object(d.jsx)(c.x,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||P,naturalWidth:e.size&&e.size[0]||P,src:e.image_url})}),Object(d.jsx)(c.f,{position:"absolute",left:a,right:!a,bottom:!0,padding:2,children:Object(d.jsx)(c.f,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:n?"white":"rgba(255, 255, 255, 0.8)"}},children:Object(d.jsx)(c.v,{accessibilityLabel:r.a._("Edit board cover","BoardForm.BoardFormBoardCoverButton","Accessibility label on icon"),icon:"edit",color:"darkGray",size:16})})})]}):Object(d.jsx)(c.f,{alignItems:"center",color:n?"darkWash":"lightGray",display:"flex",height:P,justifyContent:"center",rounding:4,width:P,children:Object(d.jsx)(c.v,{accessibilityLabel:r.a._("Add cover photo","BoardForm.BoardFormCoverButton","Accessibility label on icon"),color:"darkGray",icon:"add",size:24})})})})})}function B({children:e,label:t,labelId:n,subtext:o}){return Object(d.jsx)(i.Fragment,{children:Object(d.jsxs)(c.f,{alignItems:"start",display:"flex",justifyContent:"start",paddingY:1,children:[e,Object(d.jsx)(c.f,{marginStart:2,children:Object(d.jsxs)(c.y,{htmlFor:n,children:[Object(d.jsx)(c.ab,{size:"lg",weight:"bold",children:t}),o]})})]})})}function k({hasCollabBoardEmail:e,isCollaborative:t,onCheckboxChange:n}){return t&&Object(d.jsx)(B,{label:r.a._("Email notifications","BoardForm.BoardFormCollaboratorsEmailCheckbox","Form label"),labelId:"emailNotificationsCheckbox",subtext:Object(d.jsx)(c.ab,{color:"gray",size:"lg",children:r.a._("Get an email when someone saves Pins to this board","BoardForm.BoardFormCollaboratorsEmailCheckbox","Text explaing field on board form")}),children:Object(d.jsx)(c.f,{alignItems:"center",display:"flex",children:Object(d.jsx)(c.f,{marginEnd:1,children:Object(d.jsx)(c.k,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:n})})})})}var M=n("xUWj"),R=n("yweb"),A=n("qpbZ");function L({board:e,onCollaboratorInviteClick:t}){const n=Object(R.c)(),i=Object(M.b)({boardId:e.id,ownerName:e.owner.full_name,ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_key||e.owner.image_medium_url||e.owner.image_small_url}),o=i.slice(0,3).map(e=>e.name);let r="";switch(i.length){case 3:r=Object(A.c)(""+n._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames"),{first:""+o[0],second:""+o[1],last:""+o[2]});break;case 2:r=Object(A.c)(""+n._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames."),{first:""+o[0],second:""+o[1]});break;default:r=o.join(", ")}const a=i.length>3?Object(A.c)(n.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",i.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:r,leftCount:""+(i.length-3)}):Object(A.c)(""+n._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators"),{userNames:r});return Object(d.jsxs)(c.s,{alignItems:"center",justifyContent:"between",children:[Object(d.jsx)(c.c,{accessibilityLabel:a,collaborators:i.map(({name:e,src:t})=>({src:null!=t&&t.endsWith("/default_75.png")?void 0:t,name:e})),size:"md"}),Object(d.jsx)(c.w,{accessibilityLabel:n._("Invite collaborators","BoardEdit.BoardCollaboratorsAndInviteSection","Accessibility label on button"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"})]})}var N=n("KEt0"),F=n("EC51"),U=n("kmwA");function H({board:e,onCollaboratorInviteClick:t}){const n=Object(d.jsxs)(c.s,{alignItems:"center",justifyContent:"start",children:[Object(d.jsx)(c.ab,{size:"sm",inline:!0,children:r.a._("Collaborators")}),Object(d.jsx)(N.a,{}),Object(d.jsx)(c.ab,{inline:!0,size:"sm",weight:"bold",children:Object(d.jsx)(F.a,{inline:!0,target:"blank",href:U.a.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE,children:r.a._("Learn more")})})]});return Object(d.jsx)(E,{alignTop:!0,label:n,labelId:"collaborators",children:Object(d.jsx)(L,{board:e,onCollaboratorInviteClick:t})})}function z({collaboratorInvitesEnabled:e,isCollaborative:t,onCheckboxChange:n}){return t&&Object(d.jsx)(B,{label:r.a._("Let collaborators add people","BoardForm.BoardFormCollaboratorsInviteToggle","Form label"),labelId:"collaboratorInvitesEnabledCheckbox",children:Object(d.jsx)(c.k,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:n})})}function q({description:e,descriptionValidatorErrors:t,onChange:n}){const i="boardEditDescription";return Object(d.jsx)(E,{alignTop:!0,label:r.a._("Description","BoardForm.BoardFormDescription"," Form field label"),labelId:i,children:Object(d.jsx)(c.bb,{errorMessage:t.join(", "),id:i,name:"description",onChange:n,placeholder:r.a._("What's your board about?"),value:e})})}var G=({children:e})=>Object(d.jsx)(c.f,{paddingX:8,role:"list",children:i.Children.map(e,(t,n)=>t&&Object(d.jsx)(c.f,{role:"listitem",marginBottom:n===i.Children.count(e)-1?1:8,children:t},n))}),W=n("JW66");function Y({isProtectedToggler:e,isToggleDisable:t,onChange:n,onCheckboxChange:o,privacy:a}){if(!0===e)return Object(d.jsx)(B,{label:r.a._("Protected board (not listed on user's profile)","BoardForm.BoardFormSecretToggle","protected board"),labelId:"protected",children:Object(d.jsx)(c.f,{paddingY:2,children:Object(d.jsx)(c.V,{onChange:n,switched:a===W.a.BoardPrivacy.PROTECTED,id:"protected",disabled:t})})});if(a!==W.a.BoardPrivacy.PROTECTED){const e=r.a._("Keep this board secret","BoardForm.BoardFormSecretToggle","Caption for board settings to set visibility"),n=Object(d.jsx)(i.Fragment,{children:Object(d.jsxs)(c.ab,{color:"gray",size:"lg",children:[r.a._("So only you and collaborators can see it.","BoardForm.BoardFormSecretToggle","notifying the board owner only they and the collaborators can see the board if it set to secret")," ",Object(d.jsx)(F.a,{inline:!0,target:"blank",href:U.a.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE,children:r.a._("Learn more","BoardForm.BoardFormSecretToggle","Link to learn more about secret boards")})]})});return Object(d.jsx)(B,{label:e,labelId:"secret",subtext:n,children:Object(d.jsx)(c.f,{display:"flex",alignItems:"center",children:Object(d.jsx)(c.k,{checked:a===W.a.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:o,disabled:t})})})}return null}function K({allowHomefeedRecommendations:e,onCheckboxChange:t}){return Object(d.jsx)(B,{label:r.a._("Personalization","BoardForm.BoardFormRecommendationToggle","form label"),labelId:"recommendation",subtext:Object(d.jsx)(c.ab,{color:"gray",size:"lg",children:r.a._("Show Pins inspired by this board in your home feed.","BoardForm.BoardFormRecommendationToggle","Caption for board settings to set visibility")}),children:Object(d.jsx)(c.k,{checked:e,id:"recommendation",name:"recommendation",onChange:t})})}function V({boardOwnerHasActiveAds:e,hasActiveAds:t,isAdAccountOwner:n,onCheckboxChange:o,privacy:a,showCheckboxConfirmation:s}){if(!1===n)return Object(d.jsx)(B,{label:r.a._("Protected board (not listed on user's profile)","BoardForm.BoardFormSecretToggle","protected board"),labelId:"protected",children:Object(d.jsx)(c.f,{paddingY:2,children:Object(d.jsx)(c.V,{onChange:()=>{},id:"protected",switched:!0,disabled:!0})})});if(a!==W.a.BoardPrivacy.PROTECTED){const n=r.a._("Keep this board secret","BoardForm.BoardFormSecretToggle","Caption for board settings to set visibility"),l=Object(d.jsx)(i.Fragment,{children:Object(d.jsxs)(c.ab,{color:"gray",size:"lg",children:[e?r.a._("Ads from secret boards won’t run.","BoardForm.BoardFormSecretToggle","notifying the board owner ads will not run if the board is set to secret"):r.a._("So only you and collaborators can see it.","BoardForm.BoardFormSecretToggle","notifying the board owner only they and the collaborators can see the board if it set to secret")," ",Object(d.jsx)(F.a,{inline:!0,target:"blank",href:U.a.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE,children:r.a._("Learn more","BoardForm.BoardFormSecretToggle","Link to learn more about secret boards")})]})});return Object(d.jsx)(B,{label:n,labelId:"secret",subtext:l,children:Object(d.jsx)(c.f,{display:"flex",alignItems:"center",children:Object(d.jsx)(c.k,{checked:"secret"===a,id:"secret",name:"secret",onChange:"public"===a&&t?s:o})})})}return null}function X({name:e,nameValidatorErrors:t,onChange:n}){return Object(d.jsx)(E,{label:r.a._("Name","BoardForm.BoardFormTitleInput","Form field label"),labelId:"boardEditName",children:Object(d.jsx)(c.cb,{errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:n,placeholder:r.a._('Like "Places to Go" or "Recipes to Make"'),size:"lg",value:e})})}var Z=n("4dcN"),Q=n("eBDd"),J=n("d90F"),$=n("vvax"),ee=n("nGHF"),te=n("c50B");function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ie=e=>Object(te.j)({max:e,maxErrorString:Object(Q.a)(r.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a string is too long","Validation error when a string is too long"),{maxLength:e})}),oe=()=>[ie(W.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION)],re=()=>[Object(te.o)({message:r.a._("Don't forget to name your board!")}),ie(W.a.MAX_CHARS_FOR_BOARD_TITLE)],ae=({condition:e,children:t})=>e?Object(d.jsx)(c.f,{position:"absolute",zIndex:h.a,children:t}):t;class se extends i.Component{constructor(e){super(e),ne(this,"handleChangeName",({value:e})=>{const t=Object(te.r)(re(),e);this.setState({name:e,nameValidatorErrors:t})}),ne(this,"handleChangeDescription",({value:e})=>{const t=Object(te.r)(oe(),e);this.setState({description:e,descriptionValidatorErrors:t})}),ne(this,"handleChangePrivacyToggle",({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})}),ne(this,"handleChangePrivateToggle",({value:e})=>{this.setState({privacy:e?"secret":"public"})}),ne(this,"handleEnableSecret",()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})}),ne(this,"handleShowSecretConfirmation",()=>{this.setState({showSecretConfirmation:!0})}),ne(this,"handleHideSecretConfirmation",()=>{this.setState({showSecretConfirmation:!1})}),ne(this,"handleChangeRecommendationToggle",({value:e})=>{this.setState({allowHomefeedRecommendations:e})}),ne(this,"handleChangeCollabBoardEmail",({value:e})=>{this.setState({collab_board_email:e})}),ne(this,"handleChangeCollaboratorInvitesEnabled",({value:e})=>{this.setState({collaboratorInvitesEnabled:e})}),ne(this,"handleCancel",()=>{Z.a.trackEvent(this.props.gaCategory,"click_cancel"),this.props.onClose()}),ne(this,"handleCheckboxChange",e=>({event:t,checked:n})=>e({event:t,value:n})),ne(this,"handleSubmit",e=>{const{onSubmit:t}=this.props,{collab_board_email:n,collaboratorInvitesEnabled:i,description:o,name:a,privacy:s,allowHomefeedRecommendations:c}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const d=a.trim(),l=o.trim();this.setState({submitting:!0,submitError:""}),Z.a.trackEvent(this.props.gaCategory,"click_submit"),t({name:d,collab_board_email:n,collaborator_invites_enabled:i,description:l,privacy:s,allow_homefeed_recommendations:c}).then(()=>{this.setState({submitting:!1})}).catch(e=>{let t=r.a._("Uh oh! Something went wrong.");if(e.message){const{message:n,message_detail:i}=e;t=i?`${n} ${i}`:n}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})})}),ne(this,"handleShowBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!0})}),ne(this,"handleHideBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!1})}),ne(this,"handleSaveBoardCoverEditModal",e=>{this.handleHideBoardCoverEditModal();const{onCropChange:t}=this.props;t&&t(e)});const{board:{collab_board_email:t,collaborator_invites_enabled:n,description:i,name:o,pin_count:a,privacy:s,allow_homefeed_recommendations:c}}=e;this.state={collab_board_email:t,description:i,name:o,pin_count:a,privacy:s,allowHomefeedRecommendations:c,collaboratorInvitesEnabled:n,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showSecretConfirmation:!1,submitting:!1,previousName:o,previousDescription:i,previousPrivacy:s}}static getDerivedStateFromProps(e,t){const n={};return e.board.name!==t.previousName&&(n.previousName=e.board.name,n.nameValidatorErrors=Object(te.r)(re(),e.board.name)),e.board.description!==t.previousDescription&&(n.previousDescription=e.board.description,n.descriptionValidatorErrors=Object(te.r)(oe(),e.board.description)),e.board.privacy!==t.previousPrivacy&&(n.previousPrivacy=e.board.privacy),n}getFormFooter(){const{board:{archived_by_me_at:e},isArchivable:t,onArchiveButtonClick:n,onMergeButtonClick:o,onUnarchiveButtonClick:a,submitText:s}=this.props,{submitError:l,submitting:u}=this.state;return Object(d.jsxs)(i.Fragment,{children:[Object(d.jsxs)(c.f,{alignItems:"center",display:"flex",justifyContent:"between",wrap:!0,children:[Object(d.jsxs)(c.f,{alignItems:"center",display:"flex",children:[t&&!e&&Object(d.jsx)(c.f,{children:Object(d.jsx)(c.g,{disabled:u,inline:!0,onClick:n,size:"lg",text:r.a._("Archive","button label during board edit","button label during board edit")})}),e&&Object(d.jsx)(c.f,{children:Object(d.jsx)(c.g,{disabled:u,inline:!0,onClick:a,size:"lg",text:r.a._("Unarchive","button label during board edit","button label during board edit")})}),o&&Object(d.jsx)(c.f,{padding:1,children:Object(d.jsx)(c.g,{disabled:u,inline:!0,onClick:o,size:"lg",text:r.a._("Merge","button label during board edit","button label during board edit")})})]}),Object(d.jsx)(c.f,{children:Object(d.jsx)(c.f,{display:"flex",children:Object(d.jsx)(c.f,{height:48,children:Object(d.jsx)(c.g,{color:"red",disabled:this.submitDisabled(),inline:!0,onClick:this.handleSubmit,size:"lg",text:s,type:"submit"})})})})]}),l&&Object(d.jsx)(c.f,{paddingX:1,children:Object(d.jsx)(c.ab,{color:"red",children:l})})]})}submitDisabled(){const{descriptionValidatorErrors:e,name:t,nameValidatorErrors:n,submitting:i}=this.state;return!t||n.length>0||e.length>0||i}render(){const{board:e,board:{archived_by_me_at:t,board_owner_has_active_ads:n,cover_pin:o,has_active_ads:a,id:s,is_collaborative:l},coverImageHeight:u,coverImageWidth:b,currentUserIsOwner:p,handleBoardLeave:f,isAdAccount:g,isAdAccountOwner:m,isDeletable:j,isEditable:v,isNameAndSecretView:O,onClose:x,onCollaboratorInviteClick:y,onDeleteButtonClick:_,title:w,useModalWithNoLayer:C}=this.props,{allowHomefeedRecommendations:T,collab_board_email:E,collaboratorInvitesEnabled:P,description:B,descriptionValidatorErrors:M,name:R,nameValidatorErrors:A,pin_count:L,privacy:N,showBoardCoverEdit:F,showSecretConfirmation:U}=this.state,W=v&&L>0;let Z=Object(d.jsxs)(G,{children:[W&&Object(d.jsx)(D,{coverPin:o,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),Object(d.jsx)(X,{name:R,nameValidatorErrors:A,onChange:this.handleChangeName}),Object(d.jsx)(q,{description:B,descriptionValidatorErrors:M,onChange:this.handleChangeDescription}),p&&!!f&&!!y&&Object(d.jsx)(H,{board:e,onCollaboratorInviteClick:y}),Object(d.jsx)(c.f,{marginBottom:-7,children:Object(d.jsx)(c.ab,{size:"sm",children:r.a._("Settings","BoardForm.BoardForm","Section heading in board edit form")})}),Object(d.jsx)(J.a,{name:"sterling_protected_board_by_owner",activate:!0,children:({anyEnabled:e})=>e?Object(d.jsx)(Y,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:N}):Object(d.jsx)(V,{boardOwnerHasActiveAds:n,hasActiveAds:a,isAdAccountOwner:m,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivateToggle),privacy:N,showConfirmation:this.handleShowSecretConfirmation,showCheckboxConfirmation:this.handleShowSecretConfirmation})}),!t&&Object(d.jsx)(K,{allowHomefeedRecommendations:T,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),Object(d.jsx)(k,{hasCollabBoardEmail:E,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),Object(d.jsx)(z,{collaboratorInvitesEnabled:P,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),j&&Object(d.jsxs)(c.f,{marginTop:-6,paddingY:4,children:[Object(d.jsx)(c.ab,{size:"sm",children:r.a._("Action","BoardForm.BoardForm.Action","Section heading in board edit form")}),Object(d.jsxs)(c.Z,{onTap:_,children:[Object(d.jsx)(c.f,{marginTop:2,marginBottom:1,"data-test-id":"deleteBoardButton",children:Object(d.jsx)(c.u,{size:"sm",children:r.a._("Delete board","BoardForm.Delete","Delete board label")})}),Object(d.jsx)(c.ab,{size:"lg",color:"gray",children:r.a._("Delete this board and all it's Pin forever.","BoardForm.BoardForm.Delete.Label","Delete board warning text")}),Object(d.jsx)(c.ab,{size:"lg",color:"gray",children:r.a._("You can't undo this!","BoardForm.BoardForm.Delete.LabelTwo","Delete board warning text")})]})]})]});p?O&&(Z=Object(d.jsxs)(G,{children:[Object(d.jsx)(X,{name:R,nameValidatorErrors:A,onChange:this.handleChangeName}),Object(d.jsx)(J.a,{name:"sterling_protected_board_by_owner",activate:!0,children:({anyEnabled:e})=>e?Object(d.jsx)(Y,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,privacy:N,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle)}):Object(d.jsx)(V,{boardOwnerHasActiveAds:n,hasActiveAds:a,isAdAccountOwner:!!m,privacy:N,showConfirmation:this.handleShowSecretConfirmation,onCheckboxChange:this.handleCheckboxChange(this.handleShowSecretConfirmation),showCheckboxConfirmation:this.handleShowSecretConfirmation})})]})):Z=Object(d.jsxs)(G,{children:[!!f&&!!y&&Object(d.jsx)(H,{board:e,onCollaboratorInviteClick:y}),Object(d.jsx)(k,{hasCollabBoardEmail:E,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!t&&Object(d.jsx)(K,{allowHomefeedRecommendations:T,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),Object(d.jsx)(c.ab,{color:"gray",size:"lg",children:Object($.b)(r.a._("Only the board’s owner ({{ boardOwner }}) can manage the rest of its features","BoardForm.CollaboratorPermissionsCopy","Copy on board edit form letting collaborators know of their permissions on a board"),{boardOwner:Object(d.jsx)(c.ab,{color:"gray",inline:!0,size:"lg",weight:"bold",children:e.owner.full_name})})})]});const Q=C?c.G:h.b,ee=r.a._("Change board cover","BoardForm.BoardCoverEdit.heading","Change board cover heading"),te=Object(d.jsx)(c.s,{alignItems:"center",justifyContent:"center",height:80,children:Object(d.jsx)(c.f,{marginStart:"auto",width:"66%",padding:4,children:Object(d.jsxs)(c.s,{alignItems:"center",justifyContent:"between",children:[Object(d.jsx)(c.u,{size:"md",children:ee}),Object(d.jsx)(c.w,{accessibilityLabel:r.a._("Cancel change board cover","BoardForm.BoardCoverEdit.cancel","Cancel change board cover heading"),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal})]})})});return Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(ae,{condition:!!C,children:!F&&Object(d.jsx)(Q,{accessibilityModalLabel:r.a._("Board form","BoardForm.BoardForm","Accessibility label on board form"),size:"sm",onDismiss:x,footer:this.getFormFooter(),heading:w,children:Object(d.jsx)(c.f,{marginEnd:"auto",marginStart:"auto",rounding:2,children:Object(d.jsx)("form",{method:"post",onSubmit:this.handleSubmit,children:Z})})})}),F&&Object(d.jsx)(S,{boardId:s,boardName:R,coverPinId:null==o?void 0:o.pin_id,frameHeight:u,frameWidth:b,heading:te,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}),U&&Object(d.jsx)(I.a,{confirmButtonLabel:r.a._("Make secret","Setting the boards visibility to secret","Setting the boards visibility to secret"),heading:r.a._("Are you sure?","Warning label asking users to be sure of their action","Warning label asking users to be sure of their action"),message:r.a._("If you make this board secret, some active ads will stop running","Explicitly warning users of the board visibility action they are doing","Explicitly warning users of the board visibility action they are doing"),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret})]})}}ne(se,"defaultProps",{isNameAndSecretView:!1});t.a=Object(ee.c)(se)},mc7v:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}},mmKv:function(e,t,n){var i=n("/MKj"),o=n("+ip3"),r=n("ELJR"),a=n("qD10"),s=n("g5OB"),c=n("n6mq"),d=n("nKUr");const l=1.25*s.a;function u({story:e}){const{action:{text:t,url:n},custom_properties:{image:i,image_alt:o}}=e;return Object(d.jsxs)(c.f,{position:"relative",children:[Object(d.jsx)(c.C,{rounding:4,height:l,width:s.a,children:Object(d.jsx)(c.x,{alt:o,color:"black",fit:"cover",naturalHeight:2688,naturalWidth:2e3,src:i})}),Object(d.jsx)(c.f,{bottom:!0,display:"flex",justifyContent:"center",position:"absolute",width:s.a,padding:4,children:Object(d.jsx)(a.a,{to:n,children:Object(d.jsx)(c.g,{color:"white",text:t})})})]})}t.a=Object(i.connect)((e,t)=>({story:e.stories[t.storyId]}),()=>({}))((function({story:e,...t}){if(!e)return null;switch(e.story_type){case"BUBBLE_ONE_COL":return Object(d.jsx)(r.a,{bubbles:e.objects,id:t.storyId,referringSource:e.referring_source,slotIndex:t.slot,storyType:e.story_type,title:e.title,viewType:t.viewType,viewParameter:t.viewParameter});case"feed_card_default":case"feed_card_video":return Object(d.jsx)(u,{story:e});case"add_pin":return Object(d.jsx)(o.b,{});default:return null}}))},mvLR:function(e,t,n){function i(e){let t=!1;return{promise:new Promise((n,i)=>{e.then(e=>t?i({isCanceled:!0}):n(e),e=>i(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}n.d(t,"a",(function(){return i}))},mwIZ:function(e,t,n){var i=n("ZWtO");e.exports=function(e,t,n){var o=null==e?void 0:i(e,t);return void 0===o?n:o}},n34E:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("q1tI"),o=n("82UD"),r=n("n6mq"),a=n("nKUr");function s({index:e,isSelected:t,pin:n,handlePinSelectionChanged:s}){const c=n.id,d=Object(i.useCallback)(({event:e})=>{e.preventDefault(),e.stopPropagation(),s(c,!t)},[c,t]);return Object(a.jsx)(r.Z,{onTap:d,rounding:4,children:Object(a.jsx)(o.a,{attributionOption:"hide",blockClickEvents:!0,pin:n,pinId:n.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:t?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}})})}},nGHF:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var i=n("1dBE");const{Provider:o,Consumer:r,useHook:a,HOC:s}=Object(i.a)("toastManagerContext")},nmnc:function(e,t,n){var i=n("Kz5y").Symbol;e.exports=i},nrB0:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("2S0S"),o=!1,r=!1,a=function(){function e(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.sourceId=e},e.prototype.getHandlerId=function(){return this.sourceId},e.prototype.canDrag=function(){i(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}},e.prototype.isDragging=function(){if(!this.sourceId)return!1;i(!r,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return r=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{r=!1}},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.isDraggingSource=function(e){return this.internalMonitor.isDraggingSource(e)},e.prototype.isOverTarget=function(e,t){return this.internalMonitor.isOverTarget(e,t)},e.prototype.getTargetIds=function(){return this.internalMonitor.getTargetIds()},e.prototype.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},e.prototype.getSourceId=function(){return this.internalMonitor.getSourceId()},e.prototype.subscribeToOffsetChange=function(e){return this.internalMonitor.subscribeToOffsetChange(e)},e.prototype.canDragSource=function(e){return this.internalMonitor.canDragSource(e)},e.prototype.canDropOnTarget=function(e){return this.internalMonitor.canDropOnTarget(e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=a},nwWm:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("QWk2"),o=n("TT16"),r=n("Gytx"),a=function(){function e(e){var t=this;this.backend=e,this.hooks=i.default({dragSource:function(e,n){t.dragSourceOptions=n||null,o.isRef(e)?t.dragSourceRef=e:t.dragSourceNode=e,t.reconnectDragSource()},dragPreview:function(e,n){t.dragPreviewOptions=n||null,o.isRef(e)?t.dragPreviewRef=e:t.dragPreviewNode=e,t.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null}return e.prototype.receiveHandlerId=function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dragSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragSourceOptions",{get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreviewOptions",{get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){this.reconnectDragSource(),this.reconnectDragPreview()},e.prototype.reconnectDragSource=function(){var e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();e&&this.disconnectDragSource();var t=this.dragSource;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)):this.lastConnectedDragSource=t)},e.prototype.reconnectDragPreview=function(){var e=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();e&&this.disconnectDragPreview();var t=this.dragPreview;this.handlerId&&t&&e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))},e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},e.prototype.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},e.prototype.didDragSourceOptionsChange=function(){return!r(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},e.prototype.didDragPreviewOptionsChange=function(){return!r(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},e.prototype.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},e.prototype.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},Object.defineProperty(e.prototype,"dragSource",{get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreview",{get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current},enumerable:!0,configurable:!0}),e}();t.default=a},"oCl/":function(e,t,n){var i=n("CH3K"),o=n("LcsW"),r=n("MvSz"),a=n("0ycA"),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)i(t,r(e)),e=o(e);return t}:a;e.exports=s},oRM1:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("q1tI"),o=n("zQfT");function r({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:n,resourceName:r,resourceOptions:a,value:s}){const c=Object(o.a)({allowSearchOnMount:e,resourceName:r,resourceOptions:a,value:s});return Object(i.useEffect)(()=>{null!=c&&c.length&&n(c)},[c]),t||null}},oRao:function(e,t,n){var i=n("XRfM"),o=n("pLLR"),r=n("nKUr");t.a=({currency:e,maximumFractionDigits:t,minimumFractionDigits:n,shortform:a,shortformMaximumFractionDigits:s,formatStyle:c,uplimit:d,value:l})=>Object(r.jsx)(o.b,{children:o=>Object(i.g)(o.locale||"en-US",l,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:n,shortform:a,shortform_maximum_fraction_digits:s,style:c,uplimit:d})})},"otv/":function(e,t,n){var i=n("nmnc"),o=i?i.prototype:void 0,r=o?o.valueOf:void 0;e.exports=function(e){return r?Object(r.call(e)):{}}},pC0d:function(e,t,n){n.d(t,"a",(function(){return g}));var i=n("q1tI"),o=n("/MKj"),r=n("Sihc"),a=n("Ye/N"),s=n("TgLd"),c=n("VqlB"),d=n("n34E"),l=n("w70y"),u=n("oN2T"),h=n("shej"),b=n("U4JR"),p=n("n6mq"),f=n("nKUr");function g({boardId:e,clusterId:t,handleAddClick:n,isBoardOrganizeFeed:g,onDismiss:m,suggestedSectionTitle:j}){const v=Object(i.useRef)(null),[O,x]=Object(i.useState)([]),[y,_]=Object(i.useState)(j),{data:w,fetchMore:C,isFetching:S,isLoaded:I}=Object(l.a)({name:"SectionSuggestionsPinsResource",options:{boardId:e,clusterId:t}}),T=g?3541:3069,E=Object(o.useDispatch)(),P=Object(i.useCallback)(()=>{if(w){const t=w.map(e=>e.id),i=t.length,o=t.filter(e=>!O.includes(e));n&&n(y),E(Object(r.a)({boardId:e,name:y})).then(t=>{E(Object(c.a)({inverseSelection:!1,selectedPinIds:o,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:t.id}}))}).then(()=>{E(Object(u.c)(e,"pin_count")),Object(b.b)(8606,{number_pins_suggested:i,number_pins_selected:o.length,objectId:e,section_title:y,suggested_section_name:j,view:5,viewParameter:T}),m(),g||E(Object(h.b)())})}},[O,y,w]),D=(e,t)=>{const n=[...O],i=n.indexOf(e);t&&-1!==i?n.splice(i,1):t||-1!==i||n.push(e),x(n)};return Object(f.jsx)(s.b,{accessibilityModalLabel:a.a._("Add suggested pins to your newly created section modal","sectionSuggestionPinsModal.modal.accessibilityLabelForModal","Accessibility label for modal"),allowScroll:!0,footer:Object(f.jsxs)(p.f,{display:"flex",justifyContent:"end",paddingX:2,children:[Object(f.jsx)(p.f,{display:"inlineBlock",marginEnd:2,children:Object(f.jsx)(p.g,{inline:!0,onClick:()=>{m(),g||E(Object(h.b)()),Object(b.b)(8607,{objectId:e,suggested_section_name:j,view:5,viewParameter:T})},text:a.a._("Not now","sectionSuggestionPinsModal.footer.cancelButton","Cancel creating a board section")})}),Object(f.jsx)(p.f,{display:"inlineBlock",children:Object(f.jsx)(p.g,{color:"red",inline:!0,onClick:P,text:a.a._("Add section","sectionSuggestionPinsModal.footer.addSectionButton","Add pins and section")})})]}),heading:a.a._("Pick your Pins and you're all set!","sectionSuggestionPinsModal.modal.heading","Heading for modal to add suggested pins to your newly created section"),onDismiss:m,size:704,children:Object(f.jsxs)(p.f,{maxHeight:600,maxWidth:704,ref:v,overflow:"auto",children:[Object(f.jsxs)(p.f,{padding:4,paddingX:2,children:[Object(f.jsx)(p.ab,{size:"md",children:a.a._("Section name","sectionSuggestionPinsModal.modal.sectionNameTitle","Title for section name")}),Object(f.jsx)(p.f,{paddingY:2,children:Object(f.jsx)(p.cb,{id:"SectionSuggestionPinsTitle",onChange:({value:e})=>{_(e)},placeholder:a.a._("Add a name for this group","sectionSuggestionPinsModal.modal.sectionNameTitle.placeholder","Placeholder for section name"),size:"lg",value:y})})]}),I&&w&&Object(f.jsx)(p.D,{columnWidth:152,comp:({data:e,itemIdx:t})=>Object(f.jsx)(d.a,{index:t,isSelected:!O.includes(e.id),pin:e,handlePinSelectionChanged:D}),gutterWidth:16,items:w,loadItems:C,scrollContainer:()=>v.current}),Object(f.jsx)(p.T,{accessibilityLabel:a.a._("Loading pins","sectionSuggestionPinsModal.modal.spinner","Loading indicator"),show:S})]})})}},pIlY:function(e,t,n){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return l}));var i=n("q1tI"),o=n("DzJC"),r=n.n(o),a=n("1dBE"),s=n("nKUr");const{Provider:c,Consumer:d,useHook:l}=Object(a.c)("HeaderShadow");function u({children:e}){const[t,n]=Object(i.useState)(!1),[o,a]=Object(i.useState)(!1),[d,l]=Object(i.useState)(0),[u,h]=Object(i.useState)(null),b=r()(()=>{t&&(a(window.scrollY>0),l(window.scrollY))},50);return Object(i.useEffect)(()=>(n(!0),()=>{n(!1)}),[]),Object(i.useEffect)(()=>(window.addEventListener("scroll",b),()=>{window.removeEventListener("scroll",b)}),[t]),Object(s.jsx)(c,{value:{currentScrollPosition:d,isScrolled:o,setSubheaderShadow:h,subheaderShadow:u},children:e})}},pLLR:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return l}));var i=n("q1tI"),o=n("nKUr");const r=Object(i.createContext)(),a=r.Provider;function s(e){function t(t){const n=Object(i.useContext)(r);if(!n)throw new Error("withRequestContext must be used within a RequestContextProvider");return Object(o.jsx)(e,{...t,requestContext:n})}return t.displayName=`withRequestContext(${String(e.displayName||e.name)})`,t}const c=({children:e})=>{const t=Object(i.useContext)(r);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)},d=({children:e})=>{const t=Object(i.useContext)(r);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)};function l(){const e=Object(i.useContext)(r);if(!e)throw new Error("useRequestContext must be used within a RequestContextProvider");return e}},pSwN:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("Ye/N"),o=n("n6mq"),r=n("nKUr");function a({handleFollowClick:e,isFollowing:t,isSelf:n,disabled:a}){const s=t?i.a._("Unfollow"):i.a._("Follow");return n?Object(r.jsx)(o.g,{inline:!0,disabled:!0,text:i.a._("That's you!","Text describing that the person's avatar is you","Text describing that the person's avatar is you")}):Object(r.jsx)(o.g,{color:t?"gray":"red",inline:!0,onClick:e,text:s,disabled:a})}},pWuj:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("pYMm"),o=n("fOPN"),r=n("N4T/"),a=n("YuQ1"),s=n("LTlA");t.default=function(e,t){switch(void 0===e&&(e=a.NONE),t.type){case i.HOVER:break;case o.ADD_SOURCE:case o.ADD_TARGET:case o.REMOVE_TARGET:case o.REMOVE_SOURCE:return a.NONE;case i.BEGIN_DRAG:case i.PUBLISH_DRAG_SOURCE:case i.END_DRAG:case i.DROP:default:return a.ALL}var n=t.payload,c=n.targetIds,d=void 0===c?[]:c,l=n.prevTargetIds,u=void 0===l?[]:l,h=s.xor(d,u);if(!(h.length>0||!r.areArraysEqual(d,u)))return a.NONE;var b=u[u.length-1],p=d[d.length-1];return b!==p&&(b&&h.push(b),p&&h.push(p)),h}},pYMm:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("bVL4"),o=n("rV1A"),r=n("sAMb"),a=n("BEzM"),s=n("vmVG");!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("7nh8")),t.default=function(e){return{beginDrag:i.default(e),publishDragSource:o.default(e),hover:r.default(e),drop:a.default(e),endDrag:s.default(e)}}},peh1:function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){return e===t}function r(e){var t=arguments.length<=1||void 0===arguments[1]?o:arguments[1],n=null,i=null;return function(){for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return null!==n&&n.length===r.length&&r.every((function(e,i){return t(e,n[i])}))||(i=e.apply(void 0,r)),n=r,i}}function a(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),r=0;r<t;r++)o[r]=arguments[r];var s=0,c=o.pop(),d=a(o),l=e.apply(void 0,[function(){return s++,c.apply(void 0,arguments)}].concat(n)),u=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];var a=d.map((function(n){return n.apply(void 0,[e,t].concat(o))}));return l.apply(void 0,i(a))};return u.resultFunc=c,u.recomputations=function(){return s},u.resetRecomputations=function(){return s=0},u}}t.__esModule=!0,t.defaultMemoize=r,t.createSelectorCreator=s,t.createStructuredSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?c:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((function(e,t,i){return e[n[i]]=t,e}),{})}))};var c=t.createSelector=s(r)},qFZT:function(e,t,n){var i=n("PnD8"),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return i.isMemo(e)?a:s[e.$$typeof]||o}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var d=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,i){if("string"!=typeof n){if(p){var o=b(n);o&&o!==p&&e(t,o,i)}var a=l(n);u&&(a=a.concat(u(n)));for(var s=c(t),f=c(n),g=0;g<a.length;++g){var m=a[g];if(!(r[m]||i&&i[m]||f&&f[m]||s&&s[m])){var j=h(n,m);try{d(t,m,j)}catch(v){}}}return t}return t}},qUzp:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("8A+h"),o=n("E58E");function r({board:e,viewer:t}){return Object(i.a)(t,e)||Object(o.a)({board:e,viewer:t})}},qVfT:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("eOdZ");function o(e,t,n){return async o=>{const r=i.a.create("ApiResource",{url:`/v3/pins/${e}/notes/`,data:{pin_note_content:n}});let a;a=n?t?await r.callUpdate():await r.callCreate():await r.callDelete();const{resource_response:s}=a;o(function(e,t){return{type:"PIN_NOTE_UPDATE",payload:{pinId:e,pinNote:t}}}(e,null==s?void 0:s.data))}}},qdVQ:function(e,t,n){n.d(t,"a",(function(){return T}));var i=n("q1tI"),o=n("/MKj"),r=n("0rqM"),a=n("weYu"),s=n("1inl"),c=n("4dcN"),d=n("Ye/N"),l=n("eOdZ"),u=n("M1Uz"),h=n("v/Q4"),b=n("vVEi"),p=n("vvax"),f=n("U4JR"),g=n("mLS1"),m=n("oN2T"),j=n("pLLR"),v=n("nGHF"),O=n("n6mq"),x=n("ANjH"),y=n("nKUr");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class w extends i.Component{constructor(...e){super(...e),_(this,"state",{editMode:"main"}),_(this,"handleBoardLeave",()=>{const{board:e,onBoardLeave:t,onClose:n}=this.props;n(),t&&t(e.id)}),_(this,"handleArchive",()=>{const{archiveBoard:e,onClose:t}=this.props;e(),this.returnToMainEditMode(),t()}),_(this,"handleUnarchive",()=>{const{onClose:e,unarchiveBoard:t}=this.props;t(),this.returnToMainEditMode(),e()}),_(this,"returnToMainEditMode",()=>this.setState({editMode:"main"})),_(this,"handleShowArchiveModal",()=>this.setState({editMode:"confirmArchive"})),_(this,"handleShowUnarchiveModal",()=>this.setState({editMode:"confirmUnarchive"})),_(this,"handleShowMergeModal",()=>this.setState({editMode:"merge"})),_(this,"handleDelete",()=>{const{board:e,deleteBoard:t,onBoardDelete:n,onClose:i,toastManagerContext:o}=this.props;t().then(()=>{o.showToast(({onHide:e})=>Object(y.jsx)(u.a,{onHide:e,text:d.a._("Board deleted!","User deleted their board","User deleted their board")}))}),this.returnToMainEditMode(),i(),n&&n(e)}),_(this,"handleMerge",e=>{const{board:t,mergeToBoard:n,onBoardDelete:i,onClose:o}=this.props;Object(f.b)(7172,{objectId:t.id,merge_flow:"menu"}),n(e),o(),i&&i(t)}),_(this,"handleShowDeleteModal",()=>{c.a.trackEvent("board_delete","open_modal"),this.setState({editMode:"confirmDelete"})}),_(this,"handleSubmit",e=>{var t;const{viewer:n,board:i,updateBoard:o,onBoardPrivacyChange:r,onBoardUpdate:a,onClose:s}=this.props,c=this.props.board.id;if(n.id===(null===(t=i.owner)||void 0===t?void 0:t.id)){const t={id:c,...e};return o(t).then(()=>{i.privacy!==e.privacy&&r?r():a&&a(c,t),s()})}{const{allow_homefeed_recommendations:t,collab_board_email:n}=e;t!==i.allow_homefeed_recommendations&&o({id:c,allow_homefeed_recommendations:t});return l.a.create("BoardSettingsResource",{board_id:c,collab_board_email:n}).callUpdate({showError:!1}).then(()=>s()).catch(e=>{throw e.message})}})}render(){var e;const{board:t,categories:n,viewer:o,onCropChange:s,onClose:c,onCollaboratorInviteClick:l,onToggleFlyout:u}=this.props,{editMode:h}=this.state,b=d.a._("Edit your board","BoardEdit.Heading.Text","edit board heading"),f=o.isAuth&&o.id===(null===(e=t.owner)||void 0===e?void 0:e.id),m=!!!t.archived_by_me_at&&f,j=Object(y.jsx)(O.s,{alignItems:"center",justifyContent:"center",height:80,children:Object(y.jsx)(O.f,{marginStart:"auto",marginEnd:4,width:"66%",paddingY:4,children:Object(y.jsxs)(O.s,{alignItems:"center",justifyContent:"between",children:[Object(y.jsx)(O.u,{size:"md",children:b}),Object(y.jsx)(O.w,{accessibilityLabel:d.a._("Cancel change board cover","BoardEdit.icon.cancel","Cancel board edit"),icon:"cancel",iconColor:"darkGray",onClick:c})]})})});return Object(y.jsxs)(i.Fragment,{children:["main"===h&&Object(y.jsx)(g.a,{board:t,categories:n,currentUserIsOwner:f,gaCategory:"board_edit",handleBoardLeave:this.handleBoardLeave,isArchivable:!0,isDeletable:f,isEditable:f,onClose:c,onCropChange:s,onArchiveButtonClick:this.handleShowArchiveModal,onDeleteButtonClick:this.handleShowDeleteModal,onMergeButtonClick:m?this.handleShowMergeModal:void 0,onCollaboratorInviteClick:l,onSubmit:this.handleSubmit,onToggleFlyout:u,onUnarchiveButtonClick:this.handleShowUnarchiveModal,submitText:d.a._("Done","BoardEdit.BoardEdit","Submit button text"),title:j}),"merge"===h&&Object(y.jsx)(a.a,{onCancel:this.returnToMainEditMode,onSubmit:this.handleMerge,sourceBoardId:t.id}),"confirmDelete"===h&&Object(y.jsx)(r.a,{confirmButtonLabel:d.a._("Delete forever","Confirms the user wants to permanently delete the board","Confirms the user wants to permanently delete the board"),cancelButtonLabel:d.a._("Cancel"),message:d.a._("Once you delete a board and all its Pins, you can't undo it!"),onConfirm:this.handleDelete,onCancel:this.returnToMainEditMode}),"confirmArchive"===h&&Object(y.jsx)(r.a,{confirmButtonLabel:d.a._("Archive","button label on confirming board archive","button label on confirming board archive"),heading:d.a._("Archive this board?","modal heading for board archive confirmation","modal heading for board archive confirmation"),message:Object(p.b)(d.a._("If you archive {{ boardName }}, you won’t be able to save Pins to it. We’ll hide it from your profile and stop using it for recommendations. (Don’t worry: You can unarchive your board to undo this!)","BoardEdit","Confirmation message when archiving a board"),{boardName:Object(y.jsx)(O.ab,{inline:!0,weight:"bold",children:t.name},t.name)}),onCancel:this.returnToMainEditMode,onConfirm:this.handleArchive}),"confirmUnarchive"===h&&Object(y.jsx)(r.a,{confirmButtonLabel:d.a._("Unarchive","button label on confirming board unarchive","button label on confirming board unarchive"),heading:d.a._("Unarchive this board?","modal heading for board unarchive confirmation","modal heading for board unarchive confirmation"),message:Object(p.b)(d.a._("If you unarchive {{ boardName }}, it will show up on your profile and you'll be able to save new Pins to it."),{boardName:Object(y.jsx)(O.ab,{inline:!0,weight:"bold",children:t.name},t.name)}),onCancel:this.returnToMainEditMode,onConfirm:this.handleUnarchive})]})}}var C=Object(x.compose)(v.c,b.d,Object(o.connect)(null,(e,t)=>{const n=e=>()=>{const{board:n,onBoardArchiveChange:i,toastManagerContext:o}=t;i&&i(),o.showToast(({onHide:t})=>{var i;return Object(y.jsx)(u.a,{imageUrl:null!==(i=n.image_cover_url)&&void 0!==i?i:"",onHide:t,text:Object(p.b)(e?d.a._("Archived {{ boardName }}","Toast text on complete archiving board","Toast text on complete archiving board"):d.a._("Unarchived {{ boardName }}","Toast text on complete unarchiving board","Toast text on complete unarchiving board"),{boardName:n.name}).join("")})})};return{archiveBoard:()=>e(Object(m.a)(t.board.id)).then(n(!0)),deleteBoard:()=>e(Object(m.h)(t.board.id)),mergeToBoard:n=>e(Object(m.k)(t.board.id,n.id)).then(()=>{t.showBlockingActionToast({actionType:"merge",board:n})}).catch(e=>{s.a.showError(e.message||d.a._("Failed to merge boards","Error message when failed to merge boards","Error message when failed to merge boards"))}),updateBoard:t=>e(Object(m.n)(t)),unarchiveBoard:()=>e(Object(m.m)(t.board.id)).then(n(!1))}}))((function(e){return Object(y.jsx)(w,{...e,requestContext:Object(j.d)(),viewer:Object(h.a)()})})),S=n("TgLd"),I=n("w70y");function T({boardId:e,coverImageHeight:t,coverImageWidth:n,onBoardArchiveChange:r,onBoardPrivacyChange:a,onBoardLeave:s,onBoardDelete:c,onBoardUpdate:l,onClose:u,onCollaboratorInviteClick:h,onCropChange:b}){const[p,f]=Object(i.useState)(!1),{data:g}=Object(I.a)({name:"CategoriesResource",allowStale:!1});Object(I.a)({name:"BoardResource",options:{field_set_key:"edit",board_id:e},allowStale:!1});const m=Object(o.useSelector)(({boards:t})=>t.content[e]);if(!!(!m||!g))return Object(y.jsx)(S.b,{accessibilityModalLabel:d.a._("Board edit","BoardEdit.BoardEditModal","Accessibility label on modal"),onDismiss:u,size:"sm",children:Object(y.jsx)(O.f,{padding:12,children:Object(y.jsx)(O.T,{accessibilityLabel:d.a._("Board edit","BoardEdit.BoardEditModal","Accessibility label on loading spinner"),show:!0})})});return Object(y.jsx)(C,{board:m,categories:g,coverImageHeight:t,coverImageWidth:n,onBoardArchiveChange:r,onBoardPrivacyChange:a,onBoardLeave:s,onBoardDelete:c,onBoardUpdate:l,onClose:()=>{p||u()},onCollaboratorInviteClick:h,onCropChange:b,onToggleFlyout:()=>f(!p)})}},qnp8:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("Ye/N"),o=n("EC51"),r=n("M1Uz"),a=n("vvax"),s=n("n6mq"),c=n("nKUr");function d({boardName:e,boardUrl:t,isBoardlessPin:n,newPin:d,onChangeButtonClick:l,onHide:u,onUndo:h,pinImageUrl:b}){const p=Object(c.jsx)(s.f,{color:"lightGray",display:"flex",height:48,overflow:"hidden",width:48,children:Object(c.jsx)(s.f,{alignItems:"center",justifyContent:"center",padding:3,children:Object(c.jsx)(s.v,{accessibilityLabel:i.a._("Saved to profile thumbnail","PostSavedPinToast.thumbnail.accessibilityLabel","Thumbnail for saved to profile."),color:"darkGray",icon:"history",size:24})})}),f=(!!l||!!h)&&Object(c.jsx)(s.g,{inline:!0,text:d&&n&&l?i.a._("Change","PostSavedPinToast.ChangeButton","Change saved pin to a different destination"):i.a._("Undo","PostSavedPinToast.UndoButton","Undo Saved Pin"),size:"lg",onClick:d&&n&&l?()=>l(d):h},"button-key");return Object(c.jsx)(r.a,{button:f,duration:n?6e3:3e3,iconThumbnail:n?p:void 0,imageUrl:b,onHide:u,text:Object(c.jsx)(s.ab,{size:"md",truncate:!0,children:Object(a.b)(i.a._("Saved to {{ destination }}","PostSavedPinToast.SavedToBoardLabel","Saved to label for better save"),{destination:Object(c.jsx)(o.a,{href:n?"/me/":null!=t?t:"",children:Object(c.jsx)(s.ab,{size:"md",weight:"bold",truncate:!0,children:e},"PostSavedPinToastBoardName")})})})})}},qpbZ:function(e,t,n){function i(e,t,n){return e.split(n).map(e=>{if(e.match(n)){const n=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,n))return t[n]}return e})}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));const o=/(\{\{\s*\w+\s*\}\})/g;function r(e,t){return i(e,t,o)}function a(e,t){return i(e,t,o).join("")}const s=/(\{\s*\w+\s*\})/g;function c(e,t){return i(e,t,s)}},qyR9:function(e,t,n){n.d(t,"a",(function(){return m}));var i=n("q1tI"),o=n("jdx6"),r=n("gONw"),a=n("Ye/N"),s=n("gdcG"),c=n("n6mq"),d=n("nKUr");var l=Object(s.a)((function(e){const{buttonLabel:t,isHovering:n,isRowItem:i,hasHoverState:o,hoverHandlers:r,name:s,onClick:l}=e,u=s||t||a.a._("Create board");return Object(d.jsx)(c.Z,{onMouseEnter:r.onMouseOver,onMouseLeave:r.onMouseLeave,onTap:l,children:Object(d.jsxs)(c.f,{alignItems:"center",color:o&&n?"lightGray":"white",display:"flex",flex:i?"shrink":"none",height:64,width:"100%",children:[Object(d.jsx)(c.f,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton",children:Object(d.jsx)(c.v,{accessibilityLabel:a.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})}),s?Object(d.jsx)(c.f,{margin:1,children:Object(d.jsxs)(c.ab,{inline:!0,overflow:"normal",children:[" ",a.a._("Create: ")," "]})}):null,Object(d.jsxs)(c.ab,{align:"center",inline:!0,truncate:!0,weight:"bold",children:[" ",u," "]})]})})})),u=n("9QW3"),h=n("NdQN"),b=n("IBrh"),p=n("seP0");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends i.Component{constructor(...e){super(...e),f(this,"state",{searchQuery:""}),f(this,"handleSelectItem",e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})}),f(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),f(this,"renderSectionHeader",(e,t)=>e.title?Object(d.jsxs)(c.f,{children:[t>0&&Object(d.jsx)(c.p,{}),Object(d.jsx)(c.f,{paddingX:3,paddingY:1,children:Object(d.jsx)(c.ab,{size:"md",children:e.title})})]}):null),f(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:i,isSelectMode:r,disabledRowId:a}=this.props,{searchQuery:s}=this.state,{inSectionSelection:c=!1}=n,l=i&&i.board===e.id?i&&i.state:null,u="board_section"===e.type;return Object(d.jsx)(o.a,{disabled:e.id===a&&c,isSection:u,isSelectMode:r,isWithinSectionPicker:c,item:e,saveState:l,searchQuery:s,selected:t})})}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:i,isLoaded:o,onCreate:s,pinId:p}=this.props;if(o){const{searchQuery:o}=this.state,a=i(o);return this.indexManager=new u.a(a.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),Object(d.jsxs)(c.f,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}},children:[!n&&Object(d.jsxs)(c.f,{children:[Object(d.jsx)(c.f,{paddingX:3,marginBottom:4,marginTop:1,children:Object(d.jsx)(h.a,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:o})}),Object(d.jsx)(c.p,{})]}),Object(d.jsx)(b.a,{disabled:!!e,grow:!n&&!o,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:a}),Object(d.jsx)(c.p,{}),s&&Object(d.jsx)(l,{buttonLabel:t,hasHoverState:!0,name:o,onClick:()=>s(o)}),n&&s&&p&&Object(d.jsx)(r.a,{onBoardSelected:s,pinId:p})]})}return Object(d.jsx)(c.f,{paddingY:5,children:Object(d.jsx)(c.T,{accessibilityLabel:a.a._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0})})}}function m(e){const t=Object(p.c)();return Object(d.jsx)(g,{...e,boardPickerStopwatch:t})}},qyXF:function(e,t,n){n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n("Ye/N"),o=n("vvax");const r=()=>i.a._("{{ first }}","Generic message that lists 1 item","Generic message that lists 1 item (ex: Stevie)"),a=()=>i.a._("{{ first }} and {{ second }}","Generic message that lists 2 items","Generic message that lists 2 items (ex: Stevie and Michael)"),s=()=>i.a._("{{ first }}, {{ second }} and {{ third }}","Generic message that lists 3 items","Generic message that lists 3 items (ex: Stevie, Michael and Cyndi)"),c=()=>i.a._("{{ first }}, {{ second }}, {{ third }} and {{ fourth }}","Generic message that lists 4 items","Generic message that lists 4 items (ex: Stevie, Michael, Cyndi and Bob)"),d=()=>i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}","Generic message that lists 5 items","Generic message that lists 5 items (ex: Stevie, Michael, Cyndi, Bob and Bruce)"),l=()=>i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}","Generic message that lists 6 items","Generic message that lists 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and Lionel)");function u(e){const t={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return Object(o.b)(r(),t);case 2:return Object(o.b)(a(),t);case 3:return Object(o.b)(s(),t);case 4:return Object(o.b)(c(),t);case 5:return Object(o.b)(d(),t);case 6:return Object(o.b)(l(),t);default:return Object(o.b)(i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others","Generic message that lists more than 6 items","Generic message that lists more than 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and 2 others)"),t)}}function h(e){const t={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return Object(o.b)(r(),t);case 2:return Object(o.b)(a(),t);case 3:return Object(o.b)(s(),t);case 4:return Object(o.b)(c(),t);case 5:return Object(o.b)(d(),t);case 6:return Object(o.b)(l(),t);case 7:return Object(o.b)(i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}","Generic message that lists 7 items","Generic message that lists 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and Tina)"),t);default:return Object(o.b)(i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others","Generic message that lists more than 7 items","Generic message that lists more than 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and 2 others)"),t)}}},r8eU:function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n("QLaP"),o=n.n(i);class r{constructor(e,t){o()(e,"You must pass a requestContext to check an Experiment"),o()(t,"You must pass the name of the experiment to check"),this.requestContext=e,this.experimentName=t.toLowerCase()}_getGroup(e){return e?this.requestContext.experiments.v2ActivateExperiment(this.experimentName)||"":this.requestContext.experiments.v2GetGroup(this.experimentName)||""}}class a extends r{getGroup(e=!1){return this._getGroup(e)}}class s extends r{_isTreatment(e){return e.startsWith("enabled")||e.startsWith("employee")}enabled(){return this._isTreatment(this._getGroup(!0))}enabledWithNoActivation(){return this._isTreatment(this._getGroup(!1))}}},r9FX:function(e,t,n){n.d(t,"a",(function(){return f}));var i=n("q1tI"),o=n("ihsa"),r=n("V08O"),a=n("n6mq"),s=n("nKUr");const c=["imageFadeOut {\n    0% { opacity: 1 }\n    60% { opacity: 1 }\n    100% { opacity: 0 }\n}"],d={imageFadeOut:"imageFadeOut 0.9s both"};function l({backgroundColor:e,cyclingImages:t,imgLabel:n,imageHeight:l,imageWidth:u}){const[h,b]=Object(i.useState)(0);Object(i.useEffect)(()=>{const e=setInterval(()=>{b(e=>e+1)},900);return()=>clearInterval(e)},[]);const p=h%t.length,f=(h+1)%t.length;return((e,t,n,i,l,u,h)=>Object(s.jsxs)(a.f,{position:"relative",width:l,height:i,children:[Object(s.jsx)(a.f,{position:"absolute",top:!0,left:!0,width:l,height:i,children:Object(s.jsx)(a.x,{alt:u,color:h,fit:"cover",naturalHeight:n.height,naturalWidth:n.width,src:n.url,children:Object(s.jsx)(a.f,{color:"darkGray",opacity:.3,height:"100%"})})}),Object(s.jsxs)(a.f,{position:"absolute",top:!0,left:!0,width:l,height:i,dangerouslySetInlineStyle:{__style:{animation:d.imageFadeOut,WebkitAnimation:d.imageFadeOut}},children:[Object(s.jsx)(o.a,{unsafeCSS:Object(r.a)(c)}),Object(s.jsx)(a.x,{alt:u,color:h,fit:"cover",naturalHeight:t.height,naturalWidth:t.width,src:t.url,children:Object(s.jsx)(a.f,{color:"darkGray",opacity:.3,height:"100%"})})]})]},e))(h,t[p],t[f],l,u,n,e)}var u=n("yaUg"),h=n("Ye/N");const b={xl_144:{imageWidth:144,imageHeight:144,fontSize:"lg"},md_120:{imageWidth:120,imageHeight:120,fontSize:"md"}},p=b.xl_144;function f({clickHandler:e,index:t,interest:n,isSelected:o,isTopicEdu:r,size:c,totalInterests:d}){const{fontSize:f,imageWidth:g,imageHeight:m}=b[c]||p,{background_color:j,cycling_images:v,images:O,name:x}=n,y=n.label?String(n.label):x,_=O["400x"],w=v?v.map(e=>e["400x"]):[],[C,S]=Object(i.useState)(!1),[I,T]=Object(i.useState)(!1),E=d&&t?Object(u.a)(h.a._("{{ interestName }}, list {{ interestsPosition }} of {{ interestsCount }}","nux.interestStep.interestForLists","Label for interest card with description for lists"),{interestName:n.name,interestsPosition:t.toString(),interestsCount:d.toString()}):Object(u.a)(h.a._("{{ interestName }} interest card","nux.interestStep.interest","Label for interest card"),{interestName:n.name});return((e,t,n,i)=>{const o=e?t-8:t,r=e?n-8:n,c=e?14:16,d=e?-1:0,l=e?{borderColor:"black"}:{borderStyle:"none"};return Object(s.jsx)(a.f,{borderStyle:e?"lg":"none",dangerouslySetInlineStyle:{__style:l},width:t,height:n,rounding:4,color:"white",display:"flex",justifyContent:"center",alignItems:"center",children:Object(s.jsx)(a.f,{width:o,height:r,dangerouslySetInlineStyle:{__style:{borderRadius:c}},overflow:"hidden",children:Object(s.jsx)(a.f,{margin:d,children:i})})})})(!r&&(o||C||I),g,m,Object(s.jsx)(a.C,{rounding:4,children:Object(s.jsx)(a.f,{rounding:4,position:"relative",display:"inlineBlock",width:g,height:m,"data-test-id":"nux-picker-topic",children:Object(s.jsxs)(a.Z,{accessibilityLabel:E,fullHeight:!0,onBlur:()=>T(!1),onFocus:()=>T(!0),onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),onTap:e,children:[w.length>0&&(C||I)?Object(s.jsx)(l,{backgroundColor:j,cyclingImages:w,imageHeight:m,imageWidth:g,imgLabel:y}):Object(s.jsx)(a.x,{alt:y,color:j,fit:"cover",naturalHeight:_.height,naturalWidth:_.width,src:_.url,children:Object(s.jsx)(a.f,{color:"darkGray",opacity:.3,height:"100%"})}),o&&Object(s.jsxs)(a.f,{height:"100%",width:"100%",position:"absolute",top:!0,children:[Object(s.jsx)(a.f,{color:"darkGray",opacity:.7,height:"100%"}),Object(s.jsx)(a.f,{position:"absolute",right:!0,marginTop:2,marginEnd:2,marginStart:2,top:!0,children:Object(s.jsx)(a.k,{checked:!0,id:"selectedTopic",onChange:()=>{}})})]}),Object(s.jsx)(a.f,{position:"absolute",bottom:!0,left:!0,right:!0,margin:2,"data-test-id":"nux-picker-topic-label",children:Object(s.jsx)(a.ab,{align:"start",color:"white",size:f,weight:"bold",overflow:"breakWord",children:x})})]})})}))}},rV1A:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("7nh8");t.default=function(e){return function(){if(e.getMonitor().isDragging())return{type:i.PUBLISH_DRAG_SOURCE}}}},rVUJ:function(e,t,n){var i,o,r,a=n("q1tI"),s=n("/MKj"),c=n("BcvT"),d=n("n6mq"),l=n("nKUr");class u extends a.Component{renderPulsar(){const{anchor:e,handleComplete:t,handlePulsarCompleteOnHover:n,zIndex:i}=this.props;return Object(l.jsx)(c.a,{anchor:e,onTouch:t,onMouseEnter:n,zIndex:i})}renderFlyout(){const{anchor:e,overflow:t,tooltip:n,handleDismiss:i,handleComplete:o}=this.props;if(!n)return null;const{cancelButtonText:r,confirmButtonText:a,mainText:s,idealDirection:c="down"}=n,u=r&&i&&a&&o;return Object(l.jsx)(d.J,{anchor:e,color:"blue",idealDirection:c,onDismiss:i,shouldFocus:!1,showCaret:!0,size:"flexible",children:Object(l.jsxs)(d.f,{maxWidth:284,padding:3,width:"max-content",children:[Object(l.jsx)(d.ab,{color:"white",overflow:t,weight:"bold",children:s}),u?Object(l.jsxs)(d.f,{marginTop:2,display:"flex",alignItems:"center",children:[Object(l.jsx)(d.f,{column:6,marginEnd:1,children:Object(l.jsx)(d.g,{color:"transparentWhiteText",onClick:e=>i(e),size:"md",text:String(r)})}),Object(l.jsx)(d.f,{column:6,children:Object(l.jsx)(d.g,{color:"white",size:"md",text:String(a),onClick:o})})]}):null]})})}render(){const{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}r={overflow:"breakWord"},(o="defaultProps")in(i=u)?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r;var h=n("NdXn"),b=n("AAEI"),p=n("gC5q");t.a=({anchor:e,anchorElementRef:t,children:n,containerBoxConfig:i,experience:o,isHidden:r,onCompleteClick:c,overflow:f,zIndex:g})=>{var m;const j=(({anchor:e,anchorExperiences:t,passedExperience:n})=>n||(t?t[e]:null))({anchor:e,anchorExperiences:Object(s.useSelector)(({experiences:e})=>null==e?void 0:e.anchorExperiences),passedExperience:o}),v=Object(b.a)(null==j?void 0:j.placement_id),O=(null==j||null===(m=j.display_data)||void 0===m?void 0:m.delay)||0,[x,y]=Object(a.useState)(!!O);if(Object(a.useEffect)(()=>{if(O>0&&x){const e=setTimeout(()=>{y(!1)});return()=>clearTimeout(e)}return()=>{}},[O,x]),Object(a.useEffect)(()=>{!x&&j&&v.viewExperience(j.placement_id,j.experience_id)},[x,j]),!j||x||r)return a.Children.only(n);const _=(e=>{const{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),Object(p.a)(h.a,!0)(t)})(j),w=()=>{var e;null!==(e=j.display_data)&&void 0!==e&&e.complete_on_hover&&v.completeExperience(j.placement_id,j.experience_id)};return Object(l.jsxs)(d.f,{position:"relative",height:null==i?void 0:i.height,display:null==i?void 0:i.display,children:[Object(l.jsx)(d.Z,{onMouseEnter:w,onTap:()=>{c&&c(),_.skipComplete||v.completeExperience(j.placement_id,j.experience_id)},children:a.Children.only(n)}),Object(l.jsx)(u,{anchor:t||null,handlePulsarCompleteOnHover:w,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),v.dismissExperience(j.placement_id,j.experience_id)},overflow:f,pulserOnly:!!_.pulserOnly,tooltip:_.tooltip,tooltipOnly:!!_.tooltipOnly,zIndex:g})]})}},rYoy:function(e,t,n){var i=n("E8d4");t.a=i.a},"rg+c":function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("q1tI"),o=n("P9b8"),r=n("ANjH"),a=n("nKUr");const s={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem"};const c={hover:({index:e,onDragHover:t},n,i)=>{t(e,function(e,t){const n=t.targetEl;if(!(n&&n instanceof HTMLElement))return null;const{x:i,y:o}=e.getClientOffset(),{left:r,right:a,top:s,bottom:c,width:d,height:l}=n.getBoundingClientRect();return{positionRelativeToCenter:{x:i-(r+a)/2,y:o-(s+c)/2},boundingBox:{width:d,height:l}}}(n,i))}};class d extends i.Component{render(){const{children:e,connectDragSource:t,connectDropTarget:n,isDragging:i,isDraggingInternal:o}=this.props;return t(n(Object(a.jsx)("div",{ref:e=>this.targetEl=e,style:{opacity:i||o?0:1},children:e})))}}t.b=Object(r.compose)(Object(o.DropTarget)(e=>e.type,c,e=>({connectDropTarget:e.dropTarget()})),Object(o.DragSource)(e=>e.type,{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},(e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.isDragging()})))(d)},rrvb:function(e,t,n){var i=n("q1tI"),o=n("Ye/N"),r=n("9QW3"),a=n("NdQN"),s=n("IBrh"),c=n("gdcG"),d=n("n6mq"),l=n("nKUr");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(...e){super(...e),u(this,"state",{showFlyout:!1}),u(this,"setContainerRef",e=>{this.containerRef=e}),u(this,"handleCreate",()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()}),u(this,"handleSelectItem",e=>{this.hideFlyout();const{onSelect:t,onCreate:n}=this.props;e?t(e):n&&n()}),u(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),u(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),u(this,"hideFlyout",()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:n,onMouseLeave:i},isHovering:c,isStoryPin:u,onCreate:h,onSearchQueryUpdate:b,renderRow:p,searchQuery:f,sections:g,createBtnDisabled:m}=this.props,{showFlyout:j}=this.state;this.indexManager=new r.a(g.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const v=!f.trim()||!!m;return Object(l.jsxs)("div",{ref:this.setContainerRef,style:{...u?{flex:"grow"}:{}},children:[Object(l.jsx)(d.Z,{fullWidth:!!u,onMouseEnter:n,onMouseLeave:i,onTap:this.handleDropdownTouch,rounding:2,children:Object(l.jsxs)(d.f,{alignItems:"center",color:c?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:u?4:3,rounding:u?4:2,children:[Object(l.jsx)(d.f,{display:"flex",flex:"grow",children:Object(l.jsx)(d.ab,{weight:"bold",children:e})}),Object(l.jsx)(d.v,{accessibilityLabel:"",color:"darkGray",icon:"arrow-down",size:14})]})}),j&&Object(l.jsx)(d.f,{position:"relative",children:Object(l.jsxs)(d.f,{borderStyle:"sm",color:"white",dangerouslySetInlineStyle:{__style:{zIndex:1}},direction:"column",display:"flex",overflow:"hidden",position:"absolute",rounding:u?4:2,width:"100%",children:[Object(l.jsx)(d.f,{children:Object(l.jsxs)(d.f,{display:"flex",marginStart:-1,marginEnd:-1,padding:2,children:[Object(l.jsx)(d.f,{display:"flex",flex:"grow",paddingX:1,children:Object(l.jsx)(a.a,{hideIcon:!0,indexManager:this.indexManager,onChange:b,value:f})}),h&&Object(l.jsx)(d.f,{paddingX:1,children:Object(l.jsx)(d.g,{disabled:v,inline:!0,onClick:this.handleCreate,text:o.a._("Create","board or section dropdown create button","board or section dropdown create button")})})]})}),Object(l.jsx)(s.a,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:p,sections:g})]})})]})}}t.a=Object(c.a)(h)},"s6a/":function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("n6mq"),o=n("nKUr");function r({children:e,label:t}){return Object(o.jsxs)(i.f,{marginTop:2,paddingY:2,role:"listitem",children:[Object(o.jsx)(i.f,{paddingX:2,children:Object(o.jsx)(i.ab,{size:"sm",children:t})}),Object(o.jsx)(i.f,{marginTop:2,role:"list",children:e})]})}},s7xj:function(e,t,n){n.d(t,"a",(function(){return u}));var i=n("xweI"),o=n.n(i),r=n("yweb"),a=n("v/Q4"),s=n("n6mq"),c=n("qpbZ"),d=n("nKUr");function l(e){var t,n;const i=null!==(t=e.imageMediumUrl)&&void 0!==t?t:e.image_medium_url;return{name:null!==(n=e.fullName)&&void 0!==n?n:e.full_name,src:"https://s.pinimg.com/images/user/default_75.png"===i?void 0:i}}function u({board:e,forceViewer:t,isCompact:n,ownerOnly:i}){const u=Object(r.c)(),h=Object(a.a)(),b=i?[l(e.owner)]:function(e,t,n){const{collaborated_by_me:i,collaborating_users:r=[],owner:a}=e,s=[a];if(i||n){const e=r.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){const t=r.splice(e,1)[0];s.push(t)}else s.push(t)}const c=o()(r,"full_name");return[...s,...c]}(e,h,t).map(l),p=b.slice(0,3).map(e=>e.name);let f="";switch(b.length){case 3:f=Object(c.c)(""+u._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames"),{first:""+p[0],second:""+p[1],last:""+p[2]});break;case 2:f=Object(c.c)(""+u._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames."),{first:""+p[0],second:""+p[1]});break;default:f=p.join(", ")}const g=b.length>3?Object(c.c)(", "+u.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",b.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:f,leftCount:""+(b.length-3)}):Object(c.c)(", "+u._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators"),{userNames:f});return Object(d.jsx)(s.c,{accessibilityLabel:g,collaborators:b,size:n?"xs":"sm"})}},sAMb:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("mc7v"),o=n("7nh8"),r=n("QLaP");t.default=function(e){return function(t,n){var a=(void 0===n?{}:n).clientOffset;!function(e){r(Array.isArray(e),"Expected targetIds to be an array.")}(t);var s=t.slice(0),c=e.getMonitor(),d=e.getRegistry();return function(e,t,n){r(t.isDragging(),"Cannot call hover while not dragging."),r(!t.didDrop(),"Cannot call hover after drop.");for(var i=0;i<e.length;i++){var o=e[i];r(e.lastIndexOf(o)===i,"Expected targetIds to be unique in the passed array.");var a=n.getTarget(o);r(a,"Expected targetIds to be registered.")}}(s,c,d),function(e,t,n){for(var o=e.length-1;o>=0;o--){var r=e[o],a=t.getTargetType(r);i.default(a,n)||e.splice(o,1)}}(s,d,c.getItemType()),function(e,t,n){for(var i=0,o=e;i<o.length;i++){var r=o[i];n.getTarget(r).hover(t,r)}}(s,c,d),{type:o.HOVER,payload:{targetIds:s,clientOffset:a||null}}}}},sEfC:function(e,t,n){var i=n("GoyQ"),o=n("QIyF"),r=n("tLB3"),a=Math.max,s=Math.min;e.exports=function(e,t,n){var c,d,l,u,h,b,p=0,f=!1,g=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function j(t){var n=c,i=d;return c=d=void 0,p=t,u=e.apply(i,n)}function v(e){return p=e,h=setTimeout(x,t),f?j(e):u}function O(e){var n=e-b;return void 0===b||n>=t||n<0||g&&e-p>=l}function x(){var e=o();if(O(e))return y(e);h=setTimeout(x,function(e){var n=t-(e-b);return g?s(n,l-(e-p)):n}(e))}function y(e){return h=void 0,m&&c?j(e):(c=d=void 0,u)}function _(){var e=o(),n=O(e);if(c=arguments,d=this,b=e,n){if(void 0===h)return v(b);if(g)return clearTimeout(h),h=setTimeout(x,t),j(b)}return void 0===h&&(h=setTimeout(x,t)),u}return t=r(t)||0,i(n)&&(f=!!n.leading,l=(g="maxWait"in n)?a(r(n.maxWait)||0,t):l,m="trailing"in n?!!n.trailing:m),_.cancel=function(){void 0!==h&&clearTimeout(h),p=0,c=b=d=h=void 0},_.flush=function(){return void 0===h?u:y(o())},_}},sErn:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("La7j");function o(e){e||(e={});const{active_experiments:t,triggerable_experiments:n,batch_exp:o}=e;return{experiments:new i.a(t,n,o)}}},sGxw:function(e,t,n){function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("jirY")),i(n("z3qU")),i(n("UJTY"))},"sH+O":function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const o=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e.match(n)||!t.match(n))return null;const i=e.split("."),o=t.split("."),r=Math.max(i.length,o.length);for(let a=0;a<r;a+=1){const e=a<i.length?parseInt(i[a],10):0,t=a<o.length?parseInt(o[a],10):0;if(e<t)return-1;if(e>t)return 1}return 0};class r{constructor(e,t,n){i(this,"start",Date.now()),i(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"!=typeof window&&(this.intervalId=window.setInterval(()=>{const e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume())}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;const e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}},sZWH:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("S8b/"),o=n("PRGv");t.getEmptyImage=o.default;var r=n("QSJg");t.NativeTypes=r,t.default=function(e){return new i.default(e)}},seP0:function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d}));var i=n("FZ8N"),o=n("F4HH");const{Provider:r,useHook:a}=Object(o.a)({name:"board_picker",v2LoggerMetricName:16,sampleRate:i.b?1:.1}),s=(e,t)=>{let n="unknown";null!=t&&t.includes("pin/")?n="PinCloseup":"/"===t?n="HomeFeed":"PinBookMarklet"===t&&(n="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",n,"STRING")},c=r,d=a},shej:function(e,t,n){function i(){return{type:"SHOW_SECTION_TOOLTIP"}}function o(){return{type:"HIDE_SECTION_TOOLTIP"}}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}))},slCJ:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("q1tI"),s=n("SFi7"),c=n("jxrL"),d=n("dJ9d"),l=(n("QWfI"),n("2S0S")),u=n("qFZT"),h=n("Gytx");t.default=function(e){var t=e.DecoratedComponent,n=e.createHandler,i=e.createMonitor,b=e.createConnector,p=e.registerHandler,f=e.containerDisplayName,g=e.getType,m=e.collect,j=e.options.arePropsEqual,v=void 0===j?h:j,O=t,x=t.displayName||t.name||"Component",y=function(e){function u(t){var n=e.call(this,t)||this;return n.decoratedRef=a.createRef(),n.handleChange=function(){var e=n.getCurrentState();h(e,n.state)||n.setState(e)},n.disposable=new c.SerialDisposable,n.receiveProps(t),n.dispose(),n}return o(u,e),u.prototype.getHandlerId=function(){return this.handlerId},u.prototype.getDecoratedComponentInstance=function(){return l(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current},u.prototype.shouldComponentUpdate=function(e,t){return!v(e,this.props)||!h(t,this.state)},u.prototype.componentDidMount=function(){this.disposable=new c.SerialDisposable,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()},u.prototype.componentDidUpdate=function(e){v(this.props,e)||(this.receiveProps(this.props),this.handleChange())},u.prototype.componentWillUnmount=function(){this.dispose()},u.prototype.receiveProps=function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(g(e)))},u.prototype.receiveType=function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=p(e,this.handler,this.manager),n=t[0],i=t[1];this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new c.CompositeDisposable(new c.Disposable(o),new c.Disposable(i)))}},u.prototype.dispose=function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)},u.prototype.getCurrentState=function(){return this.handlerConnector?m(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}},u.prototype.render=function(){var e=this;return a.createElement(s.Consumer,null,(function(t){var n=t.dragDropManager;return e.receiveDragDropManager(n),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame((function(){return e.handlerConnector.reconnect()})),a.createElement(O,r({},e.props,e.getCurrentState(),{ref:d.isRefable(O)?e.decoratedRef:null}))}))},u.prototype.receiveDragDropManager=function(e){void 0===this.manager&&(l(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",x,x),void 0!==e&&(this.manager=e,this.handlerMonitor=i(e),this.handlerConnector=b(e.getBackend()),this.handler=n(this.handlerMonitor,this.decoratedRef)))},u.DecoratedComponent=t,u.displayName=f+"("+x+")",u}(a.Component);return u(y,t)}},sxkF:function(e,t,n){n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return f}));var i=n("q1tI"),o=n("Ye/N"),r=n("QLqj"),a=n("mHb8"),s=n("n6mq"),c=n("U4JR"),d=n("nKUr");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u="GroupBoardContentViewSwitcher_Settings",h=e=>e<=500,b=Object.freeze({}),p={custom:11566,newest:11564,oldest:11565,most_comments:11563,most_reactions:11562,by_pinner:11561},f=(e,t)=>{const n=r.b.localStorage.getItem(u)||b;return(e.isAuth&&n[e.id]||{})[t.id]||null};class g extends i.Component{constructor(...e){super(...e),l(this,"handleChange",({event:e,value:t})=>{const n=t,{onChange:i,viewer:o,board:s}=this.props;e.stopPropagation(),window.scrollTo({top:0,left:0,behavior:"smooth"}),((e,t,n)=>{if(!e.isAuth)return;const i=r.b.localStorage.getItem(u)||b,o=i[e.id]||{},a={...i,[e.id]:{...o,[t.id]:n}};r.b.localStorage.setItem(u,a)})(o,s,n),i(n),Object(c.b)(101,{view:5,viewParameter:Object(a.a)(o,s),component:13475,element:p[n],board_id:s.id})}),l(this,"logDropdownClick",()=>{const{board:e,viewer:t}=this.props;Object(c.b)(101,{view:5,viewParameter:Object(a.a)(t,e),component:13486,element:11567,board_id:e.id})}),l(this,"handleKeyPress",e=>{const{charCode:t=0}=e;32===t&&(e.preventDefault(),this.logDropdownClick())})}render(){const{currentView:e}=this.props,t=[{value:"custom",label:o.a._("Custom","Option for users to filter their Pins in a custom order (as it currently is)","Option for users to filter their Pins in a custom order (as it currently is)")},{value:"most_reactions",label:o.a._("Most reactions","Option for users to filter their Pins by the most reactions","Option for users to filter their Pins by the most reactions")}];return Object(d.jsx)("div",{role:"listbox",tabIndex:0,onClick:this.logDropdownClick,onKeyPress:this.handleKeyPress,children:Object(d.jsx)(s.R,{id:"gbFilterSelectlist",onChange:this.handleChange,options:t,size:"lg",value:e})})}}t.a=g},t3tn:function(e,t,n){function i(e){return{type:"UPDATE_PROFILE_BOARD_VIEW",payload:{profileBoardView:e}}}function o(e){return{type:"UPDATE_BOARD_SORT_OPTION",payload:{updatedBoardOrder:e}}}function r(e){return{type:"UPDATE_BOARD_PIN_VIEW",payload:{boardPinView:e}}}function a(e){return{type:"UPDATE_PROFILE_PIN_VIEW",payload:{profilePinView:e}}}n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a}))},t9Ac:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("6A0I"),o=n("Ye/N"),r=n("TgLd"),a=n("n6mq"),s=n("nKUr");function c(e){const{onSectionCreate:t,onClose:n,selectedBoard:c,useLayer:d=!0}=e,l=d?r.b:a.G,u=Object(s.jsx)(a.s,{alignItems:"center",maxHeight:80,children:Object(s.jsx)(a.f,{marginStart:"auto",padding:4,width:"66%",children:Object(s.jsxs)(a.s,{justifyContent:"between",children:[Object(s.jsx)(a.u,{size:"md",children:o.a._("Add section","Modal header for adding a section","Modal header for adding a section")}),Object(s.jsx)(a.w,{icon:"cancel",iconColor:"darkGray",size:"lg",accessibilityLabel:o.a._("Cancel section create","CreateSection.Modal.Icon","cancel icon for create section modal"),onClick:n})]})})});return Object(s.jsx)(l,{accessibilityModalLabel:o.a._("Add a section to the board","modal to add a section to a board","modal to add a section to a board"),heading:u,onDismiss:n,size:"sm",children:Object(s.jsx)(a.f,{display:"flex",color:"white",rounding:2,children:Object(s.jsx)(i.a,{board:c,completeCreateSectionAction:t,onClearModal:n,positionRelative:!0,showTitle:!1})})})}},tEMl:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("MCs0"),o=(n("QWfI"),n("2S0S")),r=["canDrop","hover","drop"],a=function(){function e(e,t,n){this.spec=e,this.monitor=t,this.ref=n,this.props=null}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.receiveMonitor=function(e){this.monitor=e},e.prototype.canDrop=function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)},e.prototype.hover=function(){this.spec.hover&&this.spec.hover(this.props,this.monitor,i.getDecoratedComponent(this.ref))},e.prototype.drop=function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(r.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',r.join(", "),t),o("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])})),function(t,n){return new a(e,t,n)}}},tLB3:function(e,t,n){var i=n("jXQH"),o=n("GoyQ"),r=n("/9aa"),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=s.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):a.test(e)?NaN:+e}},tvWU:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("+k3R"),o=n("slCJ"),r=n("TPjH"),a=n("tEMl"),s=n("E3gc"),c=n("bY+3"),d=n("IRZy"),l=n("QWfI"),u=n("2S0S");t.default=function(e,t,n,h){void 0===h&&(h={}),i.default("DropTarget","type, spec, collect[, options]",e,t,n,h);var b=e;"function"!=typeof e&&(u(s.default(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),b=function(){return e}),u(l.isPlainObject(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var p=a.default(t);return u("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),u(l.isPlainObject(h),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),function(e){return o.default({containerDisplayName:"DropTarget",createHandler:p,registerHandler:r.default,createMonitor:function(e){return new c.default(e)},createConnector:function(e){return new d.default(e)},DecoratedComponent:e,getType:b,collect:n,options:h})}}},uCRx:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("QLaP");t.validateSourceContract=function(e){i("function"==typeof e.canDrag,"Expected canDrag to be a function."),i("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),i("function"==typeof e.endDrag,"Expected endDrag to be a function.")},t.validateTargetContract=function(e){i("function"==typeof e.canDrop,"Expected canDrop to be a function."),i("function"==typeof e.hover,"Expected hover to be a function."),i("function"==typeof e.drop,"Expected beginDrag to be a function.")},t.validateType=function e(t,n){n&&Array.isArray(t)?t.forEach((function(t){return e(t,!1)})):i("string"==typeof t||"symbol"==typeof t,n?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}},uVIr:function(e,t,n){function i(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,"a",(function(){return i}))},"ut/Y":function(e,t,n){var i=n("ZCpW"),o=n("GDhZ"),r=n("zZ0H"),a=n("Z0cm"),s=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?a(e)?o(e[0],e[1]):i(e):s(e)}},utGV:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("q1tI"),o=n("TPjH"),r=n("/acK"),a=n("IRZy"),s=n("bY+3");t.useDropTargetMonitor=function(){var e=r.useDragDropManager();return[i.useMemo((function(){return new s.default(e)}),[e]),i.useMemo((function(){return new a.default(e.getBackend())}),[e])]},t.useDropHandler=function(e,t,n){var a=r.useDragDropManager(),s=i.useMemo((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);i.useEffect((function(){var i=o.default(e.current.accept,s,a),r=i[0],c=i[1];return t.receiveHandlerId(r),n.receiveHandlerId(r),c}),[t,n])}},uyxo:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("jHGc"),o=n("n6mq"),r=n("nKUr");function a(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:a,onEditSubmit:s,onToggleModal:c,pinId:d,variant:l,viewParameter:u,shouldUseLegoStyles:h}=e,b="pin"===l?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return Object(r.jsxs)(o.f,{alignItems:"center",display:"flex",direction:"row",marginStart:"pin"===l?-1:void 0,marginEnd:"pin"===l?-1:void 0,paddingX:"closeup"!==l||h?void 0:2,width:"closeup"===l?"100%":void 0,children:[t&&Object(r.jsx)(o.f,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),Object(r.jsx)(o.f,{paddingX:1,flex:"none",marginStart:"auto",children:Object(r.jsx)(i.default,{component:0,onDelete:a,onSubmit:s,pinId:d,onToggleModal:c,viewParameter:u,carouselSlotCurrentIndex:n,style:b,shouldUseLegoStyles:h,useLegoStyles:"pin"===l})})]})}},"v+PR":function(e,t,n){n.d(t,"a",(function(){return g}));var i=n("q1tI"),o=n("Ye/N"),r=n("w70y"),a=n("vvax"),s=n("n6mq"),c=n("nKUr");function d({pin:e}){const{data:t}=Object(r.a)({name:"PinSaveStatusResource",options:{id:e.id},allowStale:!1});return t&&t.pinned_to_board?Object(c.jsxs)(s.f,{children:[Object(c.jsx)(s.f,{color:"red","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:Object(c.jsx)(s.ab,{align:"center",color:"white",size:"md",weight:"bold",children:Object(a.b)(o.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" ")})}),Object(c.jsx)(s.f,{display:"flex",justifyContent:"center",marginTop:-3,children:Object(c.jsx)(s.v,{accessibilityLabel:"",color:"red",icon:"heart",size:26})})]}):null}var l=n("P6kd"),u=n("g/XF"),h=n("U4JR");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,f=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/;class g extends i.Component{constructor(...e){super(...e),b(this,"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:this.props.pin&&this.props.pin.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),b(this,"onDescriptionChange",(e,t)=>{const n=new RegExp(p,"g");let i="";if(t<e.length){let o=n.exec(e),r=n.lastIndex<t;for(;o&&r;)o=n.exec(e),r=n.lastIndex<t;const a=!!o&&p.test(e.slice(o.index,t));r=!!o&&o.index<t,o&&a&&r&&(i=o[0])}else{const t=f.exec(e);i=t?t[0]:""}this.updateDescription(e);const o=p.test(i),r=this.state.isHashtagFlyoutOpen?this.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");this.setState({cursorIndex:t,flyoutCursorIndex:r,description:e,hashtagQuery:i,isHashtagFlyoutOpen:o,flyoutOpened:this.state.flyoutOpened||o})}),b(this,"onCursorChange",e=>{const{isHashtagFlyoutOpen:t,flyoutCursorIndex:n}=this.state;t&&e<n&&this.setState({isHashtagFlyoutOpen:!1})}),b(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),b(this,"handleDescriptionBlur",e=>{const t=e.target.value.trim(),{isHashtagFlyoutOpen:n}=this.state;this.updateDescription(t),this.setState({description:t,editing:n})}),b(this,"handleDescriptionEdit",()=>{this.setState({editing:!0})}),b(this,"handleHashtagAddition",e=>{const{pin:t}=this.props;Object(h.b)(101,{component:208,element:10249,hashtags:e,objectId:t.id});const n=this.state.flyoutCursorIndex,i=Number(n+this.state.hashtagQuery.length),o=this.state.description.slice(0,n)+e+" "+this.state.description.slice(i);this.updateDescription(o),this.setState({description:o,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),b(this,"handleRefTextArea",e=>{this._textArea=e})}render(){const{color:e,isFirstPin:t,pin:n,pinImageRef:i}=this.props,{description:o,editing:r,flyoutOpened:a,hashtagQuery:h,isHashtagFlyoutOpen:b}=this.state,{images:p,link:f}=n,g=p&&p["236x"],m=g&&g.url||n.image_base64;return Object(c.jsxs)(s.f,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t?"50%":"",dangerouslySetInlineStyle:{__style:a&&r?{transform:"translateY(-75px)"}:{}},children:[Object(c.jsxs)(s.f,{display:"flex",direction:"column",alignItems:"center",children:[n&&n.id&&Object(c.jsx)(d,{pin:n}),Object(c.jsx)(s.f,{paddingY:t?9:0,width:240,children:Object(c.jsx)(s.f,{ref:i,maxHeight:a&&r?220:335,rounding:4,overflow:"hidden",children:m?Object(c.jsx)(s.x,{alt:o,src:m,naturalHeight:(null==g?void 0:g.height)||1,naturalWidth:(null==g?void 0:g.width)||1}):!!f&&Object(c.jsx)(u.a,{color:e||"",description:o,url:f})})})]}),this.anchor&&b?Object(c.jsx)(l.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:r,query:h}):null]})}}},"v/Q4":function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("/MKj");function o(){return Object(i.useSelector)(({viewer:e})=>e)}},vVEi:function(e,t,n){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return O})),n.d(t,"f",(function(){return x})),n.d(t,"d",(function(){return y}));var i=n("/MKj"),o=n("OWXb"),r=n("nGHF"),a=n("q1tI"),s=n("Ye/N"),c=n("4jWr"),d=n("n6mq"),l=n("nKUr");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return Object(l.jsx)(d.f,{display:"flex",justifyContent:"around",overflow:"hidden",children:Object(l.jsx)("div",{className:"boardBlockingActionToastWhiteSpinner",children:Object(l.jsx)(d.v,{accessibilityLabel:s.a._("board action pending","accessibility label for board action toast to indicate pending action","accessibility label for board action toast to indicate pending action"),color:"white",icon:"knoop",size:40})})})}class b extends a.Component{constructor(...e){super(...e),u(this,"state",{hiding:!1,visible:!1}),u(this,"handleHide",()=>{this.setState({hiding:!0}),this.timeout=window.setTimeout(this.props.onHide,c.a)}),u(this,"handleMouseEnter",()=>{window.clearTimeout(this.timeout)}),u(this,"handleMouseLeave",()=>{this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3)})}componentDidMount(){this.firstLine&&(window.setTimeout(()=>{this.setState({visible:!0})},100),this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3))}get firstLine(){const{actionType:e,actionStatus:t,location:{isSection:n}}=this.props,i="completed"===t;switch(e){case"create_section":return i?s.a._("Created section","toast text to indicate a section has been created successfully","toast text to indicate a section has been created successfully"):s.a._("Creating section","toast text to indicate a section is being created","toast text to indicate a section is being created");case"delete_pins":return n?i?s.a._("Deleted Pins from","toast text to notify Pins have been deleted from a section","toast text to notify Pins have been deleted from a section"):s.a._("Deleting Pins from","toast text to notify Pins are being deleted from a section","toast text to notify Pins are being deleted from a section"):i?s.a._("Deleted Pins from","toast text to notify Pins have been deleted from a board","toast text to notify Pins have been deleted from a board"):s.a._("Deleting Pins from","toast text to notify Pins are being deleted from a board","toast text to notify Pins are being deleted from a board");case"move_pins":return n?i?s.a._("Moved to","toast text to notify pins have been moved to this section","toast text to notify pins have been moved to this section"):s.a._("Moving to","toast text to notify pins are being moved to this section","toast text to notify pins are being moved to this section"):i?s.a._("Moved to","toast text to notify pins have been moved to this board","toast text to notify pins have been moved to this board"):s.a._("Moving to","toast text to notify pins are being moved to this board","toast text to notify pins are being moved to this board");case"merge":return n?i?s.a._("Moved to","toast text to notify anotehr section has been merged to this section","toast text to notify anotehr section has been merged to this section"):s.a._("Moving to","toast text to notify another section is being merged to this section","toast text to notify another section is being merged to this section"):i?s.a._("Moved to","toast text to notify another board has been merged to this board","toast text to notify another board has been merged to this board"):s.a._("Moving to","toast text to notify another board is being merged to this board","toast text to notify another board is being merged to this board");default:return null}}render(){const{actionStatus:e,location:t}=this.props,{visible:n,hiding:i}=this.state;if(!this.firstLine)return null;const o="inProgress"===e?t.name+"...":t.name;return Object(l.jsx)("div",{style:Object(c.b)(n,i),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:Object(l.jsx)(d.db,{text:Object(l.jsxs)(a.Fragment,{children:[Object(l.jsx)(d.ab,{children:this.firstLine}),Object(l.jsx)(d.ab,{weight:"bold",children:o})]}),thumbnail:"completed"===e?void 0:Object(l.jsx)(h,{})})})}}const p=2e3,f=5e3;const g=["merge","move_pins","create_section"];function m({blockingActions:e,actionType:t,boardId:n,sectionId:i}){return e.find(e=>!(function(e){switch(e){case 22:return"delete_board";case 7172:case 7173:return"merge";case 900:case 7158:case 7109:return"delete_pins";case 901:case 7108:return"move_pins";case 7100:return"create_section";case 7102:return"delete_section";default:return null}}(e.action_type)!==t||g.includes(e.action_type)&&e.is_origin||e.board_id!==n||(i?i!==e.section_id:e.section_id&&"-1"!==e.section_id)||1===e.progress))}let j=0;const v={};function O({check:e,checkDelay:t,checkInterval:n,onComplete:i}){const o="timeout"+j;j+=1;const r=()=>{const t=Date.now();e().then(e=>{const a=Date.now()-t;e?(i(),delete v[o]):v[o]=setTimeout(r,Math.max(1e3,n-a))}).catch(()=>{delete v[o]})};v[o]=setTimeout(r,t)}const x=(e,t,n,i)=>({onHide:o})=>{var r;return Object(l.jsx)(b,{actionType:t,actionStatus:e,duration:"inProgress"===e?p:2e3,location:{name:i?i.title:null!==(r=n.name)&&void 0!==r?r:"",isSection:!!i},onHide:o})};function y(e){function t(t){const n=Object(i.useDispatch)(),{showToast:a}=Object(r.b)();return Object(l.jsx)(e,{...t,showBlockingActionToast:({actionType:e,board:t,section:i})=>{a(x("inProgress",e,t,i)),O({check:()=>n(Object(o.a)(t.id)).then(n=>!m({blockingActions:n,actionType:e,boardId:t.id,sectionId:i&&i.id})),checkDelay:p,checkInterval:f,onComplete:()=>a(x("completed",e,t,i))})}})}return t.displayName=`WithShowBlockingActionToasts(${e.displayName||e.name||""})`,t}},vZlu:function(e,t,n){n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return d}));const i=e=>({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:{value:e}});function o(e){const{currentTime:t,isPromoted:n,pinId:i}=e;return{type:"SET_CURRENT_VIDEO",payload:{pinId:i,isPromoted:n,currentTime:t}}}function r(e){return{type:"SET_IS_AUTOPLAY",payload:{isAutoplay:e}}}function a(e){const{currentTime:t,isPromoted:n,pinId:i}=e;return{type:"PAUSE_CURRENT_VIDEO",payload:{currentTime:t,pinId:i,isPromoted:n}}}function s(e){return{type:"SET_APP_FOCUS_STATE",payload:{appInFocus:e}}}function c(e){return{type:"SET_VIEWPORT_SIZE",payload:{viewportSize:e}}}function d(e){return{type:"SET_FOOTER_VISIBILITY_STATE",payload:{footerPlusButtonVisible:e}}}},vh5K:function(e,t,n){n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return d}));var i=n("mwIZ"),o=n.n(i);function r(e){return!!e&&0!==e.type}const a=(e,t,n)=>{const i=e[n];return t[n]&&r(i)?i:null};function s(e){return o()(e,["display_data","anchor"])}function c(e,t,n,i=!1,o=!1){if(i&&e&&t)return`${e}%3A${t}`;const r=n[e];if(r){if(r.experience_id===t)return r.id.replace(":","%3A")}else if(o&&e&&t)return`${e}%3A${t}`;return null}function d(e,t){t&&8===t.type&&(e[s(t)]=t)}},vmVG:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("7nh8"),o=n("QLaP");t.default=function(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){o(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();return n.getSource(r,!0).endDrag(t,r),n.unpinSource(),{type:i.END_DRAG}}}},vvax:function(e,t,n){var i=n("qpbZ");n.d(t,"b",(function(){return i.b})),n.d(t,"a",(function(){return i.a}))},"w/wX":function(e,t,n){var i=n("QqLw"),o=n("ExA7");e.exports=function(e){return o(e)&&"[object Set]"==i(e)}},w70y:function(e,t,n){n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p}));var i=n("q1tI"),o=n("/MKj"),r=n("lSCD"),a=n.n(r),s=n("hZxF"),c=n("aK+E"),d=n("EC67"),l=n("Wer7"),u=n("nKUr");const h={};function b({acceptPrefetch:e,allowStale:t,enabledRouteRefresh:n,dangerouslyDisableFetch:r,options:a,name:u,headers:b}){const p=Object(o.useDispatch)(),f=Object(c.a)(a),g=Object(i.useRef)(),m=e=>(e[u]||h)[f]||h,{isPrefetch:j,nextBookmark:v,prefetchHasBeenRead:O}=Object(o.useSelector)(({resources:e})=>m(e.data)),x=Object(o.useSelector)(({resources:e})=>m(e.data).data),y=Object(o.useSelector)(({resources:e})=>m(e.data).auxData),_=Object(o.useSelector)(({resources:e})=>m(e.data).error),w=Object(o.useSelector)(({resources:e})=>Boolean((e.fetching[u]||h)[f])),C=Object(o.useSelector)(({resources:e})=>Boolean((e.data[u]||h)[f])),S=Object(d.h)(),I=S&&"POP"!==S.action,T=Boolean(C&&n&&I&&!r),[E,P]=Object(i.useState)(T);void 0===g.current&&C&&I&&e&&j&&!O&&!r&&p(Object(l.h)(u,a));const D=Object(i.useCallback)(()=>{r||p(Object(l.a)(u,a,b))},[r,p,b,u,f]),B=Object(i.useCallback)(()=>{r||p(Object(l.d)(u,a,b))},[r,b,u,f]),k=Object(i.useCallback)(()=>{r||(D(),P(!0))},[r,D,P]),M=Object(i.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:B,isAtEnd:!1,isFetching:!1,isLoaded:!1,isPrefetch:void 0,isRefreshing:!1,nextBookmark:void 0,prefetchHasBeenRead:void 0,refreshData:k});Object(s.a)(()=>{!1!==t&&C&&!T||D()}),Object(i.useEffect)(()=>{void 0!==g.current&&f!==g.current&&D(),g.current=f},[D,f]);const R={auxData:y,data:x,error:_,fetchMore:B,isAtEnd:C&&!w&&"-end-"===v,isFetching:w,isLoaded:C,isPrefetch:j,isRefreshing:E,nextBookmark:v,prefetchHasBeenRead:O,refreshData:k};return Object(o.shallowEqual)(R,M.current)||(!E||!M.current.data&&T||Object(o.shallowEqual)(R.data,M.current.data)||(R.isRefreshing=!1,P(!1)),M.current=R),M.current}function p(e){const t=e.key;return function(n){function i(i){const{dangerouslyDisableFetch:o,options:r,key:s,...c}=e,d=b({...c,options:(a()(r)?r(i):r)||{},dangerouslyDisableFetch:!!o&&o(i)}),l={[t]:d};return Object(u.jsx)(n,{...i,...l})}return i.displayName=`withResource[${e.name}](${n.displayName||n.name||""})`,i.WrappedComponent=n,i}}},weYu:function(e,t,n){n.d(t,"a",(function(){return f}));var i=n("q1tI"),o=n("s7xj"),r=n("Ye/N"),a=n("oRao"),s=n("vvax"),c=n("n6mq"),d=n("nKUr");var l=({handleClick:e,selectedBoard:t,sourceBoard:n,targetBoardCandidates:i})=>{const l=Object(d.jsx)(c.ab,{weight:"bold",inline:!0,children:null==n?void 0:n.name}),u=Object(d.jsx)(c.ab,{weight:"bold",inline:!0,children:null==n?void 0:n.pin_count});return 0===i.length?Object(d.jsx)(c.ab,{children:r.a._("There is no board to merge this board into.","BoardMergeModal.NoBoards.Text","helper text for selecting merge target board")}):n?Object(d.jsxs)(c.f,{maxWidth:540,maxHeight:532,marginStart:4,marginEnd:4,children:[Object(d.jsx)(c.ab,{size:"lg",align:"center",children:Object(s.b)(r.a._("Your board {{ sourceBoardName }} and all {{ sourceBoardPinCount }} pins will be gone for good. You won’t be able to get them back.","BoardMergeModal.Merge.Text","helper text for merging board"),{sourceBoardName:l,sourceBoardPinCount:u})}),Object(d.jsx)(c.f,{marginTop:4,marginStart:2,children:Object(d.jsx)(c.ab,{size:"sm",children:r.a._("All boards","MergeModal.AllBoards.Text","all boards section title")})}),i.map(n=>{var i,l;return Object(d.jsx)(c.Z,{onTap:()=>e(n),children:Object(d.jsxs)(c.f,{color:(null==t?void 0:t.id)===n.id?"lightGray":"transparent",display:"flex",justifyContent:"between",alignItems:"center",height:64,padding:2,rounding:2,children:[Object(d.jsxs)(c.f,{display:"flex",flex:"grow",children:[Object(d.jsx)(c.C,{height:48,width:48,rounding:2,children:Object(d.jsx)(c.x,{fit:"cover",src:n.image_cover_url||"",color:"steelblue",naturalHeight:48,naturalWidth:48,alt:r.a._("Board Cover Image","MergeModal.Board.CoverImage","board cover image")})}),Object(d.jsxs)(c.f,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,children:[Object(d.jsx)(c.f,{marginBottom:1,children:Object(d.jsx)(c.ab,{size:"lg",weight:"bold",children:n.name})}),Object(d.jsx)(c.ab,{size:"sm",children:Object(s.b)(r.a.ngettext("{{ count }} Pin","{{ count }} Pins",null!==(i=n.pin_count)&&void 0!==i?i:0,"boardEdit.boardMergeModalBody.pinCount","label for n amount of pins"),{count:Object(d.jsx)(a.a,{value:null!==(l=n.pin_count)&&void 0!==l?l:0})})})]})]}),Object(d.jsxs)(c.f,{display:"flex",alignItems:"center",direction:"row",children:["secret"===n.privacy&&Object(d.jsx)(c.f,{marginEnd:3,children:Object(d.jsx)(c.v,{icon:"lock",color:"darkGray",accessibilityLabel:r.a._("Private board icon","MergeModal.Board.Private.Icon","private board accesibility label")})}),n.is_collaborative&&Object(d.jsx)(c.f,{marginEnd:3,children:Object(d.jsx)(o.a,{isCompact:!0,board:n})}),!!n.section_count&&Object(d.jsx)(c.v,{icon:"arrow-forward",color:"darkGray",accessibilityLabel:r.a._("Board section icon","MergeModal.Board.Section.Icon","board secetion accesibility label")})]})]})},n.id)})]}):null},u=n("TgLd"),h=n("w70y");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends i.Component{constructor(...e){super(...e),b(this,"state",{selectedTargetBoard:null}),b(this,"handleChange",e=>{this.setState({selectedTargetBoard:e})}),b(this,"handleSubmit",()=>{const{onSubmit:e}=this.props,{selectedTargetBoard:t}=this.state;t&&e(t)}),b(this,"renderModalBody",()=>{const{boardsResource:e,sourceBoardId:t}=this.props,{selectedTargetBoard:n}=this.state,{data:i}=e;if(!i)return Object(d.jsx)(c.T,{accessibilityLabel:r.a._("Loading board list","spinner accessibility label","spinner accessibility label"),show:!0});const o=i.find(e=>e.id===t),a=i.filter(e=>e.id!==t);return Object(d.jsx)(l,{handleClick:this.handleChange,selectedBoard:n,sourceBoard:o,targetBoardCandidates:a})})}render(){const{onCancel:e}=this.props,{selectedTargetBoard:t}=this.state,n=Object(d.jsxs)(c.f,{display:"flex",justifyContent:"between",alignItems:"center",padding:6,children:[Object(d.jsx)(c.f,{}),Object(d.jsx)(c.u,{size:"md",children:r.a._("Combine boards","BoardMergeModal.CombineBoards","title for board merging modal")}),Object(d.jsx)(c.Z,{fullWidth:!1,onTap:e,accessibilityLabel:r.a._("Close merge boards modal","BoardMergeModal.Close.TapArea","close icon for board merging modal"),children:Object(d.jsx)(c.v,{icon:"cancel",color:"darkGray",size:18,accessibilityLabel:r.a._("Close merge boards modal","BoardMergeModal.Close.Label","close icon for board merging modal")})})]});return Object(d.jsx)(u.b,{accessibilityModalLabel:r.a._("Move Pins to","BoardEdit.BoardMergeModal.accessibilityLabel","accessibility label for board merging modal"),heading:n,onDismiss:e,footer:Object(d.jsx)(c.f,{display:"flex",justifyContent:"end",children:Object(d.jsx)(c.g,{color:"red",disabled:!t,inline:!0,onClick:this.handleSubmit,size:"lg",text:r.a._("Done","BoardMergeModal.Button.Submit","button for merging a board")})}),children:Object(d.jsx)(c.f,{padding:8,children:this.renderModalBody()})})}}function f(e){const t=Object(h.a)({name:"BoardsResource",options:{privacy_filter:"all",sort:"alphabetical",field_set_key:"detailed",username:"me"},allowStale:!1});return Object(d.jsx)(p,{...e,boardsResource:t})}},wrZu:function(e,t,n){var i=n("+K+b"),o=n("XYm9"),r=n("b2z7"),a=n("otv/"),s=n("yP5f");e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return r(e);case"[object Set]":return new c;case"[object Symbol]":return a(e)}}},xKh6:function(e,t,n){var i=n("eOdZ");var o=e=>i.a.create("InviteAttributionResource",{invite_code:e}).callCreate(),r=n("RNo4");t.a=(e=(e=>{}))=>{const t=Object(r.k)(window.location.search),n=t.invite_code;n?o(n):e(t)}},xOLo:function(e,t,n){n.r(t),n.d(t,"CarouselSliders",(function(){return p}));var i=n("/MKj"),o=n("XSD5"),r=n("ZbwW"),a=n("Ye/N"),s=n("0nTG"),c=n("U4JR"),d=n("n6mq"),l=n("nKUr");const u={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},h=(e,t,n,i,o,r,a,d,l,u)=>{if(!u||!o){const{carousel_slots:u,id:h}=o;Object(c.b)(108,{...l,objectId:t,component:d,view:a,viewParameter:r,eventData:{pinCarouselSlotEventData:{carouselSlotId:(null==u?void 0:u[n])&&Number(u[n].id),carouselDataId:Number(h),carouselSlotIndex:n,toCarouselSlotIndex:i}},...Object(s.f)(e)||{}})}},b=(e,t,n,i,o,r)=>{r||void 0===i||(e.preventDefault(),e.stopPropagation(),i(t,n)),void 0!==o&&o(n)},p=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:i,pin:o,pinId:r,contextLogData:s,viewParameter:c,viewType:p,componentType:f,isEditMode:g})=>{if(!t)return null;const{carousel_slots:m=[],index:j=0}=t,v=void 0!==e?e:j,O=Math.max(0,v-1),x=Math.min(m.length-1,v+1);return Object(l.jsxs)(d.f,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0,children:[Object(l.jsx)("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{b(e,r,O,n,i,g),h(o,r,v,O,t,c,p,f,s,g)},onKeyUp:e=>{b(e,r,O,n,i,g),h(o,r,v,O,t,c,p,f,s,g)},style:u.slider,children:v>0&&Object(l.jsx)(d.f,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:Object(l.jsx)(d.v,{color:"white",icon:"arrow-back",accessibilityLabel:a.a._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")})})}),Object(l.jsx)("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{b(e,r,x,n,i,g),h(o,r,v,x,t,c,p,f,s,g)},onKeyUp:e=>{b(e,r,x,n,i,g),h(o,r,v,x,t,c,p,f,s,g)},style:u.slider,children:v<m.length-1&&Object(l.jsx)(d.f,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:Object(l.jsx)(d.v,{color:"white",icon:"arrow-forward",accessibilityLabel:a.a._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")})})})]})};t.default=Object(i.connect)(({pins:e},{carouselData:t,pinId:n})=>{const i=e[n];return{pin:i,carouselData:t||Object(r.a)(i)}},e=>({changeCarouselSlotIndex:(t,n)=>e(Object(o.a)(t,n))}))(p)},xUWj:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("w70y");const o=({boardId:e,ownerUsername:t,ownerName:n,ownerImgSrc:o})=>{const{data:r,isLoaded:a}=Object(i.a)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0}}),s=[{name:n,src:o,href:`/${t}/`,isDim:!1}];return a&&r&&r.length>0&&r.forEach(e=>{s.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),s};function r({children:e,...t}){return e(o(t))}t.b=o},xZ6X:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("n6mq"),o=n("nKUr");function r(e){const{iconNode:t,title:n,subtitle:r,accessory:a}=e;return Object(o.jsxs)(i.f,{display:"flex",alignItems:"center",paddingX:4,paddingY:2,children:[Object(o.jsx)(i.f,{marginEnd:2,children:t}),Object(o.jsxs)(i.f,{display:"flex",flex:"grow",alignItems:"start",direction:"column",children:[Object(o.jsx)(i.ab,{color:"darkGray",size:"lg",truncate:!0,weight:"bold",children:n}),Object(o.jsx)(i.ab,{truncate:!0,size:"sm",color:"gray",children:r})]}),a&&Object(o.jsx)(i.f,{children:a})]})}},xweI:function(e,t,n){var i=n("XGnz"),o=n("alwl"),r=n("EA7m"),a=n("mv/X"),s=r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,i(t,1),[])}));e.exports=s},y9Ij:function(e,t,n){n.d(t,"a",(function(){return b}));var i=n("q1tI"),o=(n("PNKV"),n("TSYQ")),r=n.n(o),a=n("rVUJ"),s=n("Ye/N"),c=n("uyxo"),d=n("n6mq"),l=n("nKUr");const u={sm:32,md:40,lg:48},h=Object(i.memo)(Object(i.forwardRef)(({carouselData:e,disabled:t=!1,iconOnly:n,isCloseupPin:i,onBoardUpdated:o,onClick:a,onSavedClick:h,onToggleModal:b,onUnsaved:p,renderSavedStatus:f,saveButtonType:g="classic",saved:m,savedInfo:j,size:v="md",variant:O="classic",viewParameter:x},y)=>m&&"controlled"===g?Object(l.jsx)(d.g,{disabled:!0,text:s.a._("Saved"),size:"sm"}):!i&&j&&f&&p&&o&&"classic"===g?Object(l.jsx)(c.a,{currentCarouselIndex:e&&e.index,onDeleteSavedState:p,onEditSubmit:o,onToggleModal:b,pinId:j.localPinId,variant:"pin",viewParameter:x,children:f()}):m&&"classic"===g&&i?Object(l.jsx)(d.g,{accessibilityLabel:s.a._("Saved button","saveButton.saved.label","Saved state label on save button"),text:s.a._("Saved!","saveButton.saved","Saved state text on save button"),size:"md",color:"white",onClick:h}):n?Object(l.jsx)("div",{ref:y,"data-test-id":"SaveButton",children:Object(l.jsx)(d.w,{accessibilityLabel:s.a._("Save","Accessibility label for the save button","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:({event:e})=>a(e),iconColor:"darkGray"})}):Object(l.jsx)(d.f,{display:i?void 0:"flex",justifyContent:"end",children:Object(l.jsx)("div",{ref:y,className:r()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled",{"SaveButton--lego":"lego"===O}),"data-test-id":"SaveButton",onClick:t?void 0:a,onKeyPress:t?void 0:e=>{32!==e.charCode&&13!==e.charCode||(e.preventDefault(),a(e))},role:"button",tabIndex:"0",children:Object(l.jsx)("div",{className:r()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===O}),children:Object(l.jsx)(d.f,{alignItems:"center",minHeight:u[v],dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex",children:Object(l.jsx)(d.ab,{color:t?"gray":"white",size:"lego"===O?"sm":"md",weight:"bold",children:Object(l.jsx)("span",{className:r()("SaveButton__label",{"SaveButton__label--lego":"lego"===O}),children:s.a._("Save","Pin save button label","Pin save button label")})})})})})}))),b=({isPulsarDisplayed:e,...t})=>{const[n,o]=Object(i.useState)(null),r=Object(i.useCallback)(e=>{o(e)},[n]);return Object(l.jsx)(a.a,{anchor:".PinActionBar .repin.pinActionBarButton",anchorElementRef:n,isHidden:!e,children:Object(l.jsx)(h,{ref:r,...t})})};t.b=h},yBr6:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("/Ecc"),o=n("zpn9");function r(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),i=n.top;return{x:n.left,y:i}}t.getNodeClientOffset=r,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,n,a,s){var c,d,l="IMG"===(c=t).nodeName&&(i.isFirefox()||!document.documentElement.contains(c)),u=r(l?e:t),h={x:n.x-u.x,y:n.y-u.y},b=e.offsetWidth,p=e.offsetHeight,f=a.anchorX,g=a.anchorY,m=function(e,t,n,o){var r=e?t.width:n,a=e?t.height:o;return i.isSafari()&&e&&(a/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:a}}(l,t,b,p),j=m.dragPreviewWidth,v=m.dragPreviewHeight,O=s.offsetX,x=s.offsetY,y=0===x||x;return{x:0===O||O?O:new o.default([0,.5,1],[h.x,h.x/b*j,h.x+j-b]).interpolate(f),y:y?x:(d=new o.default([0,.5,1],[h.y,h.y/p*v,h.y+v-p]).interpolate(g),i.isSafari()&&l&&(d+=(window.devicePixelRatio-1)*v),d)}}},yCO0:function(e,t,n){function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("U4W0")),i(n("aS9Y"))},yHx3:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},"ySR+":function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n("1dBE");const{Provider:o,Consumer:r,useHook:a}=Object(i.c)("headerButtonContext")},yYqh:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("pLLR"),o=n("RNo4");var r=n("EC67");function a({checkExperiments:e,disableFetch:t,viewer:n}){const a=Object(r.i)(),s=Object(r.k)(),c=Object(i.d)(),d=function({location:{pathname:e,search:t},match:{params:n,path:i},viewer:r}){return{routeData:{matchPath:i,params:n,parsedSearch:Object(o.k)(t),pathname:e,search:t},user:{country:r.country||void 0,id:r.id||void 0,isAuth:r.isAuth,isEmployee:!!r.isEmployee||!1,isPartner:!!r.isPartner||!1,username:r.username||void 0}}}({location:a,match:s,viewer:n}),l=!!t&&t(d),u=!(!l&&e)||e(c.experiments);return{args:d,fetchDisabled:l||!u}}},ypm9:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),o=n("/MKj"),r=n("xKh6"),a=n("G8fK"),s=n("EC67");function c(){const e=Object(o.useDispatch)(),t=Object(s.h)(),{pathname:n}=Object(s.i)(),c=Object(o.useSelector)(({ui:e})=>e.mainComponent.locationToErrorMap);Object(i.useEffect)(()=>{Object(r.a)();const i=`/${n.split("/")[1]}/`;c[n]&&(e(Object(a.a)(i,c[n])),t.replace(i))},[])}},ytYg:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("v/Q4");function o(){const e=Object(i.a)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee||!1,isPartner:!!e.isPartner||!1,username:e.username||void 0}}},yue5:function(e,t,n){var i=n("/9aa");e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,r=e==e,a=i(e),s=void 0!==t,c=null===t,d=t==t,l=i(t);if(!c&&!l&&!a&&e>t||a&&s&&d&&!c&&!l||o&&s&&d||!n&&d||!r)return 1;if(!o&&!a&&!l&&e<t||l&&n&&r&&!o&&!a||c&&n&&r||!s&&r||!d)return-1}return 0}},z3qU:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("/ZYE"),o=n("utGV"),r=n("q1tI"),a=n("2S0S");t.useDrop=function(e){var t=r.useRef(e);t.current=e,a(null!=e.accept,"accept must be defined");var n=o.useDropTargetMonitor(),s=n[0],c=n[1];o.useDropHandler(t,s,c);var d=i.useMonitorOutput(s,t.current.collect||function(){return{}},(function(){return c.reconnect()})),l=r.useMemo((function(){return c.hooks.dropTarget()}),[c]);return r.useEffect((function(){c.dropTargetOptions=e.options||null,c.reconnect()}),[e.options]),[d,l]}},zEVN:function(e,t,n){var i=n("Gi0A"),o=n("sEf8"),r=n("mdPL"),a=r&&r.isMap,s=a?o(a):i;e.exports=s},zQfT:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("q1tI");const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new o(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var a=r,s=n("eOdZ");function c({resourceName:e,resourceOptions:t}){const n={...t,count:"count"in t?t.count:5},i=s.a.create(e,n),o=new a,r=()=>{i.abort()};return async function(e){const t=o.get(e);if(t){const n=t.items;if(n&&n.length){r();return{hint:t.hint,items:n,term:e}}}return e.length>=0?(async e=>{var t;if(i.isCalling()){var n;if(e===(null===(n=i.options)||void 0===n?void 0:n.term))return;r()}const{bookmarks:a,...s}=i.options||{};i.options={...s,term:e};const c=null===(t=(await i.callGet({showError:!1})).resource_response)||void 0===t?void 0:t.data,d=null==c?void 0:c.items,l=(null==c?void 0:c.hint)||{},u={hint:l,items:d};return o.set(e,u),{term:e,items:d,hint:l}})(e):{hint:{},items:[],term:e}}}function d({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:o}){const r=Object(i.useRef)(!1),a=Object(i.useRef)({}),[s,d]=Object(i.useState)([]),l=function({resourceName:e,resourceOptions:t}){const n=Object(i.useRef)();return n.current||(n.current=c({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n});return Object(i.useEffect)(()=>{(async()=>{if(null!=o&&(e||r.current))if(o in a.current)d(a.current[o]);else try{const e=await l(o);if(e){const{items:t}=e;a.current[o]=t,d(t)}}catch(t){if("Resource call aborted"===t)return;throw t}r.current||(r.current=!0)})()},[o]),s}},zUcL:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("n6mq"),o=n("nKUr");function r({children:e,setMaxWidth:t=!0}){return Object(o.jsx)(i.f,{width:"100%",display:"flex",justifyContent:"center",children:t?Object(o.jsx)(i.f,{width:"100%",paddingX:2,maxWidth:774,children:e}):Object(o.jsx)(i.f,{width:"100%",children:e})})}},zXAL:function(e,t,n){var i=n("/MKj"),o=n("peh1"),r=n("Vzit"),a=n("vh5K"),s=n("ANjH");const c=Object(o.createSelector)(e=>e.experiences.eligibleExperiences,e=>e.experiences.mountedPlacements,(e,t)=>t.placementId,a.c);t.a=Object(i.connect)((function(e,t){return{experienceForPlacement:c(e,t)}}),(function(e){return Object(s.bindActionCreators)({completeExperience:r.a,dismissExperience:r.b,fetchAllExperiences:r.d,fetchAllExperiencesMulti:r.f,fetchExperienceForPlacement:r.c,triggerExperimentsForPlacement:r.k,viewExperience:r.j},e)}),(function(e,t,n){return{experienceClient:{...e,...t},...n}}),{forwardRef:!0})},zir5:function(e,t,n){n.d(t,"a",(function(){return o}));const i=e=>e.startsWith("enabled")||e.startsWith("employee");class o{constructor(e={},t={},n=!1){var i,o,r;r=!1,(o="useBatching")in(i=this)?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r,this.active=e,this.triggerable=t,this.useBatching=n}flush(){}v2GetGroup(e){let t=this.active[e];return void 0===t&&(t=this.triggerable[e]),t||null}v2InGroup(e,t){const n=this.v2GetGroup(e);return"string"==typeof t&&(t=[t]),!!n&&-1!==t.indexOf(n)}v2ActivateExperiment(e){throw new Error("Method must be implemented by subclass.")}v2LogExperimentGroupOverride(e,t){throw new Error("Method must be implemented by subclass.")}getWithActivation(e){const t=this.v2ActivateExperiment(e)||"";return{anyEnabled:i(t),group:t}}getWithoutActivation(e){const t=this.v2GetGroup(e)||"";return{anyEnabled:i(t),group:t}}}},zoYe:function(e,t,n){var i=n("nmnc"),o=n("eUgh"),r=n("Z0cm"),a=n("/9aa"),s=i?i.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(r(t))return o(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},zpn9:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=e.length,i=[],o=0;o<n;o++)i.push(o);i.sort((function(t,n){return e[t]<e[n]?-1:1}));var r,a,s=[],c=[],d=[];for(o=0;o<n-1;o++)r=e[o+1]-e[o],a=t[o+1]-t[o],c.push(r),s.push(a),d.push(a/r);var l=[d[0]];for(o=0;o<c.length-1;o++){var u=d[o],h=d[o+1];if(u*h<=0)l.push(0);else{r=c[o];var b=c[o+1],p=r+b;l.push(3*p/((p+b)/u+(p+r)/h))}}l.push(d[d.length-1]);var f,g=[],m=[];for(o=0;o<l.length-1;o++){f=d[o];var j=l[o],v=1/c[o];p=j+l[o+1]-f-f;g.push((f-j-p)*v),m.push(p*v*v)}this.xs=e,this.ys=t,this.c1s=l,this.c2s=g,this.c3s=m}return e.prototype.interpolate=function(e){var t=this,n=t.xs,i=t.ys,o=t.c1s,r=t.c2s,a=t.c3s,s=n.length-1;if(e===n[s])return i[s];for(var c,d=0,l=a.length-1;d<=l;){var u=n[c=Math.floor(.5*(d+l))];if(u<e)d=c+1;else{if(!(u>e))return i[c];l=c-1}}var h=e-n[s=Math.max(0,l)],b=h*h;return i[s]+o[s]*h+r[s]*b+a[s]*h*b},e}();t.default=i}},[["/ySb","runtime","vendor-react",0,4,1,2,3,10,11,12,13,14,15,21,23,51]],[98,113,299,301,"PinBetterSaveCommon","PinSaveButtonCommon","PinRepEditButtonCommon",490,"ChangeBoardModalCommon","QuickSaveButtonCommon","PinPromoteButtonCommon","PinRepSendShareLinkButtonCommon"]]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/[username]/[slug]-authdesktop-3006081f78f4eac2e127.mjs.map